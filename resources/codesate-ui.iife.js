var CodeStateUI=(function(be){"use strict";var le,T,ze,J,We,He,Ve,Be,Ne,Se,ye,qe,oe={},Ge=[],Vt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,re=Array.isArray;function W(e,t){for(var n in t)e[n]=t[n];return e}function De(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function V(e,t,n){var s,a,l,o={};for(l in t)l=="key"?s=t[l]:l=="ref"?a=t[l]:o[l]=t[l];if(arguments.length>2&&(o.children=arguments.length>3?le.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)o[l]===void 0&&(o[l]=e.defaultProps[l]);return ce(e,o,s,a,null)}function ce(e,t,n,s,a){var l={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++ze,__i:-1,__u:0};return a==null&&T.vnode!=null&&T.vnode(l),l}function Bt(){return{current:null}}function z(e){return e.children}function H(e,t){this.props=e,this.context=t}function ee(e,t){if(t==null)return e.__?ee(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ee(e):null}function Ye(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ye(e)}}function Te(e){(!e.__d&&(e.__d=!0)&&J.push(e)&&!he.__r++||We!=T.debounceRendering)&&((We=T.debounceRendering)||He)(he)}function he(){for(var e,t,n,s,a,l,o,u=1;J.length;)J.length>u&&J.sort(Ve),e=J.shift(),u=J.length,e.__d&&(n=void 0,a=(s=(t=e).__v).__e,l=[],o=[],t.__P&&((n=W({},s)).__v=s.__v+1,T.vnode&&T.vnode(n),ke(t.__P,n,s,t.__n,t.__P.namespaceURI,32&s.__u?[a]:null,l,a??ee(s),!!(32&s.__u),o),n.__v=s.__v,n.__.__k[n.__i]=n,Qe(l,n,o),n.__e!=a&&Ye(n)));he.__r=0}function Ke(e,t,n,s,a,l,o,u,r,d,p){var c,v,g,S,b,N,f,_=s&&s.__k||Ge,m=t.length;for(r=qt(n,t,_,r,m),c=0;c<m;c++)(g=n.__k[c])!=null&&(v=g.__i==-1?oe:_[g.__i]||oe,g.__i=c,N=ke(e,g,v,a,l,o,u,r,d,p),S=g.__e,g.ref&&v.ref!=g.ref&&(v.ref&&we(v.ref,null,g),p.push(g.ref,g.__c||S,g)),b==null&&S!=null&&(b=S),(f=!!(4&g.__u))||v.__k===g.__k?r=Xe(g,r,e,f):typeof g.type=="function"&&N!==void 0?r=N:S&&(r=S.nextSibling),g.__u&=-7);return n.__e=b,r}function qt(e,t,n,s,a){var l,o,u,r,d,p=n.length,c=p,v=0;for(e.__k=new Array(a),l=0;l<a;l++)(o=t[l])!=null&&typeof o!="boolean"&&typeof o!="function"?(r=l+v,(o=e.__k[l]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?ce(null,o,null,null,null):re(o)?ce(z,{children:o},null,null,null):o.constructor==null&&o.__b>0?ce(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,u=null,(d=o.__i=Gt(o,n,r,c))!=-1&&(c--,(u=n[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(a>p?v--:a<p&&v++),typeof o.type!="function"&&(o.__u|=4)):d!=r&&(d==r-1?v--:d==r+1?v++:(d>r?v--:v++,o.__u|=4))):e.__k[l]=null;if(c)for(l=0;l<p;l++)(u=n[l])!=null&&(2&u.__u)==0&&(u.__e==s&&(s=ee(u)),tt(u,u));return s}function Xe(e,t,n,s){var a,l;if(typeof e.type=="function"){for(a=e.__k,l=0;a&&l<a.length;l++)a[l]&&(a[l].__=e,t=Xe(a[l],t,n,s));return t}e.__e!=t&&(s&&(t&&e.type&&!t.parentNode&&(t=ee(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function B(e,t){return t=t||[],e==null||typeof e=="boolean"||(re(e)?e.some(function(n){B(n,t)}):t.push(e)),t}function Gt(e,t,n,s){var a,l,o,u=e.key,r=e.type,d=t[n],p=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||p&&u==d.key&&r==d.type)return n;if(s>(p?1:0)){for(a=n-1,l=n+1;a>=0||l<t.length;)if((d=t[o=a>=0?a--:l++])!=null&&(2&d.__u)==0&&u==d.key&&r==d.type)return o}return-1}function Ze(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Vt.test(t)?n:n+"px"}function fe(e,t,n,s,a){var l,o;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||Ze(e.style,t,"");if(n)for(t in n)s&&n[t]==s[t]||Ze(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")l=t!=(t=t.replace(Be,"$1")),o=t.toLowerCase(),t=o in e||t=="onFocusOut"||t=="onFocusIn"?o.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+l]=n,n?s?n.u=s.u:(n.u=Ne,e.addEventListener(t,l?ye:Se,l)):e.removeEventListener(t,l?ye:Se,l);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Je(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Ne++;else if(t.t<n.u)return;return n(T.event?T.event(t):t)}}}function ke(e,t,n,s,a,l,o,u,r,d){var p,c,v,g,S,b,N,f,_,m,h,y,k,E,F,G,Q,M=t.type;if(t.constructor!=null)return null;128&n.__u&&(r=!!(32&n.__u),l=[u=t.__e=n.__e]),(p=T.__b)&&p(t);e:if(typeof M=="function")try{if(f=t.props,_="prototype"in M&&M.prototype.render,m=(p=M.contextType)&&s[p.__c],h=p?m?m.props.value:p.__:s,n.__c?N=(c=t.__c=n.__c).__=c.__E:(_?t.__c=c=new M(f,h):(t.__c=c=new H(f,h),c.constructor=M,c.render=Kt),m&&m.sub(c),c.props=f,c.state||(c.state={}),c.context=h,c.__n=s,v=c.__d=!0,c.__h=[],c._sb=[]),_&&c.__s==null&&(c.__s=c.state),_&&M.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=W({},c.__s)),W(c.__s,M.getDerivedStateFromProps(f,c.__s))),g=c.props,S=c.state,c.__v=t,v)_&&M.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),_&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(_&&M.getDerivedStateFromProps==null&&f!==g&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(f,h),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(f,c.__s,h)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(c.props=f,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),y=0;y<c._sb.length;y++)c.__h.push(c._sb[y]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(f,c.__s,h),_&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(g,S,b)})}if(c.context=h,c.props=f,c.__P=e,c.__e=!1,k=T.__r,E=0,_){for(c.state=c.__s,c.__d=!1,k&&k(t),p=c.render(c.props,c.state,c.context),F=0;F<c._sb.length;F++)c.__h.push(c._sb[F]);c._sb=[]}else do c.__d=!1,k&&k(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++E<25);c.state=c.__s,c.getChildContext!=null&&(s=W(W({},s),c.getChildContext())),_&&!v&&c.getSnapshotBeforeUpdate!=null&&(b=c.getSnapshotBeforeUpdate(g,S)),G=p,p!=null&&p.type===z&&p.key==null&&(G=et(p.props.children)),u=Ke(e,re(G)?G:[G],t,n,s,a,l,o,u,r,d),c.base=t.__e,t.__u&=-161,c.__h.length&&o.push(c),N&&(c.__E=c.__=null)}catch(Z){if(t.__v=null,r||l!=null)if(Z.then){for(t.__u|=r?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;l[l.indexOf(u)]=null,t.__e=u}else{for(Q=l.length;Q--;)De(l[Q]);Ee(t)}else t.__e=n.__e,t.__k=n.__k,Z.then||Ee(t);T.__e(Z,t,n)}else l==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=Yt(n.__e,t,n,s,a,l,o,r,d);return(p=T.diffed)&&p(t),128&t.__u?void 0:u}function Ee(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ee)}function Qe(e,t,n){for(var s=0;s<n.length;s++)we(n[s],n[++s],n[++s]);T.__c&&T.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(l){l.call(a)})}catch(l){T.__e(l,a.__v)}})}function et(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:re(e)?e.map(et):W({},e)}function Yt(e,t,n,s,a,l,o,u,r){var d,p,c,v,g,S,b,N=n.props,f=t.props,_=t.type;if(_=="svg"?a="http://www.w3.org/2000/svg":_=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),l!=null){for(d=0;d<l.length;d++)if((g=l[d])&&"setAttribute"in g==!!_&&(_?g.localName==_:g.nodeType==3)){e=g,l[d]=null;break}}if(e==null){if(_==null)return document.createTextNode(f);e=document.createElementNS(a,_,f.is&&f),u&&(T.__m&&T.__m(t,l),u=!1),l=null}if(_==null)N===f||u&&e.data==f||(e.data=f);else{if(l=l&&le.call(e.childNodes),N=n.props||oe,!u&&l!=null)for(N={},d=0;d<e.attributes.length;d++)N[(g=e.attributes[d]).name]=g.value;for(d in N)if(g=N[d],d!="children"){if(d=="dangerouslySetInnerHTML")c=g;else if(!(d in f)){if(d=="value"&&"defaultValue"in f||d=="checked"&&"defaultChecked"in f)continue;fe(e,d,null,g,a)}}for(d in f)g=f[d],d=="children"?v=g:d=="dangerouslySetInnerHTML"?p=g:d=="value"?S=g:d=="checked"?b=g:u&&typeof g!="function"||N[d]===g||fe(e,d,g,N[d],a);if(p)u||c&&(p.__html==c.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),Ke(t.type=="template"?e.content:e,re(v)?v:[v],t,n,s,_=="foreignObject"?"http://www.w3.org/1999/xhtml":a,l,o,l?l[0]:n.__k&&ee(n,0),u,r),l!=null)for(d=l.length;d--;)De(l[d]);u||(d="value",_=="progress"&&S==null?e.removeAttribute("value"):S!=null&&(S!==e[d]||_=="progress"&&!S||_=="option"&&S!=N[d])&&fe(e,d,S,N[d],a),d="checked",b!=null&&b!=e[d]&&fe(e,d,b,N[d],a))}return e}function we(e,t,n){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&t==null||(e.__u=e(t))}else e.current=t}catch(a){T.__e(a,n)}}function tt(e,t,n){var s,a;if(T.unmount&&T.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||we(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){T.__e(l,t)}s.base=s.__P=null}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&tt(s[a],t,n||typeof e.type!="function");n||De(e.__e),e.__c=e.__=e.__e=void 0}function Kt(e,t,n){return this.constructor(e,n)}function te(e,t,n){var s,a,l,o;t==document&&(t=document.documentElement),T.__&&T.__(e,t),a=(s=typeof n=="function")?null:n&&n.__k||t.__k,l=[],o=[],ke(t,e=(!s&&n||t).__k=V(z,null,[e]),a||oe,oe,t.namespaceURI,!s&&n?[n]:a?null:t.firstChild?le.call(t.childNodes):null,l,!s&&n?n:a?a.__e:t.firstChild,s,o),Qe(l,e,o)}function nt(e,t){te(e,t,nt)}function Xt(e,t,n){var s,a,l,o,u=W({},e.props);for(l in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)l=="key"?s=t[l]:l=="ref"?a=t[l]:u[l]=t[l]===void 0&&o!=null?o[l]:t[l];return arguments.length>2&&(u.children=arguments.length>3?le.call(arguments,2):n),ce(e.type,u,s||e.key,a||e.ref,null)}function de(e){function t(n){var s,a;return this.getChildContext||(s=new Set,(a={})[t.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(l){this.props.value!=l.value&&s.forEach(function(o){o.__e=!0,Te(o)})},this.sub=function(l){s.add(l);var o=l.componentWillUnmount;l.componentWillUnmount=function(){s&&s.delete(l),o&&o.call(l)}}),n.children}return t.__c="__cC"+qe++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,s){return n.children(s)}).contextType=t,t}le=Ge.slice,T={__e:function(e,t,n,s){for(var a,l,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((l=a.constructor)&&l.getDerivedStateFromError!=null&&(a.setState(l.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),o=a.__d),o)return a.__E=a}catch(u){e=u}throw e}},ze=0,H.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=W({},this.state),typeof e=="function"&&(e=e(W({},n),this.props)),e&&W(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Te(this))},H.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Te(this))},H.prototype.render=z,J=[],He=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ve=function(e,t){return e.__v.__b-t.__v.__b},he.__r=0,Be=/(PointerCapture)$|Capture$/i,Ne=0,Se=Je(!1),ye=Je(!0),qe=0;var Zt=0;function i(e,t,n,s,a,l){t||(t={});var o,u,r=t;if("ref"in r)for(u in r={},t)u=="ref"?o=t[u]:r[u]=t[u];var d={type:e,props:r,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Zt,__i:-1,__u:0,__source:a,__self:l};if(typeof e=="function"&&(o=e.defaultProps))for(u in o)r[u]===void 0&&(r[u]=o[u]);return T.vnode&&T.vnode(d),d}var Y,w,Le,it,ne=0,st=[],L=T,at=L.__b,lt=L.__r,ot=L.diffed,rt=L.__c,ct=L.unmount,dt=L.__;function ie(e,t){L.__h&&L.__h(w,e,ne||t),ne=0;var n=w.__H||(w.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function x(e){return ne=1,xe(_t,e)}function xe(e,t,n){var s=ie(Y++,2);if(s.t=e,!s.__c&&(s.__=[n?n(t):_t(void 0,t),function(u){var r=s.__N?s.__N[0]:s.__[0],d=s.t(r,u);r!==d&&(s.__N=[d,s.__[1]],s.__c.setState({}))}],s.__c=w,!w.__f)){var a=function(u,r,d){if(!s.__c.__H)return!0;var p=s.__c.__H.__.filter(function(v){return!!v.__c});if(p.every(function(v){return!v.__N}))return!l||l.call(this,u,r,d);var c=s.__c.props!==u;return p.forEach(function(v){if(v.__N){var g=v.__[0];v.__=v.__N,v.__N=void 0,g!==v.__[0]&&(c=!0)}}),l&&l.call(this,u,r,d)||c};w.__f=!0;var l=w.shouldComponentUpdate,o=w.componentWillUpdate;w.componentWillUpdate=function(u,r,d){if(this.__e){var p=l;l=void 0,a(u,r,d),l=p}o&&o.call(this,u,r,d)},w.shouldComponentUpdate=a}return s.__N||s.__}function I(e,t){var n=ie(Y++,3);!L.__s&&Oe(n.__H,t)&&(n.__=e,n.u=t,w.__H.__h.push(n))}function ue(e,t){var n=ie(Y++,4);!L.__s&&Oe(n.__H,t)&&(n.__=e,n.u=t,w.__h.push(n))}function ut(e){return ne=5,R(function(){return{current:e}},[])}function mt(e,t,n){ne=6,ue(function(){if(typeof e=="function"){var s=e(t());return function(){e(null),s&&typeof s=="function"&&s()}}if(e)return e.current=t(),function(){return e.current=null}},n==null?n:n.concat(e))}function R(e,t){var n=ie(Y++,7);return Oe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function O(e,t){return ne=8,R(function(){return e},t)}function Re(e){var t=w.context[e.__c],n=ie(Y++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(w)),t.props.value):e.__}function pt(e,t){L.useDebugValue&&L.useDebugValue(t?t(e):e)}function ht(){var e=ie(Y++,11);if(!e.__){for(var t=w.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Jt(){for(var e;e=st.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(_e),e.__H.__h.forEach(Ie),e.__H.__h=[]}catch(t){e.__H.__h=[],L.__e(t,e.__v)}}L.__b=function(e){w=null,at&&at(e)},L.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),dt&&dt(e,t)},L.__r=function(e){lt&&lt(e),Y=0;var t=(w=e.__c).__H;t&&(Le===w?(t.__h=[],w.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(_e),t.__h.forEach(Ie),t.__h=[],Y=0)),Le=w},L.diffed=function(e){ot&&ot(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(st.push(t)!==1&&it===L.requestAnimationFrame||((it=L.requestAnimationFrame)||Qt)(Jt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Le=w=null},L.__c=function(e,t){t.some(function(n){try{n.__h.forEach(_e),n.__h=n.__h.filter(function(s){return!s.__||Ie(s)})}catch(s){t.some(function(a){a.__h&&(a.__h=[])}),t=[],L.__e(s,n.__v)}}),rt&&rt(e,t)},L.unmount=function(e){ct&&ct(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{_e(s)}catch(a){t=a}}),n.__H=void 0,t&&L.__e(t,n.__v))};var ft=typeof requestAnimationFrame=="function";function Qt(e){var t,n=function(){clearTimeout(s),ft&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,35);ft&&(t=requestAnimationFrame(n))}function _e(e){var t=w,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),w=t}function Ie(e){var t=w;e.__c=e.__(),w=t}function Oe(e,t){return!e||e.length!==t.length||t.some(function(n,s){return n!==e[s]})}function _t(e,t){return typeof t=="function"?t(e):t}function gt(e,t){for(var n in t)e[n]=t[n];return e}function Pe(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var s in t)if(s!=="__source"&&e[s]!==t[s])return!0;return!1}function Ct(e,t){var n=t(),s=x({t:{__:n,u:t}}),a=s[0].t,l=s[1];return ue(function(){a.__=n,a.u=t,Me(a)&&l({t:a})},[e,n,t]),I(function(){return Me(a)&&l({t:a}),e(function(){Me(a)&&l({t:a})})},[e]),n}function Me(e){var t,n,s=e.u,a=e.__;try{var l=s();return!((t=a)===(n=l)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}function vt(e){e()}function bt(e){return e}function Nt(){return[!1,vt]}var St=ue;function $e(e,t){this.props=e,this.context=t}function $(e,t){function n(a){var l=this.props.ref,o=l==a.ref;return!o&&l&&(l.call?l(null):l.current=null),t?!t(this.props,a)||!o:Pe(this.props,a)}function s(a){return this.shouldComponentUpdate=n,V(e,a)}return s.displayName="Memo("+(e.displayName||e.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s.type=e,s}($e.prototype=new H).isPureReactComponent=!0,$e.prototype.shouldComponentUpdate=function(e,t){return Pe(this.props,e)||Pe(this.state,t)};var yt=T.__b;T.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),yt&&yt(e)};var en=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function tn(e){function t(n){var s=gt({},n);return delete s.ref,e(s,n.ref||null)}return t.$$typeof=en,t.render=e,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Dt=function(e,t){return e==null?null:B(B(e).map(t))},nn={map:Dt,forEach:Dt,count:function(e){return e?B(e).length:0},only:function(e){var t=B(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:B},sn=T.__e;T.__e=function(e,t,n,s){if(e.then){for(var a,l=t;l=l.__;)if((a=l.__c)&&a.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t)}sn(e,t,n,s)};var Tt=T.unmount;function kt(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),e.__c.__H=null),(e=gt({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(s){return kt(s,t,n)})),e}function Et(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(s){return Et(s,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function K(){this.__u=0,this.o=null,this.__b=null}function wt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function X(e){var t,n,s;function a(l){if(t||(t=e()).then(function(o){n=o.default||o},function(o){s=o}),s)throw s;if(!n)throw t;return V(n,l)}return a.displayName="Lazy",a.__f=!0,a}function me(){this.i=null,this.l=null}T.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Tt&&Tt(e)},(K.prototype=new H).__c=function(e,t){var n=t.__c,s=this;s.o==null&&(s.o=[]),s.o.push(n);var a=wt(s.__v),l=!1,o=function(){l||(l=!0,n.__R=null,a?a(u):u())};n.__R=o;var u=function(){if(!--s.__u){if(s.state.__a){var r=s.state.__a;s.__v.__k[0]=Et(r,r.__c.__P,r.__c.__O)}var d;for(s.setState({__a:s.__b=null});d=s.o.pop();)d.forceUpdate()}};s.__u++||32&t.__u||s.setState({__a:s.__b=s.__v.__k[0]}),e.then(o,o)},K.prototype.componentWillUnmount=function(){this.o=[]},K.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=kt(this.__b,n,s.__O=s.__P)}this.__b=null}var a=t.__a&&V(z,null,e.fallback);return a&&(a.__u&=-33),[V(z,null,t.__a?null:e.children),a]};var Lt=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function an(e){return this.getChildContext=function(){return e.context},e.children}function ln(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){te(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var s=t.__v;s!==null&&!s.__m&&s.__!==null;)s=s.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:s.__m},contains:function(){return!0},insertBefore:function(a,l){this.childNodes.push(a),t.h.insertBefore(a,l)},removeChild:function(a){this.childNodes.splice(this.childNodes.indexOf(a)>>>1,1),t.h.removeChild(a)}}}te(V(an,{context:t.context},e.__v),t.v)}function on(e,t){var n=V(ln,{__v:e,h:t});return n.containerInfo=t,n}(me.prototype=new H).__a=function(e){var t=this,n=wt(t.__v),s=t.l.get(e);return s[0]++,function(a){var l=function(){t.props.revealOrder?(s.push(a),Lt(t,e,s)):a()};n?n(l):l()}},me.prototype.render=function(e){this.i=null,this.l=new Map;var t=B(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},me.prototype.componentDidUpdate=me.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Lt(e,n,t)})};var xt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,cn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,dn=/[A-Z0-9]/g,un=typeof document<"u",mn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function pn(e,t,n){return t.__k==null&&(t.textContent=""),te(e,t),typeof n=="function"&&n(),e?e.__c:null}function hn(e,t,n){return nt(e,t),typeof n=="function"&&n(),e?e.__c:null}H.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(H.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Rt=T.event;function fn(){}function _n(){return this.cancelBubble}function gn(){return this.defaultPrevented}T.event=function(e){return Rt&&(e=Rt(e)),e.persist=fn,e.isPropagationStopped=_n,e.isDefaultPrevented=gn,e.nativeEvent=e};var Ae,Cn={enumerable:!1,configurable:!0,get:function(){return this.class}},It=T.vnode;T.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,s=t.type,a={},l=s.indexOf("-")===-1;for(var o in n){var u=n[o];if(!(o==="value"&&"defaultValue"in n&&u==null||un&&o==="children"&&s==="noscript"||o==="class"||o==="className")){var r=o.toLowerCase();o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&u===!0?u="":r==="translate"&&u==="no"?u=!1:r[0]==="o"&&r[1]==="n"?r==="ondoubleclick"?o="ondblclick":r!=="onchange"||s!=="input"&&s!=="textarea"||mn(n.type)?r==="onfocus"?o="onfocusin":r==="onblur"?o="onfocusout":cn.test(o)&&(o=r):r=o="oninput":l&&rn.test(o)?o=o.replace(dn,"-$&").toLowerCase():u===null&&(u=void 0),r==="oninput"&&a[o=r]&&(o="oninputCapture"),a[o]=u}}s=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=B(n.children).forEach(function(d){d.props.selected=a.value.indexOf(d.props.value)!=-1})),s=="select"&&a.defaultValue!=null&&(a.value=B(n.children).forEach(function(d){d.props.selected=a.multiple?a.defaultValue.indexOf(d.props.value)!=-1:a.defaultValue==d.props.value})),n.class&&!n.className?(a.class=n.class,Object.defineProperty(a,"className",Cn)):(n.className&&!n.class||n.class&&n.className)&&(a.class=a.className=n.className),t.props=a})(e),e.$$typeof=xt,It&&It(e)};var Ot=T.__r;T.__r=function(e){Ot&&Ot(e),Ae=e.__c};var Pt=T.diffed;T.diffed=function(e){Pt&&Pt(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),Ae=null};var vn={ReactCurrentDispatcher:{current:{readContext:function(e){return Ae.__n[e.__c].props.value},useCallback:O,useContext:Re,useDebugValue:pt,useDeferredValue:bt,useEffect:I,useId:ht,useImperativeHandle:mt,useInsertionEffect:St,useLayoutEffect:ue,useMemo:R,useReducer:xe,useRef:ut,useState:x,useSyncExternalStore:Ct,useTransition:Nt}}};function bn(e){return V.bind(null,e)}function ge(e){return!!e&&e.$$typeof===xt}function Nn(e){return ge(e)&&e.type===z}function Sn(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function yn(e){return ge(e)?Xt.apply(null,arguments):e}function Dn(e){return!!e.__k&&(te(null,e),!0)}function Tn(e){return e&&(e.base||e.nodeType===1&&e)||null}var kn=function(e,t){return e(t)},En=function(e,t){return e(t)},wn=z,Ln=ge,Ce={useState:x,useId:ht,useReducer:xe,useEffect:I,useLayoutEffect:ue,useInsertionEffect:St,useTransition:Nt,useDeferredValue:bt,useSyncExternalStore:Ct,startTransition:vt,useRef:ut,useImperativeHandle:mt,useMemo:R,useCallback:O,useContext:Re,useDebugValue:pt,version:"18.3.1",Children:nn,render:pn,hydrate:hn,unmountComponentAtNode:Dn,createPortal:on,createElement:V,createContext:de,createFactory:bn,cloneElement:yn,createRef:Bt,Fragment:z,isValidElement:ge,isElement:Ln,isFragment:Nn,isMemo:Sn,findDOMNode:Tn,Component:H,PureComponent:$e,memo:$,forwardRef:tn,flushSync:En,unstable_batchedUpdates:kn,StrictMode:wn,Suspense:K,SuspenseList:me,lazy:X,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:vn};const xn=$(function({onConfigClick:t}){return i("header",{className:"app-header",children:i("div",{className:"header-content",children:[i("div",{className:"header-title",children:i("h1",{children:"CodeState"})}),i("div",{className:"header-actions",children:i("button",{className:"btn-secondary btn-sm header-config-button",onClick:t,title:"Configuration Settings",children:[i("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i("path",{d:"M8 9.5C8.82843 9.5 9.5 8.82843 9.5 8C9.5 7.17157 8.82843 6.5 8 6.5C7.17157 6.5 6.5 7.17157 6.5 8C6.5 8.82843 7.17157 9.5 8 9.5Z",stroke:"currentColor",strokeWidth:"1.5"}),i("path",{d:"M8 1V2M8 14V15M15 8H14M2 8H1M12.364 3.636L11.657 4.343M4.343 11.657L3.636 12.364M12.364 12.364L11.657 11.657M4.343 4.343L3.636 3.636",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),"Config"]})})]})})});function Rn({items:e,defaultActiveId:t,activeTab:n,variant:s="underline",className:a="",onTabChange:l}){const[o,u]=x(t||e.find(p=>!p.disabled)?.id||e[0]?.id),r=n??o,d=p=>{const c=e.find(v=>v.id===p);c&&!c.disabled&&(n===void 0&&u(p),l?.(p))};return e.find(p=>p.id===r)?.content,i("div",{className:`tabs tabs-${s} ${a}`,children:[i("div",{className:"tabs-list",role:"tablist",children:e.map(p=>{const c=r===p.id;return i("button",{className:`tab-trigger ${c?"active":""} ${p.disabled?"disabled":""}`,onClick:()=>d(p.id),role:"tab","aria-selected":c,"aria-controls":`tab-content-${p.id}`,disabled:p.disabled,children:p.label},p.id)})}),i("div",{className:"tabs-content",children:e.map(p=>{const c=r===p.id;return i("div",{id:`tab-content-${p.id}`,className:`tab-content ${c?"active":""}`,role:"tabpanel","aria-labelledby":`tab-${p.id}`,"aria-hidden":!c,children:typeof p.content=="string"?i("p",{children:p.content}):p.content},p.id)})})]})}const In=X(()=>Promise.resolve().then(()=>ci).then(e=>({default:e.SessionList}))),On=X(()=>Promise.resolve().then(()=>mi).then(e=>({default:e.ScriptList}))),Pn=X(()=>Promise.resolve().then(()=>hi).then(e=>({default:e.TerminalCollectionList}))),Mn=$(function({sessions:t,scripts:n,terminalCollections:s,sessionsLoading:a,scriptsLoading:l,terminalCollectionsLoading:o,initializeSessions:u,initializeScripts:r,initializeTerminalCollections:d,onEvent:p}){const[c,v]=x("sessions"),g=O(N=>{v(N)},[]);I(()=>{switch(c){case"sessions":u();break;case"scripts":r();break;case"terminal-collections":d();break}},[c,u,r,d]);const S=R(()=>({sessions:i(K,{fallback:i("div",{className:"tab-loading",children:"Loading sessions..."}),children:i(In,{sessions:t,isLoading:a,onEvent:p})}),scripts:i(K,{fallback:i("div",{className:"tab-loading",children:"Loading scripts..."}),children:i(On,{scripts:n,isLoading:l,onEvent:p})}),"terminal-collections":i(K,{fallback:i("div",{className:"tab-loading",children:"Loading terminal collections..."}),children:i(Pn,{terminalCollections:s,isLoading:o,onEvent:p})})}),[t,n,s,a,l,o,p]),b=R(()=>[{id:"sessions",label:`Sessions (${t.length})`,content:S.sessions},{id:"scripts",label:`Scripts (${n.length})`,content:S.scripts},{id:"terminal-collections",label:`Terminal Collections (${s.length})`,content:S["terminal-collections"]}],[t.length,n.length,s.length,S]);return i("div",{className:"main-tabs",children:i(Rn,{items:b,variant:"pills",className:"main-tabs-container",activeTab:c,onTabChange:g})})});function Fe({isOpen:e,title:t,message:n,confirmText:s="Confirm",cancelText:a="Cancel",variant:l="default",onConfirm:o,onCancel:u,onClose:r}){return I(()=>{if(!e)return;const v=g=>{g.key==="Escape"&&r()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[e,r]),I(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e?i("div",{className:"alert-dialog-backdrop",onClick:v=>{v.target===v.currentTarget&&r()},children:i("div",{className:"alert-dialog",children:[i("div",{className:"alert-dialog-header",children:i("h3",{className:"alert-dialog-title",children:t})}),i("div",{className:"alert-dialog-content",children:i("p",{className:"alert-dialog-message",children:n})}),i("div",{className:"alert-dialog-footer",children:[i("button",{className:"btn-secondary",onClick:()=>{u(),r()},children:a}),i("button",{className:`btn-primary ${l==="destructive"?"btn-destructive":""}`,onClick:()=>{o(),r()},children:s})]})]})}):null}const Mt=e=>{let t;const n=new Set,s=(d,p)=>{const c=typeof d=="function"?d(t):d;if(!Object.is(c,t)){const v=t;t=p??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(g=>g(t,v))}},a=()=>t,u={setState:s,getState:a,getInitialState:()=>r,subscribe:d=>(n.add(d),()=>n.delete(d))},r=t=e(s,a,u);return u},$n=(e=>e?Mt(e):Mt),An=e=>e;function Fn(e,t=An){const n=Ce.useSyncExternalStore(e.subscribe,Ce.useCallback(()=>t(e.getState()),[e,t]),Ce.useCallback(()=>t(e.getInitialState()),[e,t]));return Ce.useDebugValue(n),n}const $t=e=>{const t=$n(e),n=s=>Fn(t,s);return Object.assign(n,t),n},pe=(e=>e?$t(e):$t),j=pe((e,t)=>({sessions:[],sessionsLoading:!1,sessionsError:null,sessionsLoaded:!1,createSessionDialog:{isOpen:!1,sessionData:null,sessionDataError:null},tempSessionData:null,currentSession:null,isEditDialogOpen:!1,isDeleteDialogOpen:!1,newlyCreatedSessionId:null,showSessionCreatedFeedback:!1,setSessions:n=>{e({sessions:n})},addSession:n=>e(s=>({sessions:[...s.sessions,n]})),removeSession:n=>e(s=>({sessions:s.sessions.filter(a=>a.id!==n)})),updateSession:n=>e(s=>({sessions:s.sessions.map(a=>a.id===n.id?n:a)})),setSessionsLoading:n=>e({sessionsLoading:n}),setSessionsError:n=>e({sessionsError:n}),setSessionsLoaded:n=>e({sessionsLoaded:n}),setCreateSessionDialog:n=>e(s=>({createSessionDialog:{...s.createSessionDialog,...n}})),openCreateSessionDialog:()=>e(n=>({createSessionDialog:{...n.createSessionDialog,isOpen:!0}})),closeCreateSessionDialog:()=>e(n=>({createSessionDialog:{...n.createSessionDialog,isOpen:!1,sessionData:null,sessionDataError:null}})),setSessionData:n=>e(s=>({createSessionDialog:{...s.createSessionDialog,sessionData:n,sessionDataError:null}})),setSessionDataError:n=>e(s=>({createSessionDialog:{...s.createSessionDialog,sessionDataError:n,sessionData:null}})),setTempSessionData:n=>e({tempSessionData:n}),addTempSessionWithId:n=>e(s=>{if(s.tempSessionData){const a={...s.tempSessionData,id:n};return{sessions:[...s.sessions,a],tempSessionData:null}}return s}),setCurrentSession:n=>e({currentSession:n}),openEditDialog:n=>e({currentSession:n,isEditDialogOpen:!0,isDeleteDialogOpen:!1}),closeEditDialog:()=>e({isEditDialogOpen:!1,currentSession:null}),openDeleteDialog:n=>e({currentSession:n,isDeleteDialogOpen:!0,isEditDialogOpen:!1}),setNewlyCreatedSessionId:n=>e({newlyCreatedSessionId:n}),displaySessionCreatedFeedback:n=>e({newlyCreatedSessionId:n,showSessionCreatedFeedback:!0}),hideSessionCreatedFeedback:()=>e({newlyCreatedSessionId:null,showSessionCreatedFeedback:!1}),isLoading:()=>t().sessionsLoading,hasError:()=>!!t().sessionsError,isLoaded:()=>t().sessionsLoaded,needsData:()=>!t().sessionsLoaded&&!t().sessionsLoading})),A=pe((e,t)=>({scripts:[],scriptsLoading:!1,scriptsError:null,scriptsLoaded:!1,createScriptDialog:{isOpen:!1,rootPath:null},tempScriptData:null,currentScript:null,isScriptDeleteDialogOpen:!1,isScriptEditDialogOpen:!1,newlyCreatedScriptId:null,showScriptCreatedFeedback:!1,setScripts:n=>e({scripts:n}),addScript:n=>e(s=>({scripts:[...s.scripts,n]})),removeScript:n=>e(s=>({scripts:s.scripts.filter(a=>a.id!==n)})),updateScript:n=>e(s=>({scripts:s.scripts.map(l=>l.id===n.id?n:l)})),setScriptsLoading:n=>e({scriptsLoading:n}),setScriptsError:n=>e({scriptsError:n}),setScriptsLoaded:n=>e({scriptsLoaded:n}),setCreateScriptDialog:n=>e(s=>({createScriptDialog:{...s.createScriptDialog,...n}})),openCreateScriptDialog:n=>e(s=>({createScriptDialog:{...s.createScriptDialog,isOpen:!0,rootPath:n||null}})),closeCreateScriptDialog:()=>e(n=>({createScriptDialog:{...n.createScriptDialog,isOpen:!1,rootPath:null}})),setTempScriptData:n=>e({tempScriptData:n}),addTempScriptWithId:n=>e(s=>{if(s.tempScriptData){const a={...s.tempScriptData,id:n};return{scripts:[...s.scripts,a],tempScriptData:null}}return s}),setCurrentScript:n=>e({currentScript:n}),openScriptDeleteDialog:n=>e({currentScript:n,isScriptDeleteDialogOpen:!0,isScriptEditDialogOpen:!1}),closeScriptDeleteDialog:()=>e({isScriptDeleteDialogOpen:!1,currentScript:null}),openScriptEditDialog:n=>e({currentScript:n,isScriptEditDialogOpen:!0,isScriptDeleteDialogOpen:!1}),closeScriptEditDialog:()=>e({isScriptEditDialogOpen:!1,currentScript:null}),setNewlyCreatedScriptId:n=>e({newlyCreatedScriptId:n}),displayScriptCreatedFeedback:n=>e({newlyCreatedScriptId:n,showScriptCreatedFeedback:!0}),hideScriptCreatedFeedback:()=>e({newlyCreatedScriptId:null,showScriptCreatedFeedback:!1}),isLoading:()=>t().scriptsLoading,hasError:()=>!!t().scriptsError,isLoaded:()=>t().scriptsLoaded,needsData:()=>!t().scriptsLoaded&&!t().scriptsLoading})),U=pe((e,t)=>({terminalCollections:[],terminalCollectionsLoading:!1,terminalCollectionsError:null,terminalCollectionsLoaded:!1,createTerminalCollectionDialog:{isOpen:!1,rootPath:null},tempTerminalCollectionData:null,currentTerminalCollection:null,isTerminalCollectionDeleteDialogOpen:!1,isTerminalCollectionEditDialogOpen:!1,newlyCreatedTerminalCollectionId:null,showTerminalCollectionCreatedFeedback:!1,setTerminalCollections:n=>e({terminalCollections:n}),addTerminalCollection:n=>e(s=>({terminalCollections:[...s.terminalCollections,n]})),removeTerminalCollection:n=>e(s=>({terminalCollections:s.terminalCollections.filter(a=>a.id!==n)})),updateTerminalCollection:n=>e(s=>({terminalCollections:s.terminalCollections.map(l=>l.id===n.id?n:l)})),setTerminalCollectionsLoading:n=>e({terminalCollectionsLoading:n}),setTerminalCollectionsError:n=>e({terminalCollectionsError:n}),setTerminalCollectionsLoaded:n=>e({terminalCollectionsLoaded:n}),setCreateTerminalCollectionDialog:n=>e(s=>({createTerminalCollectionDialog:{...s.createTerminalCollectionDialog,...n}})),openCreateTerminalCollectionDialog:n=>e(s=>({createTerminalCollectionDialog:{...s.createTerminalCollectionDialog,isOpen:!0,rootPath:n||null}})),closeCreateTerminalCollectionDialog:()=>e(n=>({createTerminalCollectionDialog:{...n.createTerminalCollectionDialog,isOpen:!1,rootPath:null}})),setTempTerminalCollectionData:n=>e({tempTerminalCollectionData:n}),addTempTerminalCollectionWithId:n=>e(s=>{if(s.tempTerminalCollectionData){const a={...s.tempTerminalCollectionData,id:n};return{terminalCollections:[...s.terminalCollections,a],tempTerminalCollectionData:null}}return s}),setCurrentTerminalCollection:n=>e({currentTerminalCollection:n}),openTerminalCollectionDeleteDialog:n=>e({currentTerminalCollection:n,isTerminalCollectionDeleteDialogOpen:!0}),openTerminalCollectionEditDialog:n=>e({currentTerminalCollection:n,isTerminalCollectionEditDialogOpen:!0}),closeTerminalCollectionEditDialog:()=>e({isTerminalCollectionEditDialogOpen:!1,currentTerminalCollection:null}),setNewlyCreatedTerminalCollectionId:n=>e({newlyCreatedTerminalCollectionId:n}),displayTerminalCollectionCreatedFeedback:n=>e({newlyCreatedTerminalCollectionId:n,showTerminalCollectionCreatedFeedback:!0}),hideTerminalCollectionCreatedFeedback:()=>e({newlyCreatedTerminalCollectionId:null,showTerminalCollectionCreatedFeedback:!1}),isLoading:()=>t().terminalCollectionsLoading,hasError:()=>!!t().terminalCollectionsError,isLoaded:()=>t().terminalCollectionsLoaded,needsData:()=>!t().terminalCollectionsLoaded&&!t().terminalCollectionsLoading})),q=pe((e,t)=>({currentProjectRoot:null,configDialog:{isOpen:!1,configData:null,configDataError:null},setCurrentProjectRoot:n=>{e({currentProjectRoot:n})},setConfigDialog:n=>e(s=>({configDialog:{...s.configDialog,...n}})),openConfigDialog:()=>e(n=>({configDialog:{...n.configDialog,isOpen:!0}})),closeConfigDialog:()=>e(n=>({configDialog:{...n.configDialog,isOpen:!1,configData:null,configDataError:null}})),setConfigData:n=>{e(s=>({configDialog:{...s.configDialog,configData:n,configDataError:null}}))},setConfigDataError:n=>{e(s=>({configDialog:{...s.configDialog,configDataError:n,configData:null}}))}})),At=X(()=>Promise.resolve().then(()=>_i).then(e=>({default:e.CreateSessionDialog}))),Ft=X(()=>Promise.resolve().then(()=>Ci).then(e=>({default:e.CreateScriptDialog}))),jt=X(()=>Promise.resolve().then(()=>bi).then(e=>({default:e.CreateTerminalCollectionDialog}))),jn=X(()=>Promise.resolve().then(()=>Si).then(e=>({default:e.ConfigDialog}))),Un=$(function({provider:t}){const{createSessionDialog:n,currentSession:s,isEditDialogOpen:a,isDeleteDialogOpen:l,closeCreateSessionDialog:o,closeEditDialog:u}=j(),{createScriptDialog:r,currentScript:d,isScriptDeleteDialogOpen:p,isScriptEditDialogOpen:c,closeCreateScriptDialog:v,closeScriptDeleteDialog:g,closeScriptEditDialog:S}=A(),{createTerminalCollectionDialog:b,currentTerminalCollection:N,isTerminalCollectionDeleteDialogOpen:f,isTerminalCollectionEditDialogOpen:_,closeCreateTerminalCollectionDialog:m,closeTerminalCollectionEditDialog:h}=U(),{configDialog:y,closeConfigDialog:k}=q(),E=()=>{o(),v(),m(),k(),u(),S(),h(),g()},F=O(()=>{s&&(t.sendMessage("codestate.session.delete",{id:s.id}),E())},[s,t,E]),G=O(()=>{d&&(t.sendMessage("codestate.script.delete",{id:d.id}),E())},[d,t,E]),Q=O(()=>{N&&(t.sendMessage("codestate.terminal-collection.delete",{id:N.id}),E())},[N,t,E]),M=O(()=>{E()},[E]);return i(K,{fallback:i("div",{className:"dialog-loading",children:"Loading..."}),children:[n.isOpen&&i(At,{isOpen:n.isOpen,onClose:o,provider:t,sessionData:n.sessionData,sessionDataError:n.sessionDataError}),r.isOpen&&i(Ft,{isOpen:r.isOpen,onClose:v,provider:t,rootPath:r.rootPath||void 0}),b.isOpen&&i(jt,{isOpen:b.isOpen,onClose:m,provider:t,rootPath:b.rootPath||void 0}),y.isOpen&&i(jn,{isOpen:y.isOpen,onClose:k,provider:t}),c&&d&&i(Ft,{isOpen:c,onClose:E,provider:t,editScript:d}),_&&N&&i(jt,{isOpen:_,onClose:E,provider:t,editTerminalCollection:N}),a&&s&&i(At,{isOpen:a,onClose:E,provider:t,sessionData:null,sessionDataError:null,editSession:s}),l&&s&&i(Fe,{isOpen:l,title:"Delete Session",message:`Are you sure you want to delete the session "${s.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive",onConfirm:F,onCancel:M,onClose:E}),p&&d&&i(Fe,{isOpen:p,title:"Delete Script",message:`Are you sure you want to delete the script "${d.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive",onConfirm:G,onCancel:M,onClose:E}),f&&N&&i(Fe,{isOpen:f,title:"Delete Terminal Collection",message:`Are you sure you want to delete the terminal collection "${N.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive",onConfirm:Q,onCancel:M,onClose:E})]})});function zn(e){const{sessions:t,sessionsLoading:n,sessionsError:s,sessionsLoaded:a,setSessionsLoading:l,setSessionsError:o,needsData:u}=j(),{scripts:r,scriptsLoading:d,scriptsError:p,scriptsLoaded:c,setScriptsLoading:v,setScriptsError:g,needsData:S}=A(),{terminalCollections:b,terminalCollectionsLoading:N,terminalCollectionsError:f,terminalCollectionsLoaded:_,setTerminalCollectionsLoading:m,setTerminalCollectionsError:h,needsData:y}=U(),k=()=>{a||n||(l(!0),o(null),e.initializeSessions())},E=()=>{c||d||(v(!0),g(null),e.initializeScripts())},F=()=>{_||N||(m(!0),h(null),e.initializeTerminalCollections())};return I(()=>{u()&&k()},[a,n]),I(()=>{S()&&E()},[c,d]),I(()=>{y()&&F()},[_,N]),{sessions:t,scripts:r,terminalCollections:b,sessionsLoading:n,scriptsLoading:d,terminalCollectionsLoading:N,sessionsError:s,scriptsError:p,terminalCollectionsError:f,sessionsLoaded:a,scriptsLoaded:c,terminalCollectionsLoaded:_,initializeSessions:k,initializeScripts:E,initializeTerminalCollections:F}}function Wn(e){const{openEditDialog:t,openDeleteDialog:n,sessions:s}=j(),{openScriptDeleteDialog:a,openScriptEditDialog:l,openCreateScriptDialog:o,scripts:u}=A(),{currentProjectRoot:r}=q(),{openTerminalCollectionDeleteDialog:d,openTerminalCollectionEditDialog:p,terminalCollections:c}=U();return{handleEvent:O(g=>{switch(g.type){case"CREATE_SESSION":e.initializeSessionCreation();break;case"RESUME_SESSION":e.sendMessage("codestate.session.resume",{id:g.payload.id});break;case"DELETE_SESSION":const S=s.find(h=>h.id===g.payload.id);S&&n(S);break;case"EXPORT_SESSION":e.sendMessage("codestate.session.export",{id:g.payload.id});break;case"EDIT_SESSION":const b=s.find(h=>h.id===g.payload.id);b&&t(b);break;case"CREATE_SCRIPT":o(r||void 0);break;case"RUN_SCRIPT":e.sendMessage("codestate.script.resume",{id:g.payload.id});break;case"DELETE_SCRIPT":const N=u.find(h=>h.id===g.payload.id);N&&a(N);break;case"EDIT_SCRIPT":const f=u.find(h=>h.id===g.payload.id);f&&l(f);break;case"CREATE_TERMINAL_COLLECTION":break;case"EXECUTE_TERMINAL_COLLECTION":e.sendMessage("codestate.terminal-collection.resume",{id:g.payload.id});break;case"DELETE_TERMINAL_COLLECTION":const _=c.find(h=>h.id===g.payload.id);_&&d(_);break;case"EDIT_TERMINAL_COLLECTION":const m=c.find(h=>h.id===g.payload.id);m&&p(m);break}},[e,n,t,a,l,o,d,p,s,u,c,r])}}const Hn=de(null),Vn=$(function({children:t}){const{sessions:n,sessionsLoading:s,sessionsError:a,sessionsLoaded:l,addSession:o,removeSession:u,updateSession:r,setSessionsLoading:d,setSessionsError:p}=j(),v={sessions:n,sessionsLoading:s,sessionsError:a,sessionsLoaded:l,initializeSessions:()=>{l||s||(d(!0),p(null))},addSession:o,removeSession:u,updateSession:r};return i(Hn.Provider,{value:v,children:t})}),Bn=de(null),qn=$(function({children:t}){const{scripts:n,scriptsLoading:s,scriptsError:a,scriptsLoaded:l,setScripts:o,addScript:u,removeScript:r,updateScript:d,setScriptsLoading:p,setScriptsError:c,setScriptsLoaded:v,needsData:g}=A(),b={scripts:n,scriptsLoading:s,scriptsError:a,scriptsLoaded:l,initializeScripts:()=>{l||s||(p(!0),c(null))},addScript:u,removeScript:r,updateScript:d};return i(Bn.Provider,{value:b,children:t})}),Gn=de(null),Yn=$(function({children:t}){const{terminalCollections:n,terminalCollectionsLoading:s,terminalCollectionsError:a,terminalCollectionsLoaded:l,addTerminalCollection:o,removeTerminalCollection:u,updateTerminalCollection:r,setTerminalCollectionsLoading:d,setTerminalCollectionsError:p}=U(),v={terminalCollections:n,terminalCollectionsLoading:s,terminalCollectionsError:a,terminalCollectionsLoaded:l,initializeTerminalCollections:()=>{l||s||(d(!0),p(null))},addTerminalCollection:o,removeTerminalCollection:u,updateTerminalCollection:r};return i(Gn.Provider,{value:v,children:t})}),Ut=de(null),Kn=$(function({children:t}){const{currentProjectRoot:n,configDialog:s,setCurrentProjectRoot:a,openConfigDialog:l,closeConfigDialog:o,setConfigData:u,setConfigDataError:r}=q(),d={currentProjectRoot:n,configDialog:s,setCurrentProjectRoot:a,openConfigDialog:l,closeConfigDialog:o,setConfigData:u,setConfigDataError:r};return i(Ut.Provider,{value:d,children:t})});function Xn(){const e=Re(Ut);if(!e)throw new Error("useConfigContext must be used within a ConfigProvider");return e}const Zn=$(function({children:t}){return i(Kn,{children:i(Vn,{children:i(qn,{children:i(Yn,{children:t})})})})}),Jn=$(function({provider:t}){const{sessions:n,scripts:s,terminalCollections:a,sessionsLoading:l,scriptsLoading:o,terminalCollectionsLoading:u,initializeSessions:r,initializeScripts:d,initializeTerminalCollections:p}=zn(t),{configDialog:c,openConfigDialog:v}=Xn(),{handleEvent:g}=Wn(t);I(()=>((async()=>{try{await t.initialize(),t.initializeConfig()}catch{}})(),()=>{t.destroy()}),[t]),I(()=>{if(c.configData){const b=c.configData.extensions?.theme||"dark";document.documentElement.setAttribute("data-theme",b)}},[c.configData]);const S=O(()=>{v()},[v]);return i("div",{className:"app",children:[i(xn,{onConfigClick:S}),i("div",{className:"app-content",children:[i(Mn,{sessions:n,scripts:s,terminalCollections:a,sessionsLoading:l,scriptsLoading:o,terminalCollectionsLoading:u,initializeSessions:r,initializeScripts:d,initializeTerminalCollections:p,onEvent:g}),i(Un,{provider:t})]})]})}),Qn=$(function({provider:t}){return i(Zn,{children:i(Jn,{provider:t})})});class ei{initializeSessions(){}handleSessionsInitResponse(t){const n=j.getState();n.setSessions(t.sessions||[]),n.setSessionsLoaded(!0),n.setSessionsLoading(!1)}handleSessionCreateResponse(t){const n=j.getState();t.payload&&t.payload.success?(t.payload.id&&(n.addTempSessionWithId(t.payload.id),n.displaySessionCreatedFeedback(t.payload.id)),n.closeCreateSessionDialog()):t.payload&&t.payload.error&&n.setSessionDataError(t.payload.error)}handleSessionDeleteResponse(t){const n=j.getState();t.status==="success"&&n.removeSession(t.payload.id)}handleSessionUpdateResponse(t){const n=j.getState();t.status==="success"&&(n.closeEditDialog(),n.updateSession(t.payload.session))}handleSessionResumeResponse(t){}handleSessionExportResponse(t){}handleSessionCreateInitResponse(t){const n=j.getState();t.status==="error"?n.setSessionDataError(t.error):(n.setSessionData(t.sessionData),n.openCreateSessionDialog())}}class ti{initializeScripts(){}handleScriptsInitResponse(t){const n=A.getState();n.setScripts(t.scripts||[]),n.setScriptsLoaded(!0),n.setScriptsLoading(!1)}handleScriptCreateResponse(t){const n=A.getState();t.payload&&t.payload.success?t.payload.id&&(n.addTempScriptWithId(t.payload.id),n.displayScriptCreatedFeedback(t.payload.id),n.closeCreateScriptDialog()):t.payload&&t.payload.error}handleScriptDeleteResponse(t){const n=A.getState();t.status==="success"&&n.removeScript(t.payload.id)}handleScriptUpdateResponse(t){const n=A.getState();if(t.status==="success"){const s=n.currentScript;if(n.closeScriptEditDialog(),s&&t.payload&&t.payload.id){const a={...s,id:t.payload.id};n.updateScript(a)}}else t.payload&&t.payload.error}}class ni{handleTerminalCollectionsInitResponse(t){const n=U.getState();t.status==="success"&&t.payload&&t.payload.terminalCollections?(n.setTerminalCollections(t.payload.terminalCollections),n.setTerminalCollectionsLoaded(!0),n.setTerminalCollectionsLoading(!1)):(n.setTerminalCollectionsError(t.payload?.error||"Failed to load terminal collections"),n.setTerminalCollectionsLoading(!1))}handleTerminalCollectionCreateResponse(t){const n=U.getState();t.status==="success"&&t.payload&&t.payload.id&&(n.addTempTerminalCollectionWithId(t.payload.id),n.displayTerminalCollectionCreatedFeedback(t.payload.id),n.closeCreateTerminalCollectionDialog())}handleTerminalCollectionDeleteResponse(t){const n=U.getState();t.status==="success"&&n.removeTerminalCollection(t.payload.id)}handleTerminalCollectionUpdateResponse(t){const n=U.getState();if(t.status==="success"){const s=n.currentTerminalCollection;if(n.closeTerminalCollectionEditDialog(),s&&t.payload&&t.payload.id){const a={...s,id:t.payload.id};n.updateTerminalCollection(a)}}else t.payload&&t.payload.error}handleTerminalCollectionResumeResponse(t){t.status}}class ii{initializeSessions(){}initializeScripts(){}initializeTerminalCollections(){}handleSessionsInitResponse(t){const n=j.getState(),s=q.getState(),a=t.sessions||[];n.setSessions(a),n.setSessionsLoaded(!0),n.setSessionsLoading(!1);const l=t.currentProjectRoot||(a.length>0?a[0].projectRoot:null);l&&s.setCurrentProjectRoot(l)}handleScriptsInitResponse(t){const n=A.getState();n.setScripts(t.scripts||[]),n.setScriptsLoaded(!0),n.setScriptsLoading(!1)}handleTerminalCollectionsInitResponse(t){const n=U.getState();n.setTerminalCollections(t.terminalCollections||[]),n.setTerminalCollectionsLoaded(!0),n.setTerminalCollectionsLoading(!1)}}const zt=pe((e,t)=>({sessions:[],scripts:[],terminalCollections:[],currentProjectRoot:null,sessionsLoading:!1,scriptsLoading:!1,terminalCollectionsLoading:!1,sessionsError:null,scriptsError:null,terminalCollectionsError:null,sessionsLoaded:!1,scriptsLoaded:!1,terminalCollectionsLoaded:!1,createSessionDialog:{isOpen:!1,sessionData:null,sessionDataError:null},createScriptDialog:{isOpen:!1,rootPath:null},createTerminalCollectionDialog:{isOpen:!1,rootPath:null},configDialog:{isOpen:!1,configData:null,configDataError:null},tempSessionData:null,tempScriptData:null,tempTerminalCollectionData:null,currentSession:null,isEditDialogOpen:!1,isDeleteDialogOpen:!1,currentScript:null,isScriptDeleteDialogOpen:!1,isScriptEditDialogOpen:!1,currentTerminalCollection:null,isTerminalCollectionDeleteDialogOpen:!1,isTerminalCollectionEditDialogOpen:!1,newlyCreatedSessionId:null,showSessionCreatedFeedback:!1,newlyCreatedScriptId:null,showScriptCreatedFeedback:!1,newlyCreatedTerminalCollectionId:null,showTerminalCollectionCreatedFeedback:!1,setSessions:n=>{e({sessions:n})},setScripts:n=>e({scripts:n}),setTerminalCollections:n=>e({terminalCollections:n}),addSession:n=>e(s=>({sessions:[...s.sessions,n]})),removeSession:n=>e(s=>({sessions:s.sessions.filter(a=>a.id!==n)})),updateSession:n=>e(s=>({sessions:s.sessions.map(a=>a.id===n.id?n:a)})),addScript:n=>e(s=>({scripts:[...s.scripts,n]})),removeScript:n=>e(s=>({scripts:s.scripts.filter(a=>a.id!==n)})),updateScript:n=>e(s=>({scripts:s.scripts.map(l=>l.id===n.id?n:l)})),addTerminalCollection:n=>e(s=>({terminalCollections:[...s.terminalCollections,n]})),removeTerminalCollection:n=>e(s=>({terminalCollections:s.terminalCollections.filter(a=>a.id!==n)})),updateTerminalCollection:n=>e(s=>({terminalCollections:s.terminalCollections.map(l=>l.id===n.id?n:l)})),setCurrentProjectRoot:n=>{e({currentProjectRoot:n})},setSessionsLoading:n=>e({sessionsLoading:n}),setScriptsLoading:n=>e({scriptsLoading:n}),setTerminalCollectionsLoading:n=>e({terminalCollectionsLoading:n}),setSessionsError:n=>e({sessionsError:n}),setScriptsError:n=>e({scriptsError:n}),setTerminalCollectionsError:n=>e({terminalCollectionsError:n}),setSessionsLoaded:n=>e({sessionsLoaded:n}),setScriptsLoaded:n=>e({scriptsLoaded:n}),setTerminalCollectionsLoaded:n=>e({terminalCollectionsLoaded:n}),setCreateSessionDialog:n=>e(s=>({createSessionDialog:{...s.createSessionDialog,...n}})),openCreateSessionDialog:()=>e(n=>({createSessionDialog:{...n.createSessionDialog,isOpen:!0}})),closeCreateSessionDialog:()=>e(n=>({createSessionDialog:{...n.createSessionDialog,isOpen:!1,sessionData:null,sessionDataError:null}})),setSessionData:n=>e(s=>({createSessionDialog:{...s.createSessionDialog,sessionData:n,sessionDataError:null}})),setSessionDataError:n=>e(s=>({createSessionDialog:{...s.createSessionDialog,sessionDataError:n,sessionData:null}})),setCreateScriptDialog:n=>e(s=>({createScriptDialog:{...s.createScriptDialog,...n}})),openCreateScriptDialog:n=>e(s=>({createScriptDialog:{...s.createScriptDialog,isOpen:!0,rootPath:n||null}})),closeCreateScriptDialog:()=>e(n=>({createScriptDialog:{...n.createScriptDialog,isOpen:!1,rootPath:null}})),setCreateTerminalCollectionDialog:n=>e(s=>({createTerminalCollectionDialog:{...s.createTerminalCollectionDialog,...n}})),openCreateTerminalCollectionDialog:n=>e(s=>({createTerminalCollectionDialog:{...s.createTerminalCollectionDialog,isOpen:!0,rootPath:n||null}})),closeCreateTerminalCollectionDialog:()=>e(n=>({createTerminalCollectionDialog:{...n.createTerminalCollectionDialog,isOpen:!1,rootPath:null}})),setConfigDialog:n=>e(s=>({configDialog:{...s.configDialog,...n}})),openConfigDialog:()=>e(n=>({configDialog:{...n.configDialog,isOpen:!0}})),closeConfigDialog:()=>e(n=>({configDialog:{...n.configDialog,isOpen:!1,configData:null,configDataError:null}})),setConfigData:n=>{e(s=>({configDialog:{...s.configDialog,configData:n,configDataError:null}}))},setConfigDataError:n=>{e(s=>({configDialog:{...s.configDialog,configDataError:n,configData:null}}))},setTempSessionData:n=>e({tempSessionData:n}),addTempSessionWithId:n=>e(s=>{if(s.tempSessionData){const a={...s.tempSessionData,id:n};return{sessions:[...s.sessions,a],tempSessionData:null}}return s}),setTempScriptData:n=>e({tempScriptData:n}),addTempScriptWithId:n=>e(s=>{if(s.tempScriptData){const a={...s.tempScriptData,id:n};return{scripts:[...s.scripts,a],tempScriptData:null}}return s}),setTempTerminalCollectionData:n=>e({tempTerminalCollectionData:n}),addTempTerminalCollectionWithId:n=>e(s=>{if(s.tempTerminalCollectionData){const a={...s.tempTerminalCollectionData,id:n};return{terminalCollections:[...s.terminalCollections,a],tempTerminalCollectionData:null}}return s}),setCurrentSession:n=>e({currentSession:n}),openEditDialog:n=>e({currentSession:n,isEditDialogOpen:!0,isDeleteDialogOpen:!1}),openDeleteDialog:n=>e({currentSession:n,isDeleteDialogOpen:!0,isEditDialogOpen:!1}),closeAllDialogs:()=>e({isEditDialogOpen:!1,isDeleteDialogOpen:!1,isScriptDeleteDialogOpen:!1,isScriptEditDialogOpen:!1,isTerminalCollectionDeleteDialogOpen:!1,isTerminalCollectionEditDialogOpen:!1,currentSession:null,currentScript:null,currentTerminalCollection:null}),setCurrentScript:n=>e({currentScript:n}),openScriptDeleteDialog:n=>e({currentScript:n,isScriptDeleteDialogOpen:!0}),openScriptEditDialog:n=>e({currentScript:n,isScriptEditDialogOpen:!0}),setCurrentTerminalCollection:n=>e({currentTerminalCollection:n}),openTerminalCollectionDeleteDialog:n=>e({currentTerminalCollection:n,isTerminalCollectionDeleteDialogOpen:!0}),openTerminalCollectionEditDialog:n=>e({currentTerminalCollection:n,isTerminalCollectionEditDialogOpen:!0}),setNewlyCreatedSessionId:n=>e({newlyCreatedSessionId:n}),displaySessionCreatedFeedback:n=>e({newlyCreatedSessionId:n,showSessionCreatedFeedback:!0}),hideSessionCreatedFeedback:()=>e({newlyCreatedSessionId:null,showSessionCreatedFeedback:!1}),setNewlyCreatedScriptId:n=>e({newlyCreatedScriptId:n}),displayScriptCreatedFeedback:n=>e({newlyCreatedScriptId:n,showScriptCreatedFeedback:!0}),hideScriptCreatedFeedback:()=>e({newlyCreatedScriptId:null,showScriptCreatedFeedback:!1}),setNewlyCreatedTerminalCollectionId:n=>e({newlyCreatedTerminalCollectionId:n}),displayTerminalCollectionCreatedFeedback:n=>e({newlyCreatedTerminalCollectionId:n,showTerminalCollectionCreatedFeedback:!0}),hideTerminalCollectionCreatedFeedback:()=>e({newlyCreatedTerminalCollectionId:null,showTerminalCollectionCreatedFeedback:!1}),dispatchEvent:n=>{},isLoading:n=>{const s=t();switch(n){case"sessions":return s.sessionsLoading;case"scripts":return s.scriptsLoading;case"terminalCollections":return s.terminalCollectionsLoading}},hasError:n=>{const s=t();switch(n){case"sessions":return!!s.sessionsError;case"scripts":return!!s.scriptsError;case"terminalCollections":return!!s.terminalCollectionsError}},isLoaded:n=>{const s=t();switch(n){case"sessions":return s.sessionsLoaded;case"scripts":return s.scriptsLoaded;case"terminalCollections":return s.terminalCollectionsLoaded}},needsData:n=>{const s=t();switch(n){case"sessions":return!s.sessionsLoaded&&!s.sessionsLoading;case"scripts":return!s.scriptsLoaded&&!s.scriptsLoading;case"terminalCollections":return!s.terminalCollectionsLoaded&&!s.terminalCollectionsLoading}}}));class si{store=zt.getState();currentTheme="dark";handleThemeChange(t){this.currentTheme=t,document.documentElement.setAttribute("data-theme",t),window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:t},bubbles:!0}))}getCurrentTheme(){return this.currentTheme}}class ai{handleConfigInitResponse(t){const n=q.getState();t.status==="success"?n.setConfigData(t.payload.config):t.payload&&t.payload.error&&n.setConfigDataError(t.payload.error)}handleConfigUpdateResponse(t){const n=q.getState();t.status==="success"?(n.closeConfigDialog(),n.setConfigData(t.payload.config)):t.payload&&t.payload.error}}class li{vscode;connected=!1;sessionManager;scriptManager;terminalCollectionManager;dataManager;themeManager;configManager;constructor(){this.vscode=this.acquireVSCodeApi(),this.sessionManager=new ei,this.scriptManager=new ti,this.terminalCollectionManager=new ni,this.dataManager=new ii,this.themeManager=new si,this.configManager=new ai,this.setupMessageListener()}acquireVSCodeApi(){if(typeof window<"u"&&window.acquireVsCodeApi)return window.acquireVsCodeApi();throw new Error("VSCodeProvider can only be used in VS Code webview context")}setupMessageListener(){window.addEventListener("message",t=>{const n=t.data;this.handleMessage(n)})}handleMessage(t){switch(t.type){case"theme-changed":this.themeManager.handleThemeChange(t.payload.theme);break;case"codestate.sessions.init.response":this.dataManager.handleSessionsInitResponse(t.payload);break;case"codestate.scripts.init.response":this.dataManager.handleScriptsInitResponse(t.payload);break;case"codestate.tc.init.response":this.dataManager.handleTerminalCollectionsInitResponse(t.payload);break;case"codestate.sessions.create.init.response":this.sessionManager.handleSessionCreateInitResponse(t.payload);break;case"codestate.session.create.response":this.sessionManager.handleSessionCreateResponse(t);break;case"codestate.script.create.response":this.scriptManager.handleScriptCreateResponse(t);break;case"codestate.script.delete.response":this.scriptManager.handleScriptDeleteResponse(t);break;case"codestate.script.update.response":this.scriptManager.handleScriptUpdateResponse(t);break;case"codestate.terminal-collection.create.response":this.terminalCollectionManager.handleTerminalCollectionCreateResponse(t);break;case"codestate.terminal-collection.delete.response":this.terminalCollectionManager.handleTerminalCollectionDeleteResponse(t);break;case"codestate.terminal-collection.update.response":this.terminalCollectionManager.handleTerminalCollectionUpdateResponse(t);break;case"codestate.terminal-collection.resume.response":this.terminalCollectionManager.handleTerminalCollectionResumeResponse(t);break;case"codestate.session.resume.response":this.sessionManager.handleSessionResumeResponse(t);break;case"codestate.session.delete.response":this.sessionManager.handleSessionDeleteResponse(t);break;case"codestate.session.update.response":this.sessionManager.handleSessionUpdateResponse(t);break;case"codestate.session.export.response":this.sessionManager.handleSessionExportResponse(t);break;case"codestate.config.init.response":this.configManager.handleConfigInitResponse(t);break;case"codestate.config.update.response":this.configManager.handleConfigUpdateResponse(t);break}}async initialize(){this.connected=!0,this.sendMessage("codestate.ui.ready",{})}destroy(){this.connected=!1}initializeSessions(){this.sendMessage("codestate.sessions.init",{})}initializeScripts(){this.sendMessage("codestate.scripts.init",{})}initializeTerminalCollections(){this.sendMessage("codestate.tc.init",{})}initializeConfig(){this.sendMessage("codestate.config.init",{})}sendMessage(t,n){if(this.vscode){const s=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);this.vscode.postMessage({type:t,payload:n,id:s})}}getTheme(){return this.themeManager.getCurrentTheme()}setTheme(t){this.themeManager.handleThemeChange(t),this.sendMessage("set-theme",{theme:t})}onThemeChange(t){window.addEventListener("theme-changed",n=>{t(n.detail.theme)})}isConnected(){return this.connected}initializeSessionCreation(){this.sendMessage("codestate.sessions.create.init",{})}}class Wt extends HTMLElement{appContainer=null;currentTheme="dark";constructor(){super(),this.initializeComponent()}initializeComponent(){this.appContainer=document.createElement("div"),this.appContainer.id="codesate-ui-root",this.appendChild(this.appContainer),this.setTheme(this.currentTheme)}connectedCallback(){if(this.appContainer){const t=new li;te(i(Qn,{provider:t}),this.appContainer)}}disconnectedCallback(){this.appContainer&&(this.appContainer.innerHTML="")}setTheme(t){this.currentTheme=t,document.documentElement.setAttribute("data-theme",t),this.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:t},bubbles:!0}))}getTheme(){return this.currentTheme}updateData(t){this.dispatchEvent(new CustomEvent("data-updated",{detail:{data:t},bubbles:!0}))}sendMessage(t,n){this.dispatchEvent(new CustomEvent("vscode-message",{detail:{type:t,payload:n},bubbles:!0}))}}customElements.define("codesate-ui",Wt);function se({children:e,className:t="",variant:n="default",padding:s="md",onClick:a}){const l=["card",`card-${n}`,`card-padding-${s}`,a?"card-clickable":"",t].filter(Boolean).join(" ");return i("div",{className:l,onClick:a,role:a?"button":void 0,tabIndex:a?0:void 0,children:e})}function je({children:e,className:t=""}){return i("div",{className:`card-header ${t}`,children:e})}function ae({children:e,className:t=""}){return i("div",{className:`card-content ${t}`,children:e})}const oi=$(function({session:t,isNewlyCreated:n=!1}){const s=R(()=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),[]),a=d=>{if(!d)return"";const p=typeof d=="string"?new Date(d):d;return isNaN(p.getTime())?"Invalid date":s.format(p)},l=R(()=>a(t.createdAt),[t.createdAt,s]),o=R(()=>a(t.updatedAt),[t.updatedAt,s]);R(()=>t.projectRoot.split("/").pop()||t.projectRoot,[t.projectRoot]);const u=R(()=>t.git.isDirty?{status:"dirty",text:"Uncommitted changes",color:"var(--destructive)"}:{status:"clean",text:"Clean",color:"var(--primary)"},[t.git.isDirty]),r=R(()=>t.files.find(d=>d.isActive)?.path.split("/").pop(),[t.files]);return i(se,{variant:"elevated",className:`session-card ${n?"newly-created":""}`,children:[i(je,{children:i("div",{className:"session-card-header",children:[i("div",{className:"session-title",children:i("h3",{children:t.name})}),i("div",{className:"session-actions",children:[i("button",{className:"btn-ghost btn-sm","data-action":"resume-session","data-session-id":t.id,title:"Resume session",children:" Resume"}),i("button",{className:"btn-ghost btn-sm","data-action":"edit-session","data-session-id":t.id,title:"Edit session",children:""}),i("button",{className:"btn-ghost btn-sm","data-action":"export-session","data-session-id":t.id,title:"Export session",children:""}),i("button",{className:"btn-ghost btn-sm","data-action":"delete-session","data-session-id":t.id,title:"Delete session",children:""})]})]})}),i(ae,{children:i("div",{className:"session-details",children:[i("div",{className:"session-detail",children:[i("span",{className:"detail-label",children:"Project:"}),i("span",{className:"detail-value",children:t.projectRoot})]}),i("div",{className:"session-detail",children:[i("span",{className:"detail-label",children:"Git:"}),i("span",{className:"detail-value git-status",style:{color:u.color},children:[t.git.branch,"  ",u.text]})]}),i("div",{className:"session-detail",children:[i("span",{className:"detail-label",children:"Files:"}),i("span",{className:"detail-value",children:[t.files.length," file",t.files.length!==1?"s":"",r&&i("span",{className:"active-file",children:["  Active: ",r]})]})]}),i("div",{className:"session-detail",children:[i("span",{className:"detail-label",children:"Resources:"}),i("span",{className:"detail-value",children:[t.scripts?.length||0," script",(t.scripts?.length||0)!==1?"s":""," ",t.terminalCollections?.length||0," terminal collection",(t.terminalCollections?.length||0)!==1?"s":""]})]}),i("div",{className:"session-detail",children:[i("span",{className:"detail-label",children:"Tags:"}),i("div",{className:"tags",children:t.tags.length>0?t.tags.map((d,p)=>i("span",{className:"tag",children:d},p)):i("span",{className:"detail-value",children:"-"})})]}),i("div",{className:"session-detail",children:[i("span",{className:"detail-label",children:"Notes:"}),i("span",{className:"detail-value notes",children:t.notes||"-"})]}),i("div",{className:"session-timestamps",children:[i("div",{className:"timestamp",children:[i("span",{className:"timestamp-label",children:"Created:"}),i("span",{className:"timestamp-value",children:l})]}),i("div",{className:"timestamp",children:[i("span",{className:"timestamp-label",children:"Updated:"}),i("span",{className:"timestamp-value",children:o})]})]})]})})]})});function Ue({items:e,className:t=""}){const[n,s]=x(new Set(e.filter(l=>l.defaultOpen).map(l=>l.id))),a=l=>{s(o=>{const u=new Set(o);return u.has(l)?u.delete(l):u.add(l),u})};return i("div",{className:`accordion ${t}`,children:e.map(l=>{const o=n.has(l.id);return i("div",{className:"accordion-item",children:[i("button",{type:"button",className:`accordion-header ${o?"open":""}`,onClick:()=>a(l.id),"aria-expanded":o,"aria-controls":`accordion-content-${l.id}`,children:[i("span",{className:"accordion-title",children:l.title}),i("svg",{className:`accordion-icon ${o?"rotated":""}`,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),i("div",{id:`accordion-content-${l.id}`,className:`accordion-content ${o?"open":""}`,"aria-hidden":!o,children:i("div",{className:"accordion-content-inner",children:typeof l.content=="string"?i("p",{children:l.content}):l.content})})]},l.id)})})}const ri=$(function({sessions:t,isLoading:n,onEvent:s}){const[a,l]=x(""),{newlyCreatedSessionId:o,showSessionCreatedFeedback:u,hideSessionCreatedFeedback:r}=j(),{currentProjectRoot:d}=q();I(()=>{if(u&&o){const f=setTimeout(()=>{r()},3e3);return()=>clearTimeout(f)}},[u,o,r]);const p=O(f=>{const _=f.target,m=_.dataset.action,h=_.dataset.sessionId;if(m)switch(m){case"create-session":s({type:"CREATE_SESSION"});break;case"resume-session":h&&s({type:"RESUME_SESSION",payload:{id:h}});break;case"edit-session":h&&s({type:"EDIT_SESSION",payload:{id:h}});break;case"delete-session":h&&s({type:"DELETE_SESSION",payload:{id:h}});break;case"export-session":h&&s({type:"EXPORT_SESSION",payload:{id:h}});break}},[s]),c=R(()=>t.filter(f=>f.name.toLowerCase().includes(a.toLowerCase())),[t,a]),v=O(f=>{const _={};return f.forEach(m=>{const h=m.projectRoot;_[h]||(_[h]=[]),_[h].push(m)}),_},[]),g=R(()=>v(c),[c,v]),S=R(()=>Object.entries(g),[g]),b=R(()=>S.sort(([f],[_])=>{const m=f===d,h=_===d;return m&&!h?-1:!m&&h?1:0}),[S,d]),N=R(()=>b.map(([f,_])=>{const m=f.split("/").pop()||f,h=d===f,y=o&&_.some(k=>k.id===o);return{id:`group-${f}`,defaultOpen:h||!!y,title:i("div",{className:"accordion-title-content",children:[i("span",{className:"project-name",children:m}),i("span",{className:"session-count",children:["(",_.length," session",_.length!==1?"s":"",")"]}),y&&u&&i("span",{className:"new-session-indicator",children:" New!"}),i("span",{className:"accordion-title-path",children:f})]}),content:i("div",{className:"session-group-content",children:i("div",{className:"session-group-grid",children:_.map(k=>i(oi,{session:k,isNewlyCreated:k.id===o&&u},k.id))})})}}),[b,d,o,u]);return n?i("div",{className:"session-list",children:[i("div",{className:"session-list-header",children:[i("h2",{children:"Sessions"}),i("div",{className:"session-list-actions",children:[i("div",{className:"search-container",children:i("input",{type:"text",placeholder:"Search sessions...",className:"search-input",disabled:!0})}),i("button",{className:"btn-primary",disabled:!0,children:"Create Session"})]})]}),i("div",{className:"session-list-content",children:i("div",{className:"session-group-grid",children:Array.from({length:3}).map((f,_)=>i("div",{className:"skeleton-session-card",children:[i("div",{className:"skeleton-header",children:[i("div",{className:"skeleton-title-section",children:i("div",{className:"skeleton-title"})}),i("div",{className:"skeleton-actions",children:[i("div",{className:"skeleton-resume-btn"}),i("div",{className:"skeleton-action-btn"}),i("div",{className:"skeleton-action-btn"}),i("div",{className:"skeleton-action-btn"})]})]}),i("div",{className:"skeleton-content",children:[i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-timestamps",children:[i("div",{className:"skeleton-timestamp",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-timestamp",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]})]})]})]},`session-card-loading-${_}`))})})]}):i("div",{className:"session-list",onClick:p,children:[i("div",{className:"session-list-header",children:[i("h2",{children:"Sessions"}),i("div",{className:"session-list-actions",children:[i("div",{className:"search-container",children:i("input",{type:"text",placeholder:"Search sessions...",className:"search-input",value:a,onInput:f=>l(f.target?.value||"")})}),i("button",{className:"btn-primary","data-action":"create-session",children:"Create Session"})]})]}),i("div",{className:"session-list-content",children:c.length===0?i(se,{variant:"outlined",className:"empty-state",children:i(ae,{children:i("div",{className:"empty-state-content",children:[i("h3",{children:a?"No sessions match your search":"No sessions found"}),i("p",{children:a?`No sessions found matching "${a}". Try a different search term.`:"Create your first session to get started with CodeState."}),!a&&i("button",{className:"btn-primary","data-action":"create-session",children:"Create Your First Session"})]})})}):i("div",{className:"session-accordion-container",children:i(Ue,{items:N})})})]})}),ci=Object.freeze(Object.defineProperty({__proto__:null,SessionList:ri},Symbol.toStringTag,{value:"Module"}));function di({script:e,isNewlyCreated:t=!1}){const n=()=>e.executionMode||"same-terminal";return i(se,{variant:"elevated",className:`script-card ${t?"newly-created":""}`,children:[i(je,{children:i("div",{className:"script-card-header",children:[i("div",{className:"script-title",children:i("h3",{children:e.name})}),i("div",{className:"script-actions",children:[i("button",{className:"btn-primary btn-sm","data-action":"run-script","data-script-id":e.id,title:"Run script",children:" Run"}),i("button",{className:"btn-ghost btn-sm","data-action":"edit-script","data-script-id":e.id,title:"Edit script",children:""}),i("button",{className:"btn-ghost btn-sm","data-action":"delete-script","data-script-id":e.id,title:"Delete script",children:""})]})]})}),i(ae,{children:i("div",{className:"script-details",children:[i("div",{className:"script-detail",children:[i("span",{className:"detail-label",children:"Mode:"}),i("span",{className:"detail-value",children:n()})]}),i("div",{className:"script-detail",children:[i("span",{className:"detail-label",children:"Script Commands:"}),i("span",{className:"detail-value",children:e.commands&&e.commands.length>0?e.commands.map((s,a)=>i("span",{children:[i("b",{children:s.name}),": ",s.command,a<(e.commands?.length||0)-1?", ":"",a<(e.commands?.length||0)-1?i("br",{}):""]},a)):"-"})]}),i("div",{className:"script-detail",children:[i("span",{className:"detail-label",children:"Lifecycle:"}),i("span",{className:"detail-value",children:e.lifecycle&&e.lifecycle.length>0?e.lifecycle.join(", "):"-"})]}),i("div",{className:"script-detail",children:[i("span",{className:"detail-label",children:"Close Terminal:"}),i("span",{className:"detail-value",children:e.closeTerminalAfterExecution?"Yes":"No"})]})]})})]})}const ui=$(function({scripts:t,isLoading:n,onEvent:s}){const[a,l]=x(""),{newlyCreatedScriptId:o,showScriptCreatedFeedback:u,hideScriptCreatedFeedback:r,openCreateScriptDialog:d}=A(),{currentProjectRoot:p}=q();I(()=>{if(u&&o){const _=setTimeout(()=>{r()},3e3);return()=>clearTimeout(_)}},[u,o,r]);const c=O(_=>{const h=_.target.closest("[data-action]");if(!h)return;const y=h.dataset.action,k=h.dataset.scriptId;if(y)switch(_.stopPropagation(),y){case"create-script":d(p||"");break;case"run-script":k&&s({type:"RUN_SCRIPT",payload:{id:k}});break;case"edit-script":k&&s({type:"EDIT_SCRIPT",payload:{id:k}});break;case"delete-script":k&&s({type:"DELETE_SCRIPT",payload:{id:k}});break}},[d,p,s]),v=R(()=>t.filter(_=>_.name.toLowerCase().includes(a.toLowerCase())),[t,a]),g=O(_=>{const m={};return _.forEach(h=>{const y=h.rootPath;m[y]||(m[y]=[]),m[y].push(h)}),m},[]),S=R(()=>g(v),[v,g]),b=R(()=>Object.entries(S),[S]),N=R(()=>b.sort(([_],[m])=>{const h=_===p,y=m===p;return h&&!y?-1:!h&&y?1:0}),[b,p]),f=R(()=>N.map(([_,m])=>{const h=_.split("/").pop()||_,y=p===_,k=o&&m.some(E=>E.id===o);return{id:`group-${_}`,defaultOpen:y||!!k,title:i("div",{className:"accordion-title-content",children:[i("span",{className:"project-name",children:h}),i("span",{className:"script-count",children:["(",m.length," script",m.length!==1?"s":"",")"]}),k&&u&&i("span",{className:"new-script-indicator",children:" New!"}),i("span",{className:"accordion-title-path",children:_})]}),content:i("div",{className:"script-group-content",children:i("div",{className:"script-group-grid",children:m.map(E=>i(di,{script:E,isNewlyCreated:E.id===o&&u},E.id))})})}}),[N,p,o,u]);return n?i("div",{className:"script-list",children:[i("div",{className:"script-list-header",children:[i("h2",{children:"Scripts"}),i("div",{className:"script-list-actions",children:[i("div",{className:"search-container",children:i("input",{type:"text",placeholder:"Search scripts...",className:"search-input",disabled:!0})}),i("button",{className:"btn-primary",disabled:!0,children:"Create Script"})]})]}),i("div",{className:"script-list-content",children:i("div",{className:"script-group-grid",children:Array.from({length:3}).map((_,m)=>i("div",{className:"skeleton-card",children:[i("div",{className:"skeleton-header",children:[i("div",{className:"skeleton-title-section",children:[i("div",{className:"skeleton-title"}),i("div",{className:"skeleton-id"})]}),i("div",{className:"skeleton-run-button"}),i("div",{className:"skeleton-button"}),i("div",{className:"skeleton-button"})]}),i("div",{className:"skeleton-content",children:[i("div",{className:"skeleton-info",children:[i("div",{className:"skeleton-info-row",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-info-row",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-info-row",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-info-row",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]})]}),i("div",{className:"skeleton-details",children:[i("div",{className:"skeleton-section",children:[i("div",{className:"skeleton-section-label"}),i("div",{className:"skeleton-commands-list",children:[i("div",{className:"skeleton-command-item",children:[i("div",{className:"skeleton-command-name"}),i("div",{className:"skeleton-command-script"})]}),i("div",{className:"skeleton-command-item",children:[i("div",{className:"skeleton-command-name"}),i("div",{className:"skeleton-command-script"})]})]})]}),i("div",{className:"skeleton-section",children:[i("div",{className:"skeleton-section-label"}),i("div",{className:"skeleton-section-value"})]})]})]})]},`script-card-loading-${m}`))})})]}):i("div",{className:"script-list",onClick:c,children:[i("div",{className:"script-list-header",children:[i("h2",{children:"Scripts"}),i("div",{className:"script-list-actions",children:[i("div",{className:"search-container",children:i("input",{type:"text",placeholder:"Search scripts...",className:"search-input",value:a,onInput:_=>l(_.target.value)})}),i("button",{className:"btn-primary","data-action":"create-script",children:"Create Script"})]})]}),i("div",{className:"script-list-content",children:v.length===0?i(se,{variant:"outlined",className:"empty-state",children:i(ae,{children:i("div",{className:"empty-state-content",children:[i("h3",{children:"No scripts found"}),i("p",{children:a?`No scripts match "${a}". Try a different search term.`:"Create your first script to automate your workflow."}),!a&&i("button",{className:"btn-primary","data-action":"create-script",children:"Create Your First Script"})]})})}):i(Ue,{items:f})})]})}),mi=Object.freeze(Object.defineProperty({__proto__:null,ScriptList:ui},Symbol.toStringTag,{value:"Module"})),pi=$(function({terminalCollections:t,isLoading:n,onEvent:s}){const{newlyCreatedTerminalCollectionId:a,showTerminalCollectionCreatedFeedback:l,hideTerminalCollectionCreatedFeedback:o,openCreateTerminalCollectionDialog:u}=U(),{currentProjectRoot:r}=q(),{scripts:d}=A(),p=b=>{const N=b.map(m=>m.id);return d.filter(m=>N.includes(m.id)).map(m=>i(z,{children:[i("b",{children:m.name}),": ",m?.commands?.map(h=>i(z,{children:[i("br",{}),h.command]}))]})).filter(Boolean)};I(()=>{if(l&&a){const b=setTimeout(()=>{o()},3e3);return()=>clearTimeout(b)}},[l,a,o]);const c=O(()=>{u(r||"")},[u,r]),v=O(b=>{s({type:"EXECUTE_TERMINAL_COLLECTION",payload:{id:b}})},[s]),g=O(b=>{s({type:"DELETE_TERMINAL_COLLECTION",payload:{id:b}})},[s]),S=O(b=>{s({type:"EDIT_TERMINAL_COLLECTION",payload:{id:b}})},[s]);return n?i("div",{className:"terminal-collection-list",children:[i("div",{className:"terminal-collection-list-header",children:[i("h2",{children:"Terminal Collections"}),i("button",{className:"btn-primary",disabled:!0,children:"Create Terminal Collection"})]}),i("div",{className:"terminal-collection-list-content",children:i("div",{className:"terminal-collection-grid",children:Array.from({length:3}).map((b,N)=>i("div",{className:"skeleton-card",children:[i("div",{className:"skeleton-header",children:i("div",{className:"skeleton-title"})}),i("div",{className:"skeleton-content",children:[i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]}),i("div",{className:"skeleton-detail",children:[i("div",{className:"skeleton-label"}),i("div",{className:"skeleton-value"})]})]}),i("div",{className:"skeleton-footer",children:[i("div",{className:"skeleton-button"}),i("div",{className:"skeleton-button"}),i("div",{className:"skeleton-button"})]})]},`terminal-collection-card-loading-${N}`))})})]}):i("div",{className:"terminal-collection-list",children:[i("div",{className:"terminal-collection-list-header",children:[i("h2",{children:"Terminal Collections"}),i("button",{className:"btn-primary",onClick:c,children:"Create Terminal Collection"})]}),i("div",{className:"terminal-collection-list-content",children:t.length===0?i(se,{variant:"outlined",className:"empty-state",children:i(ae,{children:i("div",{className:"empty-state-content",children:[i("h3",{children:"No terminal collections found"}),i("p",{children:"Create your first terminal collection to manage multiple terminals."}),i("button",{className:"btn-primary",onClick:c,children:"Create Your First Terminal Collection"})]})})}):i("div",{className:"terminal-collection-grid",children:t.map(b=>i(se,{variant:"elevated",className:`terminal-collection-card ${b.id===a&&l?"newly-created":""}`,children:[i(je,{children:i("div",{className:"terminal-collection-card-header",children:[i("div",{className:"terminal-collection-title",children:i("h3",{children:b.name})}),i("div",{className:"terminal-collection-actions",children:[i("button",{className:"btn-primary btn-sm",onClick:()=>v(b.id),children:"Execute"}),i("button",{className:"btn-secondary btn-sm",onClick:()=>S(b.id),children:"Edit"}),i("button",{className:"btn-ghost btn-sm",onClick:()=>g(b.id),children:"Delete"})]})]})}),i(ae,{children:i("div",{className:"terminal-collection-details",children:[i("div",{className:"terminal-collection-detail",children:[i("span",{className:"detail-label",children:"Root:"}),i("span",{className:"detail-value",children:b.rootPath})]}),i("div",{className:"terminal-collection-detail",children:[i("span",{className:"detail-label",children:"Scripts:"}),i("span",{className:"detail-value",children:b.scriptReferences&&b.scriptReferences.length>0?p(b.scriptReferences):"No scripts"})]}),i("div",{className:"terminal-collection-detail",children:[i("span",{className:"detail-label",children:"Lifecycle:"}),i("span",{className:"detail-value",children:b.lifecycle.join(", ")})]})]})})]},b.id))})})]})}),hi=Object.freeze(Object.defineProperty({__proto__:null,TerminalCollectionList:pi},Symbol.toStringTag,{value:"Module"}));function ve({isOpen:e,title:t,children:n,onClose:s,size:a="md",showCloseButton:l=!0}){return I(()=>{if(!e)return;const u=r=>{r.key==="Escape"&&s()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e,s]),I(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e?i("div",{className:"dialog-backdrop",onClick:u=>{u.target===u.currentTarget&&s()},children:i("div",{className:`dialog dialog-${a}`,children:[i("div",{className:"dialog-header",children:[i("h2",{className:"dialog-title",children:t}),l&&i("button",{className:"dialog-close-button",onClick:s,"aria-label":"Close dialog",children:i("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),i("div",{className:"dialog-content",children:n})]})}):null}function fi({isOpen:e,onClose:t,provider:n,sessionData:s,sessionDataError:a,editSession:l}){const[o,u]=x("basic"),[r,d]=x({name:"",projectRoot:"",tags:[],notes:"",selectedScripts:[],selectedTerminalCollections:[]}),[p,c]=x(""),[v,g]=x(!1),[S,b]=x(null),N=A(C=>C.scripts),f=U(C=>C.terminalCollections),_=j(C=>C.setTempSessionData);I(()=>{s&&d(C=>({...C,projectRoot:s.projectRoot,name:s.name||C.name}))},[s]),I(()=>{l&&d({name:l.name,projectRoot:l.projectRoot,tags:l.tags||[],notes:l.notes||"",selectedScripts:l.scripts||[],selectedTerminalCollections:l.terminalCollections||[]})},[l]);const m=()=>{const C=["basic","scripts","terminal-collections","review"],D=C.indexOf(o);D<C.length-1&&u(C[D+1])},h=()=>{const C=["basic","scripts","terminal-collections","review"],D=C.indexOf(o);D>0&&u(C[D-1])},y=()=>{switch(o){case"basic":return r.name.trim()!=="";case"scripts":case"terminal-collections":return!0;case"review":return!1;default:return!1}},k=async C=>{if(C.preventDefault(),o==="review"&&r.name.trim()){g(!0),b(null);try{const D={...s,name:r.name,tags:r.tags,notes:r.notes,scripts:r.selectedScripts,terminalCollections:r.selectedTerminalCollections,updatedAt:new Date},P={id:l?.id||"",name:r.name,projectRoot:s?.projectRoot||l?.projectRoot||"",createdAt:l?.createdAt||new Date,updatedAt:new Date,tags:r.tags,notes:r.notes,files:s?.files||l?.files||[],git:s?.git||l?.git||{branch:"",commit:"",isDirty:!1},extensions:s?.extensions||l?.extensions||{},terminalCommands:s?.terminalCommands||l?.terminalCommands||[],terminalCollections:r.selectedTerminalCollections,scripts:r.selectedScripts};_(P),l?n.sendMessage("codestate.session.update",{id:l.id,updates:{name:r.name,tags:r.tags,notes:r.notes,scripts:r.selectedScripts,terminalCollections:r.selectedTerminalCollections}}):n.sendMessage("codestate.session.create",{sessionData:D})}catch{b("Failed to create/update session"),g(!1)}}},E=()=>{d({name:"",projectRoot:"",tags:[],notes:"",selectedScripts:[],selectedTerminalCollections:[]}),c(""),u("basic"),g(!1),b(null),t()},F=()=>{const C=p.trim();C&&!r.tags.includes(C)&&(d(D=>({...D,tags:[...D.tags,C]})),c(""))},G=C=>{d(D=>({...D,tags:D.tags.filter(P=>P!==C)}))},Q=C=>{C.key==="Enter"&&(C.preventDefault(),F())},M=C=>{d(D=>({...D,selectedScripts:D.selectedScripts.includes(C)?D.selectedScripts.filter(P=>P!==C):[...D.selectedScripts,C]}))},Z=C=>r.selectedScripts.includes(C),yi=C=>{d(D=>({...D,selectedTerminalCollections:D.selectedTerminalCollections.includes(C)?D.selectedTerminalCollections.filter(P=>P!==C):[...D.selectedTerminalCollections,C]}))},Di=C=>r.selectedTerminalCollections.includes(C),Ti=()=>{const C=[{key:"basic",label:"Basic Details"},{key:"scripts",label:"Scripts"},{key:"terminal-collections",label:"Terminal Collections"},{key:"review",label:"Review"}],D=C.findIndex(P=>P.key===o);return i("div",{className:"step-indicator",children:C.map((P,Ht)=>i("div",{className:`step ${o===P.key?"active":""} ${D>Ht?"completed":""}`,children:[i("div",{className:"step-number",children:Ht+1}),i("div",{className:"step-label",children:P.label})]},P.key))})},ki=()=>i("div",{className:"step-content",children:[i("div",{className:"form-group",children:[i("label",{htmlFor:"session-name",className:"form-label",children:"Session Name *"}),i("input",{id:"session-name",type:"text",className:"form-input",value:r.name,onInput:C=>d(D=>({...D,name:C.target?.value||""})),placeholder:"Enter session name",required:!0,autoFocus:!0})]}),i("div",{className:"form-group",children:[i("label",{htmlFor:"project-root",className:"form-label",children:"Project Root"}),i("input",{id:"project-root",type:"text",className:"form-input",value:r.projectRoot,onInput:C=>d(D=>({...D,projectRoot:C.target?.value||""})),placeholder:"/path/to/your/project",readOnly:!0})]}),(s?.git||l?.git)&&i("div",{className:"form-group",children:[i("label",{className:"form-label",children:"Git Information"}),i("div",{className:"git-info",children:[i("div",{className:"git-info-item",children:[i("span",{className:"git-label",children:"Branch:"}),i("span",{className:"git-value",children:(s?.git||l?.git)?.branch})]}),i("div",{className:"git-info-item",children:[i("span",{className:"git-label",children:"Commit:"}),i("span",{className:"git-value",children:(s?.git||l?.git)?.commit})]}),i("div",{className:"git-info-item",children:[i("span",{className:"git-label",children:"Status:"}),i("span",{className:`git-value ${(s?.git||l?.git)?.isDirty?"dirty":"clean"}`,children:(s?.git||l?.git)?.isDirty?"Uncommitted changes":"Clean"})]})]})]}),(s?.files&&s.files.length>0||l?.files&&l.files.length>0)&&i("div",{className:"form-group",children:[i("label",{className:"form-label",children:["Open Files (",(s?.files||l?.files||[]).length,")"]}),i("div",{className:"files-list",children:[(s?.files||l?.files||[]).slice(0,5).map((C,D)=>i("div",{className:"file-item",children:[i("span",{className:"file-path",children:C.path}),C.cursor&&i("span",{className:"file-cursor",children:["Line ",C.cursor.line,", Col ",C.cursor.column]})]},D)),(s?.files||l?.files||[]).length>5&&i("div",{className:"file-item more-files",children:["+",(s?.files||l?.files||[]).length-5," more files"]})]})]}),i("div",{className:"form-group",children:[i("label",{htmlFor:"tags",className:"form-label",children:"Tags"}),i("div",{className:"tag-input-container",children:[i("input",{id:"tags",type:"text",className:"form-input",value:p,onInput:C=>c(C.target?.value||""),onKeyPress:Q,placeholder:"Add tags (press Enter to add)"}),i("button",{type:"button",className:"btn-secondary btn-sm",onClick:F,children:"Add"})]}),r.tags.length>0&&i("div",{className:"tag-list",children:r.tags.map((C,D)=>i("span",{className:"tag",children:[C,i("button",{type:"button",className:"tag-remove",onClick:()=>G(C),"aria-label":`Remove ${C} tag`,children:""})]},D))})]}),i("div",{className:"form-group",children:[i("label",{htmlFor:"notes",className:"form-label",children:"Notes"}),i("textarea",{id:"notes",className:"form-textarea",value:r.notes,onInput:C=>d(D=>({...D,notes:C.target?.value||""})),placeholder:"Add any notes about this session",rows:3})]})]}),Ei=()=>i("div",{className:"step-content",children:i("div",{className:"form-group",children:[i("label",{className:"form-label",children:"Select Scripts"}),i("p",{className:"step-description",children:"Choose which scripts to include in this session."}),N.length===0?i("div",{className:"empty-state",children:i("p",{children:"No scripts available. Create scripts first to include them in sessions."})}):i("div",{className:"selection-list",children:N.map(C=>i("div",{className:"selection-item",children:i("label",{className:"selection-label",children:[i("input",{type:"checkbox",checked:Z(C.id),onChange:()=>M(C.id),className:"selection-checkbox"}),i("div",{className:"selection-content",children:[i("div",{className:"selection-title",children:C.name}),i("div",{className:"selection-details",children:[i("span",{className:"selection-path",children:C.rootPath}),C.lifecycle&&C.lifecycle.length>0&&i("span",{className:"selection-lifecycle",children:["Lifecycle: ",C.lifecycle.join(", ")]})]})]})]})},C.id))})]})}),wi=()=>i("div",{className:"step-content",children:i("div",{className:"form-group",children:[i("label",{className:"form-label",children:"Select Terminal Collections"}),i("p",{className:"step-description",children:"Choose which terminal collections to include in this session."}),f.length===0?i("div",{className:"empty-state",children:i("p",{children:"No terminal collections available. Create terminal collections first to include them in sessions."})}):i("div",{className:"selection-list",children:f.map(C=>i("div",{className:"selection-item",children:i("label",{className:"selection-label",children:[i("input",{type:"checkbox",checked:Di(C.id),onChange:()=>yi(C.id),className:"selection-checkbox"}),i("div",{className:"selection-content",children:[i("div",{className:"selection-title",children:C.name}),i("div",{className:"selection-details",children:[i("span",{className:"selection-path",children:C.rootPath}),C.lifecycle&&C.lifecycle.length>0&&i("span",{className:"selection-lifecycle",children:["Lifecycle: ",C.lifecycle.join(", ")]}),C.scripts&&C.scripts.length>0&&i("span",{className:"selection-scripts",children:["Scripts: ",C.scripts.length]})]})]})]})},C.id))})]})}),Li=()=>i("div",{className:"step-content",children:[i("div",{className:"review-section",children:[i("h3",{children:"Session Details"}),i("div",{className:"review-item",children:[i("strong",{children:"Name:"})," ",r.name]}),i("div",{className:"review-item",children:[i("strong",{children:"Project Root:"})," ",r.projectRoot]}),r.tags.length>0&&i("div",{className:"review-item",children:[i("strong",{children:"Tags:"})," ",r.tags.join(", ")]}),r.notes&&i("div",{className:"review-item",children:[i("strong",{children:"Notes:"})," ",r.notes]})]}),r.selectedScripts.length>0&&i("div",{className:"review-section",children:[i("h3",{children:["Selected Scripts (",r.selectedScripts.length,")"]}),r.selectedScripts.map(C=>{const D=N.find(P=>P.id===C);return D?i("div",{className:"review-item",children:[i("strong",{children:D.name})," - ",D.rootPath]},C):null})]}),r.selectedTerminalCollections.length>0&&i("div",{className:"review-section",children:[i("h3",{children:["Selected Terminal Collections (",r.selectedTerminalCollections.length,")"]}),r.selectedTerminalCollections.map(C=>{const D=f.find(P=>P.id===C);return D?i("div",{className:"review-item",children:[i("strong",{children:D.name})," - ",D.rootPath]},C):null})]}),S&&i("div",{className:"form-group",children:i("div",{className:"error-message",children:S})})]});return i(ve,{isOpen:e,title:l?"Edit Session":"Create New Session",onClose:E,size:"lg",children:a?i("div",{className:"error-state",children:[i("p",{className:"error-message",children:["Failed to collect workspace data: ",a]}),i("button",{className:"retry-button",onClick:t,children:"Close"})]}):!s&&!l?i("div",{className:"loading-state",children:[i("div",{className:"loading-spinner"}),i("p",{children:"Collecting workspace data..."})]}):i("div",{className:"create-session-container",children:[i("div",{className:"create-session-form",children:[Ti(),i("form",{onSubmit:k,onKeyDown:C=>{C.key==="Enter"&&o!=="review"&&C.preventDefault()},className:"step-form",children:i("div",{className:"step-content-scrollable",children:[o==="basic"&&ki(),o==="scripts"&&Ei(),o==="terminal-collections"&&wi(),o==="review"&&Li()]})})]}),i("div",{className:"form-actions",children:[i("button",{type:"button",className:"btn-secondary",onClick:E,children:"Cancel"}),o!=="basic"&&i("button",{type:"button",className:"btn-secondary",onClick:h,children:"Previous"}),o!=="review"?i("button",{type:"button",className:"btn-primary",onClick:m,disabled:!y(),children:"Next"}):i("button",{type:"submit",className:"btn-primary",disabled:!r.name.trim()||v,onClick:k,children:v?l?"Updating...":"Creating...":l?"Update Session":"Create Session"})]})]})})}const _i=Object.freeze(Object.defineProperty({__proto__:null,CreateSessionDialog:fi},Symbol.toStringTag,{value:"Module"}));function gi({isOpen:e,onClose:t,provider:n,rootPath:s="",editScript:a=null}){const[l,o]=x({name:"",rootPath:s,commands:[{command:"",name:"",priority:1}],lifecycle:["open"],executionMode:"new-terminals",closeTerminalAfterExecution:!1}),[u,r]=x(!1),[d,p]=x(null),c=A(m=>m.setTempScriptData),v=A(m=>m.setCurrentScript);I(()=>{o(a?{name:a.name,rootPath:a.rootPath,commands:a.commands&&a.commands.length>0?a.commands:[{command:"",name:"",priority:1}],lifecycle:a.lifecycle||["open"],executionMode:a.executionMode||"new-terminals",closeTerminalAfterExecution:a.closeTerminalAfterExecution||!1}:{name:"",rootPath:s,commands:[{command:"",name:"",priority:1}],lifecycle:["open"],executionMode:"new-terminals",closeTerminalAfterExecution:!1})},[a,s]);const g=async m=>{if(m.preventDefault(),!l.name.trim()){p("Script name is required");return}if(!l.rootPath.trim()){p("Root path is required");return}r(!0),p(null);try{const h={id:"",name:l.name,rootPath:l.rootPath,commands:l.commands.filter(y=>y.command.trim()&&y.name.trim()),lifecycle:l.lifecycle,executionMode:l.executionMode,closeTerminalAfterExecution:l.closeTerminalAfterExecution};if(c(h),a){const y={...a,name:l.name,rootPath:l.rootPath,commands:l.commands.filter(k=>k.command.trim()&&k.name.trim()),lifecycle:l.lifecycle,executionMode:l.executionMode,closeTerminalAfterExecution:l.closeTerminalAfterExecution};v(y),n.sendMessage("codestate.script.update",{id:a.id,scriptData:l})}else n.sendMessage("codestate.script.create",{scriptData:l})}catch{p("Failed to create script"),r(!1)}},S=()=>{o({name:"",rootPath:s,commands:[{command:"",name:"",priority:1}],lifecycle:["open"],executionMode:"same-terminal",closeTerminalAfterExecution:!1}),p(null),r(!1),t()},b=()=>{o(m=>({...m,commands:[...m.commands,{command:"",name:"",priority:m.commands.length+1}]}))},N=m=>{o(h=>({...h,commands:h.commands.filter((y,k)=>k!==m)}))},f=(m,h,y)=>{o(k=>({...k,commands:k.commands.map((E,F)=>F===m?{...E,[h]:y}:E)}))},_=m=>{o(h=>({...h,lifecycle:h.lifecycle.includes(m)?h.lifecycle.filter(y=>y!==m):[...h.lifecycle,m]}))};return i(ve,{isOpen:e,onClose:S,title:a?"Edit Script":"Create Script",children:i("div",{className:"create-script-container",children:i("form",{onSubmit:g,className:"create-script-form",children:[i("div",{className:"form-content",children:[i("div",{className:"form-group",children:[i("label",{htmlFor:"script-name",children:"Script Name *"}),i("input",{id:"script-name",type:"text",value:l.name,onInput:m=>o(h=>({...h,name:m.target.value})),placeholder:"Enter script name",required:!0,disabled:u})]}),i("div",{className:"form-group",children:[i("label",{htmlFor:"root-path",children:"Root Path *"}),i("input",{id:"root-path",type:"text",value:l.rootPath,onInput:m=>o(h=>({...h,rootPath:m.target.value})),placeholder:"Enter root path",required:!0,disabled:u})]}),i("div",{className:"form-group",children:[i("label",{children:"Commands"}),i("div",{className:"commands-section",children:[l.commands.map((m,h)=>i("div",{className:"command-row",children:[i("input",{type:"text",value:m.name,onInput:y=>f(h,"name",y.target.value),placeholder:"Command name",disabled:u}),i("input",{type:"text",value:m.command,onInput:y=>f(h,"command",y.target.value),placeholder:"Command",disabled:u}),i("input",{type:"number",value:m.priority,onInput:y=>f(h,"priority",parseInt(y.target.value)||1),placeholder:"Priority",min:"1",disabled:u}),i("button",{type:"button",onClick:()=>N(h),disabled:u||l.commands.length===1,className:"btn-remove",title:"Remove command",children:""})]},h)),i("button",{type:"button",onClick:b,disabled:u,className:"btn-add-command",children:"Add Command"})]})]}),i("div",{className:"form-group",children:[i("label",{children:"Lifecycle Events"}),i("div",{className:"lifecycle-options",children:["open","resume","none"].map(m=>i("label",{className:"checkbox-label",children:[i("input",{type:"checkbox",checked:l.lifecycle.includes(m),onChange:()=>_(m),disabled:u}),m.charAt(0).toUpperCase()+m.slice(1)]},m))})]}),i("div",{className:"form-group",children:i("label",{className:"checkbox-label",children:[i("input",{type:"checkbox",checked:l.closeTerminalAfterExecution,onChange:m=>o(h=>({...h,closeTerminalAfterExecution:m.target.checked})),disabled:u}),"Close Terminal After Execution"]})}),d&&i("div",{className:"error-message",children:d})]}),i("div",{className:"form-actions",children:[i("button",{type:"button",onClick:S,disabled:u,className:"btn-secondary",children:"Cancel"}),i("button",{type:"submit",disabled:u||!l.name.trim()||!l.rootPath.trim(),className:"btn-primary",children:u?a?"Updating...":"Creating...":a?"Update Script":"Create Script"})]})]})})})}const Ci=Object.freeze(Object.defineProperty({__proto__:null,CreateScriptDialog:gi},Symbol.toStringTag,{value:"Module"}));function vi({isOpen:e,onClose:t,rootPath:n,editTerminalCollection:s,provider:a}){const{scripts:l}=A(),{setCurrentTerminalCollection:o,setTempTerminalCollectionData:u}=U(),[r,d]=x({name:"",rootPath:n||"",lifecycle:["open"],scriptReferences:[],closeTerminalAfterExecution:!1}),[p,c]=x(null);I(()=>{d(s?{name:s.name,rootPath:s.rootPath,lifecycle:s.lifecycle,scriptReferences:s.scriptReferences.map(f=>({id:f.id,rootPath:f.rootPath})),closeTerminalAfterExecution:s.closeTerminalAfterExecution||!1}:{name:"",rootPath:n||"",lifecycle:["open"],scriptReferences:[],closeTerminalAfterExecution:!1})},[s,n]);const v=(f,_)=>{d(m=>({...m,[f]:_})),c(null)},g=f=>{const _={id:f.id,rootPath:f.rootPath},m=r.scriptReferences.some(h=>h.id===f.id);d(m?h=>({...h,scriptReferences:h.scriptReferences.filter(y=>y.id!==f.id)}):h=>({...h,scriptReferences:[...h.scriptReferences,_]})),c(null)},S=f=>{if(f.preventDefault(),c(null),!r.name.trim()){c("Please enter a name for the terminal collection.");return}if(r.scriptReferences.length===0){c("Please select at least one script for the terminal collection.");return}if(s){const _={...s,name:r.name,rootPath:r.rootPath,lifecycle:r.lifecycle,scriptReferences:r.scriptReferences,closeTerminalAfterExecution:r.closeTerminalAfterExecution};o(_),a.sendMessage("codestate.terminal-collection.update",{id:s.id,terminalCollectionData:r})}else{const _={id:"",name:r.name,rootPath:r.rootPath,lifecycle:r.lifecycle,scriptReferences:r.scriptReferences,closeTerminalAfterExecution:r.closeTerminalAfterExecution,scripts:[]};u(_),a.sendMessage("codestate.terminal-collection.create",{terminalCollectionData:r})}},b=l.reduce((f,_)=>{const m=_.rootPath;return f[m]||(f[m]=[]),f[m].push(_),f},{}),N=Object.entries(b);return i(ve,{isOpen:e,onClose:t,title:s?"Edit Terminal Collection":"Create Terminal Collection",children:i("form",{onSubmit:S,className:"create-terminal-collection-form",children:[p&&i("div",{className:"error-message",style:{color:"red",marginBottom:"1rem",padding:"0.5rem",backgroundColor:"#ffe6e6",border:"1px solid #ff9999",borderRadius:"4px"},children:p}),i("div",{className:"form-group",children:[i("label",{htmlFor:"name",children:"Name"}),i("input",{id:"name",type:"text",value:r.name,onInput:f=>v("name",f.target.value),placeholder:"Enter terminal collection name",required:!0,className:"terminal-input"})]}),i("div",{className:"form-group",children:[i("label",{htmlFor:"rootPath",children:"Root Path"}),i("input",{id:"rootPath",type:"text",value:r.rootPath,onInput:f=>v("rootPath",f.target.value),placeholder:"Enter root path",required:!0,className:"terminal-input"})]}),i("div",{className:"form-group",children:[i("label",{children:"Lifecycle Events"}),i("div",{className:"checkbox-group",children:["open","resume","none"].map(f=>i("label",{className:"checkbox-label",children:[i("input",{type:"checkbox",checked:r.lifecycle.includes(f),onChange:_=>{_.currentTarget.checked?v("lifecycle",[...r.lifecycle,f]):v("lifecycle",r.lifecycle.filter(m=>m!==f))},className:"terminal-checkbox"}),i("span",{children:f})]},f))})]}),i("div",{className:"form-group",children:[i("label",{children:"Script References"}),i("div",{className:"script-selection",children:N.length===0?i("p",{className:"no-scripts",children:"No scripts available"}):i(Ue,{items:N.map(([f,_])=>{const m=f.split("/").pop()||f;return{id:`script-group-${f}`,defaultOpen:f===r.rootPath,title:i("div",{className:"accordion-title-content",children:[i("span",{className:"project-name",children:m}),i("span",{className:"script-count",children:["(",_.length," script",_.length!==1?"s":"",")"]}),i("span",{className:"accordion-title-path",children:f})]}),content:i("div",{className:"script-group-content",children:_.map(h=>i("label",{className:"checkbox-label script-item",children:[i("input",{type:"checkbox",checked:r.scriptReferences.some(y=>y.id===h.id),onChange:()=>g(h),className:"terminal-checkbox"}),i("span",{children:h.name})]},h.id))})}})})})]}),i("div",{className:"form-group",children:i("label",{className:"checkbox-label",children:[i("input",{type:"checkbox",checked:r.closeTerminalAfterExecution,onChange:f=>v("closeTerminalAfterExecution",f.currentTarget.checked),className:"terminal-checkbox"}),i("span",{children:"Close terminal after execution"})]})}),i("div",{className:"form-actions",children:[i("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),i("button",{type:"submit",className:"btn-primary",children:s?"Update Terminal Collection":"Create Terminal Collection"})]})]})})}const bi=Object.freeze(Object.defineProperty({__proto__:null,CreateTerminalCollectionDialog:vi},Symbol.toStringTag,{value:"Module"}));function Ni({isOpen:e,onClose:t,provider:n}){const s=zt(m=>m.configDialog),a=s.configData,l=s.configDataError,[o,u]=x({version:"",ide:"",storagePath:"",logger:{level:"LOG",sinks:["console"]},extensions:{}}),[r,d]=x("dark"),[p,c]=x(!1),[v,g]=x(null);I(()=>{if(a){u(a);const m=a.extensions?.theme||"dark";d(m)}},[a]);const S=async m=>{m.preventDefault(),c(!0),g(null);try{const h={...o,extensions:{...o.extensions,theme:r}};n.sendMessage("codestate.config.update",{config:h})}catch{g("Failed to update config"),c(!1)}},b=()=>{u({version:"",ide:"",storagePath:"",logger:{level:"LOG",sinks:["console"]},extensions:{}}),c(!1),g(null),t()},N=m=>{u(h=>({...h,...m}))},f=m=>{u(h=>({...h,logger:{...h.logger,...m}}))},_=m=>{u(h=>({...h,logger:{...h.logger,sinks:h.logger.sinks.includes(m)?h.logger.sinks.filter(y=>y!==m):[...h.logger.sinks,m]}}))};return i(ve,{isOpen:e,title:"Configuration Settings",onClose:b,size:"lg",children:l?i("div",{className:"error-state",children:[i("p",{className:"error-message",children:["Failed to load configuration: ",l]}),i("button",{className:"retry-button",onClick:t,children:"Close"})]}):a?i("form",{onSubmit:S,className:"config-form",children:[i("div",{className:"config-section",children:[i("h3",{children:"General Settings"}),i("div",{className:"form-group",children:[i("label",{htmlFor:"version",className:"form-label",children:"Version"}),i("input",{id:"version",type:"text",className:"form-input",value:o.version,onInput:m=>N({version:m.target?.value||""}),placeholder:"Configuration version",readOnly:!0})]}),i("div",{className:"form-group",children:[i("label",{htmlFor:"ide",className:"form-label",children:"IDE"}),i("input",{id:"ide",type:"text",className:"form-input",value:o.ide,onInput:m=>N({ide:m.target?.value||""}),placeholder:"Integrated Development Environment",readOnly:!0})]}),i("div",{className:"form-group",children:[i("label",{htmlFor:"storage-path",className:"form-label",children:"Storage Path"}),i("input",{id:"storage-path",type:"text",className:"form-input",value:o.storagePath,onInput:m=>N({storagePath:m.target?.value||""}),placeholder:"/path/to/storage"})]})]}),i("div",{className:"config-section",children:[i("h3",{children:"Theme Settings"}),i("div",{className:"form-group",children:[i("label",{htmlFor:"theme-select",className:"form-label",children:"Theme"}),i("select",{id:"theme-select",className:"form-select",value:r,onChange:m=>d(m.target?.value),children:[i("option",{value:"match-ide",children:"Match IDE"}),i("option",{value:"light",children:"Light"}),i("option",{value:"dark",children:"Dark"})]})]})]}),i("div",{className:"config-section",children:[i("h3",{children:"Logger Settings"}),i("div",{className:"form-group",children:[i("label",{htmlFor:"log-level",className:"form-label",children:"Log Level"}),i("select",{id:"log-level",className:"form-select",value:o.logger.level,onChange:m=>f({level:m.target?.value}),children:[i("option",{value:"ERROR",children:"ERROR"}),i("option",{value:"WARN",children:"WARN"}),i("option",{value:"LOG",children:"LOG"}),i("option",{value:"DEBUG",children:"DEBUG"})]})]}),i("div",{className:"form-group",children:[i("label",{className:"form-label",children:"Log Sinks"}),i("div",{className:"checkbox-group",children:[i("label",{className:"checkbox-label",children:[i("input",{type:"checkbox",checked:o.logger.sinks.includes("console"),onChange:()=>_("console"),className:"form-checkbox"}),"Console"]}),i("label",{className:"checkbox-label",children:[i("input",{type:"checkbox",checked:o.logger.sinks.includes("file"),onChange:()=>_("file"),className:"form-checkbox"}),"File"]})]})]}),o.logger.sinks.includes("file")&&i("div",{className:"form-group",children:[i("label",{htmlFor:"log-file-path",className:"form-label",children:"Log File Path"}),i("input",{id:"log-file-path",type:"text",className:"form-input",value:o.logger.filePath||"",onInput:m=>f({filePath:m.target?.value||""}),placeholder:"/path/to/logfile.log"})]})]}),v&&i("div",{className:"form-group",children:i("div",{className:"error-message",children:v})}),i("div",{className:"form-actions",children:[i("button",{type:"button",className:"btn-secondary",onClick:b,children:"Cancel"}),i("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Updating...":"Update Configuration"})]})]}):i("div",{className:"loading-state",children:[i("div",{className:"loading-spinner"}),i("p",{children:"Loading configuration..."})]})})}const Si=Object.freeze(Object.defineProperty({__proto__:null,ConfigDialog:Ni},Symbol.toStringTag,{value:"Module"}));return be.CodeStateUI=Wt,Object.defineProperty(be,Symbol.toStringTag,{value:"Module"}),be})({});
