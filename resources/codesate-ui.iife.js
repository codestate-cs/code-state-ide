var CodeStateUI=(function(_e){"use strict";var Q,D,Ae,V,Fe,Ue,je,He,ge,ve,Ce,ze,ee={},We=[],jt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,te=Array.isArray;function A(e,t){for(var s in t)e[s]=t[s];return e}function be(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function U(e,t,s){var i,o,l,a={};for(l in t)l=="key"?i=t[l]:l=="ref"?o=t[l]:a[l]=t[l];if(arguments.length>2&&(a.children=arguments.length>3?Q.call(arguments,2):s),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)a[l]===void 0&&(a[l]=e.defaultProps[l]);return ne(e,a,i,o,null)}function ne(e,t,s,i,o){var l={type:e,props:t,key:s,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Ae,__i:-1,__u:0};return o==null&&D.vnode!=null&&D.vnode(l),l}function Ht(){return{current:null}}function O(e){return e.children}function F(e,t){this.props=e,this.context=t}function G(e,t){if(t==null)return e.__?G(e.__,e.__i+1):null;for(var s;t<e.__k.length;t++)if((s=e.__k[t])!=null&&s.__e!=null)return s.__e;return typeof e.type=="function"?G(e):null}function Be(e){var t,s;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((s=e.__k[t])!=null&&s.__e!=null){e.__e=e.__c.base=s.__e;break}return Be(e)}}function Ne(e){(!e.__d&&(e.__d=!0)&&V.push(e)&&!le.__r++||Fe!=D.debounceRendering)&&((Fe=D.debounceRendering)||Ue)(le)}function le(){for(var e,t,s,i,o,l,a,d=1;V.length;)V.length>d&&V.sort(je),e=V.shift(),d=V.length,e.__d&&(s=void 0,o=(i=(t=e).__v).__e,l=[],a=[],t.__P&&((s=A({},i)).__v=i.__v+1,D.vnode&&D.vnode(s),ye(t.__P,s,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,l,o??G(i),!!(32&i.__u),a),s.__v=i.__v,s.__.__k[s.__i]=s,Ye(l,s,a),s.__e!=o&&Be(s)));le.__r=0}function Ve(e,t,s,i,o,l,a,d,r,u,h){var c,b,C,f,E,N,p,_=i&&i.__k||We,m=t.length;for(r=zt(s,t,_,r,m),c=0;c<m;c++)(C=s.__k[c])!=null&&(b=C.__i==-1?ee:_[C.__i]||ee,C.__i=c,N=ye(e,C,b,o,l,a,d,r,u,h),f=C.__e,C.ref&&b.ref!=C.ref&&(b.ref&&ke(b.ref,null,C),h.push(C.ref,C.__c||f,C)),E==null&&f!=null&&(E=f),(p=!!(4&C.__u))||b.__k===C.__k?r=Ge(C,r,e,p):typeof C.type=="function"&&N!==void 0?r=N:f&&(r=f.nextSibling),C.__u&=-7);return s.__e=E,r}function zt(e,t,s,i,o){var l,a,d,r,u,h=s.length,c=h,b=0;for(e.__k=new Array(o),l=0;l<o;l++)(a=t[l])!=null&&typeof a!="boolean"&&typeof a!="function"?(r=l+b,(a=e.__k[l]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ne(null,a,null,null,null):te(a)?ne(O,{children:a},null,null,null):a.constructor==null&&a.__b>0?ne(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,d=null,(u=a.__i=Wt(a,s,r,c))!=-1&&(c--,(d=s[u])&&(d.__u|=2)),d==null||d.__v==null?(u==-1&&(o>h?b--:o<h&&b++),typeof a.type!="function"&&(a.__u|=4)):u!=r&&(u==r-1?b--:u==r+1?b++:(u>r?b--:b++,a.__u|=4))):e.__k[l]=null;if(c)for(l=0;l<h;l++)(d=s[l])!=null&&(2&d.__u)==0&&(d.__e==i&&(i=G(d)),Xe(d,d));return i}function Ge(e,t,s,i){var o,l;if(typeof e.type=="function"){for(o=e.__k,l=0;o&&l<o.length;l++)o[l]&&(o[l].__=e,t=Ge(o[l],t,s,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=G(e)),s.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function j(e,t){return t=t||[],e==null||typeof e=="boolean"||(te(e)?e.some(function(s){j(s,t)}):t.push(e)),t}function Wt(e,t,s,i){var o,l,a,d=e.key,r=e.type,u=t[s],h=u!=null&&(2&u.__u)==0;if(u===null&&e.key==null||h&&d==u.key&&r==u.type)return s;if(i>(h?1:0)){for(o=s-1,l=s+1;o>=0||l<t.length;)if((u=t[a=o>=0?o--:l++])!=null&&(2&u.__u)==0&&d==u.key&&r==u.type)return a}return-1}function qe(e,t,s){t[0]=="-"?e.setProperty(t,s??""):e[t]=s==null?"":typeof s!="number"||jt.test(t)?s:s+"px"}function oe(e,t,s,i,o){var l,a;e:if(t=="style")if(typeof s=="string")e.style.cssText=s;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)s&&t in s||qe(e.style,t,"");if(s)for(t in s)i&&s[t]==i[t]||qe(e.style,t,s[t])}else if(t[0]=="o"&&t[1]=="n")l=t!=(t=t.replace(He,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+l]=s,s?i?s.u=i.u:(s.u=ge,e.addEventListener(t,l?Ce:ve,l)):e.removeEventListener(t,l?Ce:ve,l);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&s==1?"":s))}}function Ze(e){return function(t){if(this.l){var s=this.l[t.type+e];if(t.t==null)t.t=ge++;else if(t.t<s.u)return;return s(D.event?D.event(t):t)}}}function ye(e,t,s,i,o,l,a,d,r,u){var h,c,b,C,f,E,N,p,_,m,g,y,w,k,$,W,J,P=t.type;if(t.constructor!=null)return null;128&s.__u&&(r=!!(32&s.__u),l=[d=t.__e=s.__e]),(h=D.__b)&&h(t);e:if(typeof P=="function")try{if(p=t.props,_="prototype"in P&&P.prototype.render,m=(h=P.contextType)&&i[h.__c],g=h?m?m.props.value:h.__:i,s.__c?N=(c=t.__c=s.__c).__=c.__E:(_?t.__c=c=new P(p,g):(t.__c=c=new F(p,g),c.constructor=P,c.render=Vt),m&&m.sub(c),c.props=p,c.state||(c.state={}),c.context=g,c.__n=i,b=c.__d=!0,c.__h=[],c._sb=[]),_&&c.__s==null&&(c.__s=c.state),_&&P.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=A({},c.__s)),A(c.__s,P.getDerivedStateFromProps(p,c.__s))),C=c.props,f=c.state,c.__v=t,b)_&&P.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),_&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(_&&P.getDerivedStateFromProps==null&&p!==C&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(p,g),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(p,c.__s,g)===!1||t.__v==s.__v){for(t.__v!=s.__v&&(c.props=p,c.state=c.__s,c.__d=!1),t.__e=s.__e,t.__k=s.__k,t.__k.some(function(H){H&&(H.__=t)}),y=0;y<c._sb.length;y++)c.__h.push(c._sb[y]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(p,c.__s,g),_&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(C,f,E)})}if(c.context=g,c.props=p,c.__P=e,c.__e=!1,w=D.__r,k=0,_){for(c.state=c.__s,c.__d=!1,w&&w(t),h=c.render(c.props,c.state,c.context),$=0;$<c._sb.length;$++)c.__h.push(c._sb[$]);c._sb=[]}else do c.__d=!1,w&&w(t),h=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++k<25);c.state=c.__s,c.getChildContext!=null&&(i=A(A({},i),c.getChildContext())),_&&!b&&c.getSnapshotBeforeUpdate!=null&&(E=c.getSnapshotBeforeUpdate(C,f)),W=h,h!=null&&h.type===O&&h.key==null&&(W=Ke(h.props.children)),d=Ve(e,te(W)?W:[W],t,s,i,o,l,a,d,r,u),c.base=t.__e,t.__u&=-161,c.__h.length&&a.push(c),N&&(c.__E=c.__=null)}catch(H){if(t.__v=null,r||l!=null)if(H.then){for(t.__u|=r?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;l[l.indexOf(d)]=null,t.__e=d}else{for(J=l.length;J--;)be(l[J]);Se(t)}else t.__e=s.__e,t.__k=s.__k,H.then||Se(t);D.__e(H,t,s)}else l==null&&t.__v==s.__v?(t.__k=s.__k,t.__e=s.__e):d=t.__e=Bt(s.__e,t,s,i,o,l,a,r,u);return(h=D.diffed)&&h(t),128&t.__u?void 0:d}function Se(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Se)}function Ye(e,t,s){for(var i=0;i<s.length;i++)ke(s[i],s[++i],s[++i]);D.__c&&D.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(l){l.call(o)})}catch(l){D.__e(l,o.__v)}})}function Ke(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:te(e)?e.map(Ke):A({},e)}function Bt(e,t,s,i,o,l,a,d,r){var u,h,c,b,C,f,E,N=s.props,p=t.props,_=t.type;if(_=="svg"?o="http://www.w3.org/2000/svg":_=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),l!=null){for(u=0;u<l.length;u++)if((C=l[u])&&"setAttribute"in C==!!_&&(_?C.localName==_:C.nodeType==3)){e=C,l[u]=null;break}}if(e==null){if(_==null)return document.createTextNode(p);e=document.createElementNS(o,_,p.is&&p),d&&(D.__m&&D.__m(t,l),d=!1),l=null}if(_==null)N===p||d&&e.data==p||(e.data=p);else{if(l=l&&Q.call(e.childNodes),N=s.props||ee,!d&&l!=null)for(N={},u=0;u<e.attributes.length;u++)N[(C=e.attributes[u]).name]=C.value;for(u in N)if(C=N[u],u!="children"){if(u=="dangerouslySetInnerHTML")c=C;else if(!(u in p)){if(u=="value"&&"defaultValue"in p||u=="checked"&&"defaultChecked"in p)continue;oe(e,u,null,C,o)}}for(u in p)C=p[u],u=="children"?b=C:u=="dangerouslySetInnerHTML"?h=C:u=="value"?f=C:u=="checked"?E=C:d&&typeof C!="function"||N[u]===C||oe(e,u,C,N[u],o);if(h)d||c&&(h.__html==c.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(c&&(e.innerHTML=""),Ve(t.type=="template"?e.content:e,te(b)?b:[b],t,s,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":o,l,a,l?l[0]:s.__k&&G(s,0),d,r),l!=null)for(u=l.length;u--;)be(l[u]);d||(u="value",_=="progress"&&f==null?e.removeAttribute("value"):f!=null&&(f!==e[u]||_=="progress"&&!f||_=="option"&&f!=N[u])&&oe(e,u,f,N[u],o),u="checked",E!=null&&E!=e[u]&&oe(e,u,E,N[u],o))}return e}function ke(e,t,s){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(o){D.__e(o,s)}}function Xe(e,t,s){var i,o;if(D.unmount&&D.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||ke(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(l){D.__e(l,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&Xe(i[o],t,s||typeof e.type!="function");s||be(e.__e),e.__c=e.__=e.__e=void 0}function Vt(e,t,s){return this.constructor(e,s)}function q(e,t,s){var i,o,l,a;t==document&&(t=document.documentElement),D.__&&D.__(e,t),o=(i=typeof s=="function")?null:s&&s.__k||t.__k,l=[],a=[],ye(t,e=(!i&&s||t).__k=U(O,null,[e]),o||ee,ee,t.namespaceURI,!i&&s?[s]:o?null:t.firstChild?Q.call(t.childNodes):null,l,!i&&s?s:o?o.__e:t.firstChild,i,a),Ye(l,e,a)}function Je(e,t){q(e,t,Je)}function Gt(e,t,s){var i,o,l,a,d=A({},e.props);for(l in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)l=="key"?i=t[l]:l=="ref"?o=t[l]:d[l]=t[l]===void 0&&a!=null?a[l]:t[l];return arguments.length>2&&(d.children=arguments.length>3?Q.call(arguments,2):s),ne(e.type,d,i||e.key,o||e.ref,null)}function qt(e){function t(s){var i,o;return this.getChildContext||(i=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(l){this.props.value!=l.value&&i.forEach(function(a){a.__e=!0,Ne(a)})},this.sub=function(l){i.add(l);var a=l.componentWillUnmount;l.componentWillUnmount=function(){i&&i.delete(l),a&&a.call(l)}}),s.children}return t.__c="__cC"+ze++,t.__=e,t.Provider=t.__l=(t.Consumer=function(s,i){return s.children(i)}).contextType=t,t}Q=We.slice,D={__e:function(e,t,s,i){for(var o,l,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),a=o.__d),a)return o.__E=o}catch(d){e=d}throw e}},Ae=0,F.prototype.setState=function(e,t){var s;s=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=A({},this.state),typeof e=="function"&&(e=e(A({},s),this.props)),e&&A(s,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ne(this))},F.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ne(this))},F.prototype.render=O,V=[],Ue=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,je=function(e,t){return e.__v.__b-t.__v.__b},le.__r=0,He=/(PointerCapture)$|Capture$/i,ge=0,ve=Ze(!1),Ce=Ze(!0),ze=0;var Zt=0;function n(e,t,s,i,o,l){t||(t={});var a,d,r=t;if("ref"in r)for(d in r={},t)d=="ref"?a=t[d]:r[d]=t[d];var u={type:e,props:r,key:s,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Zt,__i:-1,__u:0,__source:o,__self:l};if(typeof e=="function"&&(a=e.defaultProps))for(d in a)r[d]===void 0&&(r[d]=a[d]);return D.vnode&&D.vnode(u),u}var z,R,Te,Qe,Z=0,et=[],L=D,tt=L.__b,nt=L.__r,st=L.diffed,it=L.__c,lt=L.unmount,ot=L.__;function Y(e,t){L.__h&&L.__h(R,e,Z||t),Z=0;var s=R.__H||(R.__H={__:[],__h:[]});return e>=s.__.length&&s.__.push({}),s.__[e]}function x(e){return Z=1,De(pt,e)}function De(e,t,s){var i=Y(z++,2);if(i.t=e,!i.__c&&(i.__=[s?s(t):pt(void 0,t),function(d){var r=i.__N?i.__N[0]:i.__[0],u=i.t(r,d);r!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=R,!R.__f)){var o=function(d,r,u){if(!i.__c.__H)return!0;var h=i.__c.__H.__.filter(function(b){return!!b.__c});if(h.every(function(b){return!b.__N}))return!l||l.call(this,d,r,u);var c=i.__c.props!==d;return h.forEach(function(b){if(b.__N){var C=b.__[0];b.__=b.__N,b.__N=void 0,C!==b.__[0]&&(c=!0)}}),l&&l.call(this,d,r,u)||c};R.__f=!0;var l=R.shouldComponentUpdate,a=R.componentWillUpdate;R.componentWillUpdate=function(d,r,u){if(this.__e){var h=l;l=void 0,o(d,r,u),l=h}a&&a.call(this,d,r,u)},R.shouldComponentUpdate=o}return i.__N||i.__}function M(e,t){var s=Y(z++,3);!L.__s&&Re(s.__H,t)&&(s.__=e,s.u=t,R.__H.__h.push(s))}function se(e,t){var s=Y(z++,4);!L.__s&&Re(s.__H,t)&&(s.__=e,s.u=t,R.__h.push(s))}function at(e){return Z=5,ae(function(){return{current:e}},[])}function rt(e,t,s){Z=6,se(function(){if(typeof e=="function"){var i=e(t());return function(){e(null),i&&typeof i=="function"&&i()}}if(e)return e.current=t(),function(){return e.current=null}},s==null?s:s.concat(e))}function ae(e,t){var s=Y(z++,7);return Re(s.__H,t)&&(s.__=e(),s.__H=t,s.__h=e),s.__}function Ee(e,t){return Z=8,ae(function(){return e},t)}function ct(e){var t=R.context[e.__c],s=Y(z++,9);return s.c=e,t?(s.__==null&&(s.__=!0,t.sub(R)),t.props.value):e.__}function dt(e,t){L.useDebugValue&&L.useDebugValue(t?t(e):e)}function ut(){var e=Y(z++,11);if(!e.__){for(var t=R.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var s=t.__m||(t.__m=[0,0]);e.__="P"+s[0]+"-"+s[1]++}return e.__}function Yt(){for(var e;e=et.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(re),e.__H.__h.forEach(we),e.__H.__h=[]}catch(t){e.__H.__h=[],L.__e(t,e.__v)}}L.__b=function(e){R=null,tt&&tt(e)},L.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ot&&ot(e,t)},L.__r=function(e){nt&&nt(e),z=0;var t=(R=e.__c).__H;t&&(Te===R?(t.__h=[],R.__h=[],t.__.forEach(function(s){s.__N&&(s.__=s.__N),s.u=s.__N=void 0})):(t.__h.forEach(re),t.__h.forEach(we),t.__h=[],z=0)),Te=R},L.diffed=function(e){st&&st(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(et.push(t)!==1&&Qe===L.requestAnimationFrame||((Qe=L.requestAnimationFrame)||Kt)(Yt)),t.__H.__.forEach(function(s){s.u&&(s.__H=s.u),s.u=void 0})),Te=R=null},L.__c=function(e,t){t.some(function(s){try{s.__h.forEach(re),s.__h=s.__h.filter(function(i){return!i.__||we(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],L.__e(i,s.__v)}}),it&&it(e,t)},L.unmount=function(e){lt&&lt(e);var t,s=e.__c;s&&s.__H&&(s.__H.__.forEach(function(i){try{re(i)}catch(o){t=o}}),s.__H=void 0,t&&L.__e(t,s.__v))};var mt=typeof requestAnimationFrame=="function";function Kt(e){var t,s=function(){clearTimeout(i),mt&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(s,35);mt&&(t=requestAnimationFrame(s))}function re(e){var t=R,s=e.__c;typeof s=="function"&&(e.__c=void 0,s()),R=t}function we(e){var t=R;e.__c=e.__(),R=t}function Re(e,t){return!e||e.length!==t.length||t.some(function(s,i){return s!==e[i]})}function pt(e,t){return typeof t=="function"?t(e):t}function Xt({onConfigClick:e}){return n("header",{className:"app-header",children:n("div",{className:"header-content",children:[n("div",{className:"header-title",children:n("h1",{children:"CodeState"})}),n("div",{className:"header-actions",children:n("button",{className:"btn-secondary btn-sm header-config-button",onClick:e,title:"Configuration Settings",children:[n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n("path",{d:"M8 9.5C8.82843 9.5 9.5 8.82843 9.5 8C9.5 7.17157 8.82843 6.5 8 6.5C7.17157 6.5 6.5 7.17157 6.5 8C6.5 8.82843 7.17157 9.5 8 9.5Z",stroke:"currentColor",strokeWidth:"1.5"}),n("path",{d:"M8 1V2M8 14V15M15 8H14M2 8H1M12.364 3.636L11.657 4.343M4.343 11.657L3.636 12.364M12.364 12.364L11.657 11.657M4.343 4.343L3.636 3.636",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),"Config"]})})]})})}function Jt({items:e,defaultActiveId:t,activeTab:s,variant:i="underline",className:o="",onTabChange:l}){const[a,d]=x(t||e.find(h=>!h.disabled)?.id||e[0]?.id),r=s??a,u=h=>{const c=e.find(b=>b.id===h);c&&!c.disabled&&(s===void 0&&d(h),l?.(h))};return e.find(h=>h.id===r)?.content,n("div",{className:`tabs tabs-${i} ${o}`,children:[n("div",{className:"tabs-list",role:"tablist",children:e.map(h=>{const c=r===h.id;return n("button",{className:`tab-trigger ${c?"active":""} ${h.disabled?"disabled":""}`,onClick:()=>u(h.id),role:"tab","aria-selected":c,"aria-controls":`tab-content-${h.id}`,disabled:h.disabled,children:h.label},h.id)})}),n("div",{className:"tabs-content",children:e.map(h=>{const c=r===h.id;return n("div",{id:`tab-content-${h.id}`,className:`tab-content ${c?"active":""}`,role:"tabpanel","aria-labelledby":`tab-${h.id}`,"aria-hidden":!c,children:typeof h.content=="string"?n("p",{children:h.content}):h.content},h.id)})})]})}function K({children:e,className:t="",variant:s="default",padding:i="md",onClick:o}){const l=["card",`card-${s}`,`card-padding-${i}`,o?"card-clickable":"",t].filter(Boolean).join(" ");return n("div",{className:l,onClick:o,role:o?"button":void 0,tabIndex:o?0:void 0,children:e})}function Le({children:e,className:t=""}){return n("div",{className:`card-header ${t}`,children:e})}function X({children:e,className:t=""}){return n("div",{className:`card-content ${t}`,children:e})}function Qt({session:e,isNewlyCreated:t=!1}){const s=l=>{if(console.log("formatDate",l),!l)return"";const a=typeof l=="string"?new Date(l):l;return isNaN(a.getTime())?(console.error("Invalid date:",l),"Invalid date"):new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},o=(l=>l.isDirty?{status:"dirty",text:"Uncommitted changes",color:"var(--destructive)"}:{status:"clean",text:"Clean",color:"var(--primary)"})(e.git);return n(K,{variant:"elevated",className:`session-card ${t?"newly-created":""}`,children:[n(Le,{children:n("div",{className:"session-card-header",children:[n("div",{className:"session-title",children:n("h3",{children:e.name})}),n("div",{className:"session-actions",children:[n("button",{className:"btn-ghost btn-sm","data-action":"resume-session","data-session-id":e.id,title:"Resume session",children:"▶️ Resume"}),n("button",{className:"btn-ghost btn-sm","data-action":"edit-session","data-session-id":e.id,title:"Edit session",children:"✏️"}),n("button",{className:"btn-ghost btn-sm","data-action":"export-session","data-session-id":e.id,title:"Export session",children:"📤"}),n("button",{className:"btn-ghost btn-sm","data-action":"delete-session","data-session-id":e.id,title:"Delete session",children:"🗑️"})]})]})}),n(X,{children:n("div",{className:"session-details",children:[n("div",{className:"session-detail",children:[n("span",{className:"detail-label",children:"Project:"}),n("span",{className:"detail-value",children:e.projectRoot})]}),n("div",{className:"session-detail",children:[n("span",{className:"detail-label",children:"Git:"}),n("span",{className:"detail-value git-status",style:{color:o.color},children:[e.git.branch," • ",o.text]})]}),n("div",{className:"session-detail",children:[n("span",{className:"detail-label",children:"Files:"}),n("span",{className:"detail-value",children:[e.files.length," file",e.files.length!==1?"s":"",e.files.find(l=>l.isActive)&&n("span",{className:"active-file",children:[" • Active: ",e.files.find(l=>l.isActive)?.path.split("/").pop()]})]})]}),n("div",{className:"session-detail",children:[n("span",{className:"detail-label",children:"Resources:"}),n("span",{className:"detail-value",children:[e.scripts?.length||0," script",(e.scripts?.length||0)!==1?"s":""," •",e.terminalCollections?.length||0," terminal collection",(e.terminalCollections?.length||0)!==1?"s":""]})]}),n("div",{className:"session-detail",children:[n("span",{className:"detail-label",children:"Tags:"}),n("div",{className:"tags",children:e.tags.length>0?e.tags.map((l,a)=>n("span",{className:"tag",children:l},a)):n("span",{className:"detail-value",children:"-"})})]}),n("div",{className:"session-detail",children:[n("span",{className:"detail-label",children:"Notes:"}),n("span",{className:"detail-value notes",children:e.notes||"-"})]}),n("div",{className:"session-timestamps",children:[n("div",{className:"timestamp",children:[n("span",{className:"timestamp-label",children:"Created:"}),n("span",{className:"timestamp-value",children:s(e.createdAt)})]}),n("div",{className:"timestamp",children:[n("span",{className:"timestamp-label",children:"Updated:"}),n("span",{className:"timestamp-value",children:s(e.updatedAt)})]})]})]})})]})}function xe({items:e,className:t=""}){const[s,i]=x(new Set(e.filter(l=>l.defaultOpen).map(l=>l.id))),o=l=>{i(a=>{const d=new Set(a);return d.has(l)?d.delete(l):d.add(l),d})};return n("div",{className:`accordion ${t}`,children:e.map(l=>{const a=s.has(l.id);return n("div",{className:"accordion-item",children:[n("button",{type:"button",className:`accordion-header ${a?"open":""}`,onClick:()=>o(l.id),"aria-expanded":a,"aria-controls":`accordion-content-${l.id}`,children:[n("span",{className:"accordion-title",children:l.title}),n("svg",{className:`accordion-icon ${a?"rotated":""}`,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),n("div",{id:`accordion-content-${l.id}`,className:`accordion-content ${a?"open":""}`,"aria-hidden":!a,children:n("div",{className:"accordion-content-inner",children:typeof l.content=="string"?n("p",{children:l.content}):l.content})})]},l.id)})})}const ht=e=>{let t;const s=new Set,i=(u,h)=>{const c=typeof u=="function"?u(t):u;if(!Object.is(c,t)){const b=t;t=h??(typeof c!="object"||c===null)?c:Object.assign({},t,c),s.forEach(C=>C(t,b))}},o=()=>t,d={setState:i,getState:o,getInitialState:()=>r,subscribe:u=>(s.add(u),()=>s.delete(u))},r=t=e(i,o,d);return d},en=(e=>e?ht(e):ht);function ft(e,t){for(var s in t)e[s]=t[s];return e}function Me(e,t){for(var s in e)if(s!=="__source"&&!(s in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function _t(e,t){var s=t(),i=x({t:{__:s,u:t}}),o=i[0].t,l=i[1];return se(function(){o.__=s,o.u=t,Ie(o)&&l({t:o})},[e,s,t]),M(function(){return Ie(o)&&l({t:o}),e(function(){Ie(o)&&l({t:o})})},[e]),s}function Ie(e){var t,s,i=e.u,o=e.__;try{var l=i();return!((t=o)===(s=l)&&(t!==0||1/t==1/s)||t!=t&&s!=s)}catch{return!0}}function gt(e){e()}function vt(e){return e}function Ct(){return[!1,gt]}var bt=se;function Pe(e,t){this.props=e,this.context=t}function tn(e,t){function s(o){var l=this.props.ref,a=l==o.ref;return!a&&l&&(l.call?l(null):l.current=null),t?!t(this.props,o)||!a:Me(this.props,o)}function i(o){return this.shouldComponentUpdate=s,U(e,o)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i.type=e,i}(Pe.prototype=new F).isPureReactComponent=!0,Pe.prototype.shouldComponentUpdate=function(e,t){return Me(this.props,e)||Me(this.state,t)};var Nt=D.__b;D.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Nt&&Nt(e)};var nn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function sn(e){function t(s){var i=ft({},s);return delete i.ref,e(i,s.ref||null)}return t.$$typeof=nn,t.render=e,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var yt=function(e,t){return e==null?null:j(j(e).map(t))},ln={map:yt,forEach:yt,count:function(e){return e?j(e).length:0},only:function(e){var t=j(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:j},on=D.__e;D.__e=function(e,t,s,i){if(e.then){for(var o,l=t;l=l.__;)if((o=l.__c)&&o.__c)return t.__e==null&&(t.__e=s.__e,t.__k=s.__k),o.__c(e,t)}on(e,t,s,i)};var St=D.unmount;function kt(e,t,s){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=ft({},e)).__c!=null&&(e.__c.__P===s&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return kt(i,t,s)})),e}function Tt(e,t,s){return e&&s&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return Tt(i,t,s)}),e.__c&&e.__c.__P===t&&(e.__e&&s.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=s)),e}function ce(){this.__u=0,this.o=null,this.__b=null}function Dt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function an(e){var t,s,i;function o(l){if(t||(t=e()).then(function(a){s=a.default||a},function(a){i=a}),i)throw i;if(!s)throw t;return U(s,l)}return o.displayName="Lazy",o.__f=!0,o}function ie(){this.i=null,this.l=null}D.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),St&&St(e)},(ce.prototype=new F).__c=function(e,t){var s=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(s);var o=Dt(i.__v),l=!1,a=function(){l||(l=!0,s.__R=null,o?o(d):d())};s.__R=a;var d=function(){if(!--i.__u){if(i.state.__a){var r=i.state.__a;i.__v.__k[0]=Tt(r,r.__c.__P,r.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.o.pop();)u.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(a,a)},ce.prototype.componentWillUnmount=function(){this.o=[]},ce.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=kt(this.__b,s,i.__O=i.__P)}this.__b=null}var o=t.__a&&U(O,null,e.fallback);return o&&(o.__u&=-33),[U(O,null,t.__a?null:e.children),o]};var Et=function(e,t,s){if(++s[1]===s[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(s=e.i;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;e.i=s=s[2]}};function rn(e){return this.getChildContext=function(){return e.context},e.children}function cn(e){var t=this,s=e.h;if(t.componentWillUnmount=function(){q(null,t.v),t.v=null,t.h=null},t.h&&t.h!==s&&t.componentWillUnmount(),!t.v){for(var i=t.__v;i!==null&&!i.__m&&i.__!==null;)i=i.__;t.h=s,t.v={nodeType:1,parentNode:s,childNodes:[],__k:{__m:i.__m},contains:function(){return!0},insertBefore:function(o,l){this.childNodes.push(o),t.h.insertBefore(o,l)},removeChild:function(o){this.childNodes.splice(this.childNodes.indexOf(o)>>>1,1),t.h.removeChild(o)}}}q(U(rn,{context:t.context},e.__v),t.v)}function dn(e,t){var s=U(cn,{__v:e,h:t});return s.containerInfo=t,s}(ie.prototype=new F).__a=function(e){var t=this,s=Dt(t.__v),i=t.l.get(e);return i[0]++,function(o){var l=function(){t.props.revealOrder?(i.push(o),Et(t,e,i)):o()};s?s(l):l()}},ie.prototype.render=function(e){this.i=null,this.l=new Map;var t=j(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var s=t.length;s--;)this.l.set(t[s],this.i=[1,0,this.i]);return e.children},ie.prototype.componentDidUpdate=ie.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,s){Et(e,s,t)})};var wt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,un=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,mn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,pn=/[A-Z0-9]/g,hn=typeof document<"u",fn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function _n(e,t,s){return t.__k==null&&(t.textContent=""),q(e,t),typeof s=="function"&&s(),e?e.__c:null}function gn(e,t,s){return Je(e,t),typeof s=="function"&&s(),e?e.__c:null}F.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(F.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Rt=D.event;function vn(){}function Cn(){return this.cancelBubble}function bn(){return this.defaultPrevented}D.event=function(e){return Rt&&(e=Rt(e)),e.persist=vn,e.isPropagationStopped=Cn,e.isDefaultPrevented=bn,e.nativeEvent=e};var Oe,Nn={enumerable:!1,configurable:!0,get:function(){return this.class}},Lt=D.vnode;D.vnode=function(e){typeof e.type=="string"&&(function(t){var s=t.props,i=t.type,o={},l=i.indexOf("-")===-1;for(var a in s){var d=s[a];if(!(a==="value"&&"defaultValue"in s&&d==null||hn&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var r=a.toLowerCase();a==="defaultValue"&&"value"in s&&s.value==null?a="value":a==="download"&&d===!0?d="":r==="translate"&&d==="no"?d=!1:r[0]==="o"&&r[1]==="n"?r==="ondoubleclick"?a="ondblclick":r!=="onchange"||i!=="input"&&i!=="textarea"||fn(s.type)?r==="onfocus"?a="onfocusin":r==="onblur"?a="onfocusout":mn.test(a)&&(a=r):r=a="oninput":l&&un.test(a)?a=a.replace(pn,"-$&").toLowerCase():d===null&&(d=void 0),r==="oninput"&&o[a=r]&&(a="oninputCapture"),o[a]=d}}i=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=j(s.children).forEach(function(u){u.props.selected=o.value.indexOf(u.props.value)!=-1})),i=="select"&&o.defaultValue!=null&&(o.value=j(s.children).forEach(function(u){u.props.selected=o.multiple?o.defaultValue.indexOf(u.props.value)!=-1:o.defaultValue==u.props.value})),s.class&&!s.className?(o.class=s.class,Object.defineProperty(o,"className",Nn)):(s.className&&!s.class||s.class&&s.className)&&(o.class=o.className=s.className),t.props=o})(e),e.$$typeof=wt,Lt&&Lt(e)};var xt=D.__r;D.__r=function(e){xt&&xt(e),Oe=e.__c};var Mt=D.diffed;D.diffed=function(e){Mt&&Mt(e);var t=e.props,s=e.__e;s!=null&&e.type==="textarea"&&"value"in t&&t.value!==s.value&&(s.value=t.value==null?"":t.value),Oe=null};var yn={ReactCurrentDispatcher:{current:{readContext:function(e){return Oe.__n[e.__c].props.value},useCallback:Ee,useContext:ct,useDebugValue:dt,useDeferredValue:vt,useEffect:M,useId:ut,useImperativeHandle:rt,useInsertionEffect:bt,useLayoutEffect:se,useMemo:ae,useReducer:De,useRef:at,useState:x,useSyncExternalStore:_t,useTransition:Ct}}};function Sn(e){return U.bind(null,e)}function de(e){return!!e&&e.$$typeof===wt}function kn(e){return de(e)&&e.type===O}function Tn(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Dn(e){return de(e)?Gt.apply(null,arguments):e}function En(e){return!!e.__k&&(q(null,e),!0)}function wn(e){return e&&(e.base||e.nodeType===1&&e)||null}var Rn=function(e,t){return e(t)},Ln=function(e,t){return e(t)},xn=O,Mn=de,ue={useState:x,useId:ut,useReducer:De,useEffect:M,useLayoutEffect:se,useInsertionEffect:bt,useTransition:Ct,useDeferredValue:vt,useSyncExternalStore:_t,startTransition:gt,useRef:at,useImperativeHandle:rt,useMemo:ae,useCallback:Ee,useContext:ct,useDebugValue:dt,version:"18.3.1",Children:ln,render:_n,hydrate:gn,unmountComponentAtNode:En,createPortal:dn,createElement:U,createContext:qt,createFactory:Sn,cloneElement:Dn,createRef:Ht,Fragment:O,isValidElement:de,isElement:Mn,isFragment:kn,isMemo:Tn,findDOMNode:wn,Component:F,PureComponent:Pe,memo:tn,forwardRef:sn,flushSync:Ln,unstable_batchedUpdates:Rn,StrictMode:xn,Suspense:ce,SuspenseList:ie,lazy:an,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:yn};const In=e=>e;function Pn(e,t=In){const s=ue.useSyncExternalStore(e.subscribe,ue.useCallback(()=>t(e.getState()),[e,t]),ue.useCallback(()=>t(e.getInitialState()),[e,t]));return ue.useDebugValue(s),s}const It=e=>{const t=en(e),s=i=>Pn(t,i);return Object.assign(s,t),s},S=(e=>e?It(e):It)((e,t)=>({sessions:[],scripts:[],terminalCollections:[],currentProjectRoot:null,sessionsLoading:!1,scriptsLoading:!1,terminalCollectionsLoading:!1,sessionsError:null,scriptsError:null,terminalCollectionsError:null,sessionsLoaded:!1,scriptsLoaded:!1,terminalCollectionsLoaded:!1,createSessionDialog:{isOpen:!1,sessionData:null,sessionDataError:null},createScriptDialog:{isOpen:!1,rootPath:null},createTerminalCollectionDialog:{isOpen:!1,rootPath:null},configDialog:{isOpen:!1,configData:null,configDataError:null},tempSessionData:null,tempScriptData:null,tempTerminalCollectionData:null,currentSession:null,isEditDialogOpen:!1,isDeleteDialogOpen:!1,currentScript:null,isScriptDeleteDialogOpen:!1,isScriptEditDialogOpen:!1,currentTerminalCollection:null,isTerminalCollectionDeleteDialogOpen:!1,isTerminalCollectionEditDialogOpen:!1,newlyCreatedSessionId:null,showSessionCreatedFeedback:!1,newlyCreatedScriptId:null,showScriptCreatedFeedback:!1,newlyCreatedTerminalCollectionId:null,showTerminalCollectionCreatedFeedback:!1,setSessions:s=>{console.log("Zustand: setSessions called with:",s),e({sessions:s})},setScripts:s=>e({scripts:s}),setTerminalCollections:s=>e({terminalCollections:s}),addSession:s=>e(i=>({sessions:[...i.sessions,s]})),removeSession:s=>e(i=>({sessions:i.sessions.filter(o=>o.id!==s)})),updateSession:s=>e(i=>({sessions:i.sessions.map(o=>o.id===s.id?s:o)})),addScript:s=>e(i=>({scripts:[...i.scripts,s]})),removeScript:s=>e(i=>({scripts:i.scripts.filter(o=>o.id!==s)})),updateScript:s=>e(i=>{console.log("Zustand: updateScript called with:",s),console.log("Zustand: Current scripts:",i.scripts);const o=i.scripts.map(l=>l.id===s.id?s:l);return console.log("Zustand: Updated scripts:",o),{scripts:o}}),addTerminalCollection:s=>e(i=>({terminalCollections:[...i.terminalCollections,s]})),removeTerminalCollection:s=>e(i=>({terminalCollections:i.terminalCollections.filter(o=>o.id!==s)})),updateTerminalCollection:s=>e(i=>{console.log("Zustand: updateTerminalCollection called with:",s),console.log("Zustand: Current terminal collections:",i.terminalCollections);const o=i.terminalCollections.map(l=>l.id===s.id?s:l);return console.log("Zustand: Updated terminal collections:",o),{terminalCollections:o}}),setCurrentProjectRoot:s=>{console.log("Zustand: setCurrentProjectRoot called with:",s),e({currentProjectRoot:s})},setSessionsLoading:s=>e({sessionsLoading:s}),setScriptsLoading:s=>e({scriptsLoading:s}),setTerminalCollectionsLoading:s=>e({terminalCollectionsLoading:s}),setSessionsError:s=>e({sessionsError:s}),setScriptsError:s=>e({scriptsError:s}),setTerminalCollectionsError:s=>e({terminalCollectionsError:s}),setSessionsLoaded:s=>e({sessionsLoaded:s}),setScriptsLoaded:s=>e({scriptsLoaded:s}),setTerminalCollectionsLoaded:s=>e({terminalCollectionsLoaded:s}),setCreateSessionDialog:s=>e(i=>({createSessionDialog:{...i.createSessionDialog,...s}})),openCreateSessionDialog:()=>e(s=>({createSessionDialog:{...s.createSessionDialog,isOpen:!0}})),closeCreateSessionDialog:()=>e(s=>({createSessionDialog:{...s.createSessionDialog,isOpen:!1,sessionData:null,sessionDataError:null}})),setSessionData:s=>e(i=>({createSessionDialog:{...i.createSessionDialog,sessionData:s,sessionDataError:null}})),setSessionDataError:s=>e(i=>({createSessionDialog:{...i.createSessionDialog,sessionDataError:s,sessionData:null}})),setCreateScriptDialog:s=>e(i=>({createScriptDialog:{...i.createScriptDialog,...s}})),openCreateScriptDialog:s=>e(i=>({createScriptDialog:{...i.createScriptDialog,isOpen:!0,rootPath:s||null}})),closeCreateScriptDialog:()=>e(s=>({createScriptDialog:{...s.createScriptDialog,isOpen:!1,rootPath:null}})),setCreateTerminalCollectionDialog:s=>e(i=>({createTerminalCollectionDialog:{...i.createTerminalCollectionDialog,...s}})),openCreateTerminalCollectionDialog:s=>e(i=>({createTerminalCollectionDialog:{...i.createTerminalCollectionDialog,isOpen:!0,rootPath:s||null}})),closeCreateTerminalCollectionDialog:()=>e(s=>({createTerminalCollectionDialog:{...s.createTerminalCollectionDialog,isOpen:!1,rootPath:null}})),setConfigDialog:s=>e(i=>({configDialog:{...i.configDialog,...s}})),openConfigDialog:()=>e(s=>({configDialog:{...s.configDialog,isOpen:!0}})),closeConfigDialog:()=>e(s=>({configDialog:{...s.configDialog,isOpen:!1,configData:null,configDataError:null}})),setConfigData:s=>{console.log("Store: setConfigData called with",s),e(i=>({configDialog:{...i.configDialog,configData:s,configDataError:null}}))},setConfigDataError:s=>{console.log("Store: setConfigDataError called with",s),e(i=>({configDialog:{...i.configDialog,configDataError:s,configData:null}}))},setTempSessionData:s=>e({tempSessionData:s}),addTempSessionWithId:s=>e(i=>{if(i.tempSessionData){const o={...i.tempSessionData,id:s};return{sessions:[...i.sessions,o],tempSessionData:null}}return i}),setTempScriptData:s=>e({tempScriptData:s}),addTempScriptWithId:s=>e(i=>{if(i.tempScriptData){const o={...i.tempScriptData,id:s};return{scripts:[...i.scripts,o],tempScriptData:null}}return i}),setTempTerminalCollectionData:s=>e({tempTerminalCollectionData:s}),addTempTerminalCollectionWithId:s=>e(i=>{if(i.tempTerminalCollectionData){const o={...i.tempTerminalCollectionData,id:s};return{terminalCollections:[...i.terminalCollections,o],tempTerminalCollectionData:null}}return i}),setCurrentSession:s=>e({currentSession:s}),openEditDialog:s=>e({currentSession:s,isEditDialogOpen:!0,isDeleteDialogOpen:!1}),openDeleteDialog:s=>e({currentSession:s,isDeleteDialogOpen:!0,isEditDialogOpen:!1}),closeAllDialogs:()=>e({isEditDialogOpen:!1,isDeleteDialogOpen:!1,isScriptDeleteDialogOpen:!1,isScriptEditDialogOpen:!1,isTerminalCollectionDeleteDialogOpen:!1,isTerminalCollectionEditDialogOpen:!1,currentSession:null,currentScript:null,currentTerminalCollection:null}),setCurrentScript:s=>e({currentScript:s}),openScriptDeleteDialog:s=>e({currentScript:s,isScriptDeleteDialogOpen:!0}),openScriptEditDialog:s=>e({currentScript:s,isScriptEditDialogOpen:!0}),setCurrentTerminalCollection:s=>e({currentTerminalCollection:s}),openTerminalCollectionDeleteDialog:s=>e({currentTerminalCollection:s,isTerminalCollectionDeleteDialogOpen:!0}),openTerminalCollectionEditDialog:s=>e({currentTerminalCollection:s,isTerminalCollectionEditDialogOpen:!0}),setNewlyCreatedSessionId:s=>e({newlyCreatedSessionId:s}),displaySessionCreatedFeedback:s=>e({newlyCreatedSessionId:s,showSessionCreatedFeedback:!0}),hideSessionCreatedFeedback:()=>e({newlyCreatedSessionId:null,showSessionCreatedFeedback:!1}),setNewlyCreatedScriptId:s=>e({newlyCreatedScriptId:s}),displayScriptCreatedFeedback:s=>e({newlyCreatedScriptId:s,showScriptCreatedFeedback:!0}),hideScriptCreatedFeedback:()=>e({newlyCreatedScriptId:null,showScriptCreatedFeedback:!1}),setNewlyCreatedTerminalCollectionId:s=>e({newlyCreatedTerminalCollectionId:s}),displayTerminalCollectionCreatedFeedback:s=>e({newlyCreatedTerminalCollectionId:s,showTerminalCollectionCreatedFeedback:!0}),hideTerminalCollectionCreatedFeedback:()=>e({newlyCreatedTerminalCollectionId:null,showTerminalCollectionCreatedFeedback:!1}),dispatchEvent:s=>{console.log("Dispatching UI event:",s)},isLoading:s=>{const i=t();switch(s){case"sessions":return i.sessionsLoading;case"scripts":return i.scriptsLoading;case"terminalCollections":return i.terminalCollectionsLoading}},hasError:s=>{const i=t();switch(s){case"sessions":return!!i.sessionsError;case"scripts":return!!i.scriptsError;case"terminalCollections":return!!i.terminalCollectionsError}},isLoaded:s=>{const i=t();switch(s){case"sessions":return i.sessionsLoaded;case"scripts":return i.scriptsLoaded;case"terminalCollections":return i.terminalCollectionsLoaded}},needsData:s=>{const i=t();switch(s){case"sessions":return!i.sessionsLoaded&&!i.sessionsLoading;case"scripts":return!i.scriptsLoaded&&!i.scriptsLoading;case"terminalCollections":return!i.terminalCollectionsLoaded&&!i.terminalCollectionsLoading}}}));function On({sessions:e,isLoading:t,onEvent:s}){const[i,o]=x(""),{currentProjectRoot:l,newlyCreatedSessionId:a,showSessionCreatedFeedback:d,hideSessionCreatedFeedback:r}=S();console.log("SessionList: Received sessions:",e),console.log("SessionList: isLoading:",t),console.log("SessionList: sessions.length:",e.length),console.log("SessionList: sessions type:",typeof e),console.log("SessionList: sessions is array:",Array.isArray(e)),console.log("SessionList: currentProjectRoot:",l),M(()=>{if(d&&a){const N=setTimeout(()=>{r()},3e3);return()=>clearTimeout(N)}},[d,a,r]);const u=N=>{const p=N.target,_=p.dataset.action,m=p.dataset.sessionId;if(_)switch(_){case"create-session":s({type:"CREATE_SESSION"});break;case"resume-session":m&&s({type:"RESUME_SESSION",payload:{id:m}});break;case"edit-session":m&&s({type:"EDIT_SESSION",payload:{id:m}});break;case"delete-session":m&&s({type:"DELETE_SESSION",payload:{id:m}});break;case"export-session":m&&s({type:"EXPORT_SESSION",payload:{id:m}});break}},h=e.filter(N=>N.name.toLowerCase().includes(i.toLowerCase()));console.log("SessionList: filteredSessions:",h),console.log("SessionList: filteredSessions.length:",h.length);const b=(N=>{const p={};return N.forEach(_=>{const m=_.projectRoot;p[m]||(p[m]=[]),p[m].push(_)}),p})(h),E=Object.entries(b).sort(([N],[p])=>{const _=N===l,m=p===l;return _&&!m?-1:!_&&m?1:0}).map(([N,p])=>{const _=N.split("/").pop()||N,m=l===N,g=a&&p.some(y=>y.id===a);return{id:`group-${N}`,defaultOpen:m||!!g,title:n("div",{className:"accordion-title-content",children:[n("span",{className:"project-name",children:_}),n("span",{className:"session-count",children:["(",p.length," session",p.length!==1?"s":"",")"]}),g&&d&&n("span",{className:"new-session-indicator",children:"✨ New!"}),n("span",{className:"accordion-title-path",children:N})]}),content:n("div",{className:"session-group-content",children:n("div",{className:"session-group-grid",children:p.map(y=>n(Qt,{session:y,isNewlyCreated:y.id===a&&d},y.id))})})}});return t?n("div",{className:"session-list",children:[n("div",{className:"session-list-header",children:[n("h2",{children:"Sessions"}),n("div",{className:"session-list-actions",children:[n("div",{className:"search-container",children:n("input",{type:"text",placeholder:"Search sessions...",className:"search-input",disabled:!0})}),n("button",{className:"btn-primary",disabled:!0,children:"Create Session"})]})]}),n("div",{className:"session-list-content",children:n("div",{className:"session-group-grid",children:Array.from({length:3}).map((N,p)=>n("div",{className:"skeleton-session-card",children:[n("div",{className:"skeleton-header",children:[n("div",{className:"skeleton-title-section",children:n("div",{className:"skeleton-title"})}),n("div",{className:"skeleton-actions",children:[n("div",{className:"skeleton-resume-btn"}),n("div",{className:"skeleton-action-btn"}),n("div",{className:"skeleton-action-btn"}),n("div",{className:"skeleton-action-btn"})]})]}),n("div",{className:"skeleton-content",children:[n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-timestamps",children:[n("div",{className:"skeleton-timestamp",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-timestamp",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]})]})]})]},`session-card-loading-${p}`))})})]}):n("div",{className:"session-list",onClick:u,children:[n("div",{className:"session-list-header",children:[n("h2",{children:"Sessions"}),n("div",{className:"session-list-actions",children:[n("div",{className:"search-container",children:n("input",{type:"text",placeholder:"Search sessions...",className:"search-input",value:i,onInput:N=>o(N.target?.value||"")})}),n("button",{className:"btn-primary","data-action":"create-session",children:"Create Session"})]})]}),n("div",{className:"session-list-content",children:h.length===0?n(K,{variant:"outlined",className:"empty-state",children:n(X,{children:n("div",{className:"empty-state-content",children:[n("h3",{children:i?"No sessions match your search":"No sessions found"}),n("p",{children:i?`No sessions found matching "${i}". Try a different search term.`:"Create your first session to get started with CodeState."}),!i&&n("button",{className:"btn-primary","data-action":"create-session",children:"Create Your First Session"})]})})}):n("div",{className:"session-accordion-container",children:n(xe,{items:E})})})]})}function $n({script:e,isNewlyCreated:t=!1}){const s=()=>e.executionMode||"same-terminal";return n(K,{variant:"elevated",className:`script-card ${t?"newly-created":""}`,children:[n(Le,{children:n("div",{className:"script-card-header",children:[n("div",{className:"script-title",children:n("h3",{children:e.name})}),n("div",{className:"script-actions",children:[n("button",{className:"btn-primary btn-sm","data-action":"run-script","data-script-id":e.id,title:"Run script",children:"▶️ Run"}),n("button",{className:"btn-ghost btn-sm","data-action":"edit-script","data-script-id":e.id,title:"Edit script",children:"✏️"}),n("button",{className:"btn-ghost btn-sm","data-action":"delete-script","data-script-id":e.id,title:"Delete script",children:"🗑️"})]})]})}),n(X,{children:n("div",{className:"script-details",children:[n("div",{className:"script-detail",children:[n("span",{className:"detail-label",children:"Mode:"}),n("span",{className:"detail-value",children:s()})]}),n("div",{className:"script-detail",children:[n("span",{className:"detail-label",children:"Script Commands:"}),n("span",{className:"detail-value",children:e.commands&&e.commands.length>0?e.commands.map((i,o)=>n("span",{children:[n("b",{children:i.name}),": ",i.command,o<(e.commands?.length||0)-1?", ":"",o<(e.commands?.length||0)-1?n("br",{}):""]},o)):"-"})]}),n("div",{className:"script-detail",children:[n("span",{className:"detail-label",children:"Lifecycle:"}),n("span",{className:"detail-value",children:e.lifecycle&&e.lifecycle.length>0?e.lifecycle.join(", "):"-"})]}),n("div",{className:"script-detail",children:[n("span",{className:"detail-label",children:"Close Terminal:"}),n("span",{className:"detail-value",children:e.closeTerminalAfterExecution?"Yes":"No"})]})]})})]})}function An({scripts:e,isLoading:t,onEvent:s}){const[i,o]=x(""),{currentProjectRoot:l,newlyCreatedScriptId:a,showScriptCreatedFeedback:d,hideScriptCreatedFeedback:r,openCreateScriptDialog:u}=S();console.log("ScriptList: Received scripts:",e),console.log("ScriptList: isLoading:",t),console.log("ScriptList: scripts.length:",e.length),console.log("ScriptList: currentProjectRoot:",l),M(()=>{if(d&&a){const p=setTimeout(()=>{r()},3e3);return()=>clearTimeout(p)}},[d,a,r]);const h=p=>{const _=p.target,m=_.dataset.action,g=_.dataset.scriptId;if(m)switch(m){case"create-script":u(l||"");break;case"run-script":g&&s({type:"RUN_SCRIPT",payload:{id:g}});break;case"edit-script":g&&s({type:"EDIT_SCRIPT",payload:{id:g}});break;case"delete-script":g&&s({type:"DELETE_SCRIPT",payload:{id:g}});break}},c=e.filter(p=>p.name.toLowerCase().includes(i.toLowerCase()));console.log("ScriptList: filteredScripts:",c),console.log("ScriptList: filteredScripts.length:",c.length);const C=(p=>{const _={};return p.forEach(m=>{const g=m.rootPath;_[g]||(_[g]=[]),_[g].push(m)}),_})(c),N=Object.entries(C).sort(([p],[_])=>{const m=p===l,g=_===l;return m&&!g?-1:!m&&g?1:0}).map(([p,_])=>{const m=p.split("/").pop()||p,g=l===p,y=a&&_.some(w=>w.id===a);return{id:`group-${p}`,defaultOpen:g||!!y,title:n("div",{className:"accordion-title-content",children:[n("span",{className:"project-name",children:m}),n("span",{className:"script-count",children:["(",_.length," script",_.length!==1?"s":"",")"]}),y&&d&&n("span",{className:"new-script-indicator",children:"✨ New!"}),n("span",{className:"accordion-title-path",children:p})]}),content:n("div",{className:"script-group-content",children:n("div",{className:"script-group-grid",children:_.map(w=>n($n,{script:w,isNewlyCreated:w.id===a&&d},w.id))})})}});return t?n("div",{className:"script-list",children:[n("div",{className:"script-list-header",children:[n("h2",{children:"Scripts"}),n("div",{className:"script-list-actions",children:[n("div",{className:"search-container",children:n("input",{type:"text",placeholder:"Search scripts...",className:"search-input",disabled:!0})}),n("button",{className:"btn-primary",disabled:!0,children:"Create Script"})]})]}),n("div",{className:"script-list-content",children:n("div",{className:"script-group-grid",children:Array.from({length:3}).map((p,_)=>n("div",{className:"skeleton-card",children:[n("div",{className:"skeleton-header",children:[n("div",{className:"skeleton-title-section",children:[n("div",{className:"skeleton-title"}),n("div",{className:"skeleton-id"})]}),n("div",{className:"skeleton-run-button"}),n("div",{className:"skeleton-button"}),n("div",{className:"skeleton-button"})]}),n("div",{className:"skeleton-content",children:[n("div",{className:"skeleton-info",children:[n("div",{className:"skeleton-info-row",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-info-row",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-info-row",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-info-row",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]})]}),n("div",{className:"skeleton-details",children:[n("div",{className:"skeleton-section",children:[n("div",{className:"skeleton-section-label"}),n("div",{className:"skeleton-commands-list",children:[n("div",{className:"skeleton-command-item",children:[n("div",{className:"skeleton-command-name"}),n("div",{className:"skeleton-command-script"})]}),n("div",{className:"skeleton-command-item",children:[n("div",{className:"skeleton-command-name"}),n("div",{className:"skeleton-command-script"})]})]})]}),n("div",{className:"skeleton-section",children:[n("div",{className:"skeleton-section-label"}),n("div",{className:"skeleton-section-value"})]})]})]})]},`script-card-loading-${_}`))})})]}):n("div",{className:"script-list",onClick:h,children:[n("div",{className:"script-list-header",children:[n("h2",{children:"Scripts"}),n("div",{className:"script-list-actions",children:[n("div",{className:"search-container",children:n("input",{type:"text",placeholder:"Search scripts...",className:"search-input",value:i,onInput:p=>o(p.target.value)})}),n("button",{className:"btn-primary","data-action":"create-script",children:"Create Script"})]})]}),n("div",{className:"script-list-content",children:c.length===0?n(K,{variant:"outlined",className:"empty-state",children:n(X,{children:n("div",{className:"empty-state-content",children:[n("h3",{children:"No scripts found"}),n("p",{children:i?`No scripts match "${i}". Try a different search term.`:"Create your first script to automate your workflow."}),!i&&n("button",{className:"btn-primary","data-action":"create-script",children:"Create Your First Script"})]})})}):n(xe,{items:N})})]})}function Fn({terminalCollections:e,isLoading:t,onEvent:s}){const{currentProjectRoot:i,newlyCreatedTerminalCollectionId:o,showTerminalCollectionCreatedFeedback:l,hideTerminalCollectionCreatedFeedback:a,openCreateTerminalCollectionDialog:d,scripts:r}=S();console.log("TerminalCollectionList: Received scripts:",r),console.log("TerminalCollectionList: Received terminal collections:",e),console.log("TerminalCollectionList: isLoading:",t),console.log("TerminalCollectionList: currentProjectRoot:",i);const u=f=>{console.log("TerminalCollectionList: scriptsArray:",f);const E=f.map(_=>_.id),N=r.filter(_=>E.includes(_.id));console.log("TerminalCollectionList: scriptData:",N);const p=N.map(_=>n(O,{children:[n("b",{children:_.name}),": ",_?.commands?.map(m=>n(O,{children:[n("br",{}),m.command]}))]})).filter(Boolean);return console.log("TerminalCollectionList: scriptNames:",p),p};M(()=>{if(l&&o){const f=setTimeout(()=>{a()},3e3);return()=>clearTimeout(f)}},[l,o,a]);const h=()=>{d(i||"")},c=f=>{s({type:"EXECUTE_TERMINAL_COLLECTION",payload:{id:f}})},b=f=>{s({type:"DELETE_TERMINAL_COLLECTION",payload:{id:f}})},C=f=>{s({type:"EDIT_TERMINAL_COLLECTION",payload:{id:f}})};return t?n("div",{className:"terminal-collection-list",children:[n("div",{className:"terminal-collection-list-header",children:[n("h2",{children:"Terminal Collections"}),n("button",{className:"btn-primary",disabled:!0,children:"Create Terminal Collection"})]}),n("div",{className:"terminal-collection-list-content",children:n("div",{className:"terminal-collection-grid",children:Array.from({length:3}).map((f,E)=>n("div",{className:"skeleton-card",children:[n("div",{className:"skeleton-header",children:n("div",{className:"skeleton-title"})}),n("div",{className:"skeleton-content",children:[n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]}),n("div",{className:"skeleton-detail",children:[n("div",{className:"skeleton-label"}),n("div",{className:"skeleton-value"})]})]}),n("div",{className:"skeleton-footer",children:[n("div",{className:"skeleton-button"}),n("div",{className:"skeleton-button"}),n("div",{className:"skeleton-button"})]})]},`terminal-collection-card-loading-${E}`))})})]}):n("div",{className:"terminal-collection-list",children:[n("div",{className:"terminal-collection-list-header",children:[n("h2",{children:"Terminal Collections"}),n("button",{className:"btn-primary",onClick:h,children:"Create Terminal Collection"})]}),n("div",{className:"terminal-collection-list-content",children:e.length===0?n(K,{variant:"outlined",className:"empty-state",children:n(X,{children:n("div",{className:"empty-state-content",children:[n("h3",{children:"No terminal collections found"}),n("p",{children:"Create your first terminal collection to manage multiple terminals."}),n("button",{className:"btn-primary",onClick:h,children:"Create Your First Terminal Collection"})]})})}):n("div",{className:"terminal-collection-grid",children:e.map(f=>n(K,{variant:"elevated",className:`terminal-collection-card ${f.id===o&&l?"newly-created":""}`,children:[n(Le,{children:n("div",{className:"terminal-collection-card-header",children:[n("div",{className:"terminal-collection-title",children:n("h3",{children:f.name})}),n("div",{className:"terminal-collection-actions",children:[n("button",{className:"btn-primary btn-sm",onClick:()=>c(f.id),children:"Execute"}),n("button",{className:"btn-secondary btn-sm",onClick:()=>C(f.id),children:"Edit"}),n("button",{className:"btn-ghost btn-sm",onClick:()=>b(f.id),children:"Delete"})]})]})}),n(X,{children:n("div",{className:"terminal-collection-details",children:[n("div",{className:"terminal-collection-detail",children:[n("span",{className:"detail-label",children:"Root:"}),n("span",{className:"detail-value",children:f.rootPath})]}),n("div",{className:"terminal-collection-detail",children:[n("span",{className:"detail-label",children:"Scripts:"}),n("span",{className:"detail-value",children:f.scripts.length>0?u(f.scriptReferences):"No scripts"})]}),n("div",{className:"terminal-collection-detail",children:[n("span",{className:"detail-label",children:"Lifecycle:"}),n("span",{className:"detail-value",children:f.lifecycle.join(", ")})]})]})})]},f.id))})})]})}function Un({sessions:e,scripts:t,terminalCollections:s,sessionsLoading:i,scriptsLoading:o,terminalCollectionsLoading:l,initializeSessions:a,initializeScripts:d,initializeTerminalCollections:r,onEvent:u}){const[h,c]=x("sessions");M(()=>{switch(h){case"sessions":a();break;case"scripts":d();break;case"terminal-collections":r();break}},[h,a,d,r]);const b=[{id:"sessions",label:`Sessions (${e.length})`,content:n(On,{sessions:e,isLoading:i,onEvent:u})},{id:"scripts",label:`Scripts (${t.length})`,content:n(An,{scripts:t,isLoading:o,onEvent:u})},{id:"terminal-collections",label:`Terminal Collections (${s.length})`,content:n(Fn,{terminalCollections:s,isLoading:l,onEvent:u})}];return n("div",{className:"main-tabs",children:n(Jt,{items:b,variant:"pills",className:"main-tabs-container",activeTab:h,onTabChange:c})})}function me({isOpen:e,title:t,children:s,onClose:i,size:o="md",showCloseButton:l=!0}){return M(()=>{if(!e)return;const d=r=>{r.key==="Escape"&&i()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,i]),M(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e?n("div",{className:"dialog-backdrop",onClick:d=>{d.target===d.currentTarget&&i()},children:n("div",{className:`dialog dialog-${o}`,children:[n("div",{className:"dialog-header",children:[n("h2",{className:"dialog-title",children:t}),l&&n("button",{className:"dialog-close-button",onClick:i,"aria-label":"Close dialog",children:n("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),n("div",{className:"dialog-content",children:s})]})}):null}function Pt({isOpen:e,onClose:t,provider:s,sessionData:i,sessionDataError:o,editSession:l}){console.log("propSessionData",i);const[a,d]=x("basic"),[r,u]=x({name:"",projectRoot:"",tags:[],notes:"",selectedScripts:[],selectedTerminalCollections:[]}),[h,c]=x(""),[b,C]=x(!1),[f,E]=x(null),N=S(v=>v.scripts),p=S(v=>v.terminalCollections),_=S(v=>v.setTempSessionData);M(()=>{i&&u(v=>({...v,projectRoot:i.projectRoot,name:i.name||v.name}))},[i]),M(()=>{l&&u({name:l.name,projectRoot:l.projectRoot,tags:l.tags||[],notes:l.notes||"",selectedScripts:l.scripts||[],selectedTerminalCollections:l.terminalCollections||[]})},[l]);const m=()=>{const v=["basic","scripts","terminal-collections","review"],T=v.indexOf(a);T<v.length-1&&d(v[T+1])},g=()=>{const v=["basic","scripts","terminal-collections","review"],T=v.indexOf(a);T>0&&d(v[T-1])},y=()=>{switch(a){case"basic":return r.name.trim()!=="";case"scripts":case"terminal-collections":return!0;case"review":return!1;default:return!1}},w=async v=>{if(v.preventDefault(),a==="review"&&r.name.trim()){C(!0),E(null);try{const T={...i,name:r.name,tags:r.tags,notes:r.notes,scripts:r.selectedScripts,terminalCollections:r.selectedTerminalCollections,updatedAt:new Date},I={id:l?.id||"",name:r.name,projectRoot:i?.projectRoot||l?.projectRoot||"",createdAt:l?.createdAt||new Date,updatedAt:new Date,tags:r.tags,notes:r.notes,files:i?.files||l?.files||[],git:i?.git||l?.git||{branch:"",commit:"",isDirty:!1},extensions:i?.extensions||l?.extensions||{},terminalCommands:i?.terminalCommands||l?.terminalCommands||[],terminalCollections:r.selectedTerminalCollections,scripts:r.selectedScripts};_(I),l?s.sendMessage("codestate.session.update",{id:l.id,updates:{name:r.name,tags:r.tags,notes:r.notes,scripts:r.selectedScripts,terminalCollections:r.selectedTerminalCollections}}):s.sendMessage("codestate.session.create",{sessionData:T})}catch(T){console.error("Failed to create/update session:",T),E("Failed to create/update session"),C(!1)}}},k=()=>{u({name:"",projectRoot:"",tags:[],notes:"",selectedScripts:[],selectedTerminalCollections:[]}),c(""),d("basic"),C(!1),E(null),t()},$=()=>{const v=h.trim();v&&!r.tags.includes(v)&&(u(T=>({...T,tags:[...T.tags,v]})),c(""))},W=v=>{u(T=>({...T,tags:T.tags.filter(I=>I!==v)}))},J=v=>{v.key==="Enter"&&(v.preventDefault(),$())},P=v=>{u(T=>({...T,selectedScripts:T.selectedScripts.includes(v)?T.selectedScripts.filter(I=>I!==v):[...T.selectedScripts,v]}))},H=v=>r.selectedScripts.includes(v),Ft=v=>{u(T=>({...T,selectedTerminalCollections:T.selectedTerminalCollections.includes(v)?T.selectedTerminalCollections.filter(I=>I!==v):[...T.selectedTerminalCollections,v]}))},B=v=>r.selectedTerminalCollections.includes(v),pe=()=>{const v=[{key:"basic",label:"Basic Details"},{key:"scripts",label:"Scripts"},{key:"terminal-collections",label:"Terminal Collections"},{key:"review",label:"Review"}],T=v.findIndex(I=>I.key===a);return n("div",{className:"step-indicator",children:v.map((I,Ut)=>n("div",{className:`step ${a===I.key?"active":""} ${T>Ut?"completed":""}`,children:[n("div",{className:"step-number",children:Ut+1}),n("div",{className:"step-label",children:I.label})]},I.key))})},he=()=>n("div",{className:"step-content",children:[n("div",{className:"form-group",children:[n("label",{htmlFor:"session-name",className:"form-label",children:"Session Name *"}),n("input",{id:"session-name",type:"text",className:"form-input",value:r.name,onInput:v=>u(T=>({...T,name:v.target?.value||""})),placeholder:"Enter session name",required:!0,autoFocus:!0})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"project-root",className:"form-label",children:"Project Root"}),n("input",{id:"project-root",type:"text",className:"form-input",value:r.projectRoot,onInput:v=>u(T=>({...T,projectRoot:v.target?.value||""})),placeholder:"/path/to/your/project",readOnly:!0})]}),(i?.git||l?.git)&&n("div",{className:"form-group",children:[n("label",{className:"form-label",children:"Git Information"}),n("div",{className:"git-info",children:[n("div",{className:"git-info-item",children:[n("span",{className:"git-label",children:"Branch:"}),n("span",{className:"git-value",children:(i?.git||l?.git)?.branch})]}),n("div",{className:"git-info-item",children:[n("span",{className:"git-label",children:"Commit:"}),n("span",{className:"git-value",children:(i?.git||l?.git)?.commit})]}),n("div",{className:"git-info-item",children:[n("span",{className:"git-label",children:"Status:"}),n("span",{className:`git-value ${(i?.git||l?.git)?.isDirty?"dirty":"clean"}`,children:(i?.git||l?.git)?.isDirty?"Uncommitted changes":"Clean"})]})]})]}),(i?.files&&i.files.length>0||l?.files&&l.files.length>0)&&n("div",{className:"form-group",children:[n("label",{className:"form-label",children:["Open Files (",(i?.files||l?.files||[]).length,")"]}),n("div",{className:"files-list",children:[(i?.files||l?.files||[]).slice(0,5).map((v,T)=>n("div",{className:"file-item",children:[n("span",{className:"file-path",children:v.path}),v.cursor&&n("span",{className:"file-cursor",children:["Line ",v.cursor.line,", Col ",v.cursor.column]})]},T)),(i?.files||l?.files||[]).length>5&&n("div",{className:"file-item more-files",children:["+",(i?.files||l?.files||[]).length-5," more files"]})]})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"tags",className:"form-label",children:"Tags"}),n("div",{className:"tag-input-container",children:[n("input",{id:"tags",type:"text",className:"form-input",value:h,onInput:v=>c(v.target?.value||""),onKeyPress:J,placeholder:"Add tags (press Enter to add)"}),n("button",{type:"button",className:"btn-secondary btn-sm",onClick:$,children:"Add"})]}),r.tags.length>0&&n("div",{className:"tag-list",children:r.tags.map((v,T)=>n("span",{className:"tag",children:[v,n("button",{type:"button",className:"tag-remove",onClick:()=>W(v),"aria-label":`Remove ${v} tag`,children:"×"})]},T))})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"notes",className:"form-label",children:"Notes"}),n("textarea",{id:"notes",className:"form-textarea",value:r.notes,onInput:v=>u(T=>({...T,notes:v.target?.value||""})),placeholder:"Add any notes about this session",rows:3})]})]}),fe=()=>n("div",{className:"step-content",children:n("div",{className:"form-group",children:[n("label",{className:"form-label",children:"Select Scripts"}),n("p",{className:"step-description",children:"Choose which scripts to include in this session."}),N.length===0?n("div",{className:"empty-state",children:n("p",{children:"No scripts available. Create scripts first to include them in sessions."})}):n("div",{className:"selection-list",children:N.map(v=>n("div",{className:"selection-item",children:n("label",{className:"selection-label",children:[n("input",{type:"checkbox",checked:H(v.id),onChange:()=>P(v.id),className:"selection-checkbox"}),n("div",{className:"selection-content",children:[n("div",{className:"selection-title",children:v.name}),n("div",{className:"selection-details",children:[n("span",{className:"selection-path",children:v.rootPath}),v.lifecycle&&v.lifecycle.length>0&&n("span",{className:"selection-lifecycle",children:["Lifecycle: ",v.lifecycle.join(", ")]})]})]})]})},v.id))})]})}),Jn=()=>n("div",{className:"step-content",children:n("div",{className:"form-group",children:[n("label",{className:"form-label",children:"Select Terminal Collections"}),n("p",{className:"step-description",children:"Choose which terminal collections to include in this session."}),p.length===0?n("div",{className:"empty-state",children:n("p",{children:"No terminal collections available. Create terminal collections first to include them in sessions."})}):n("div",{className:"selection-list",children:p.map(v=>n("div",{className:"selection-item",children:n("label",{className:"selection-label",children:[n("input",{type:"checkbox",checked:B(v.id),onChange:()=>Ft(v.id),className:"selection-checkbox"}),n("div",{className:"selection-content",children:[n("div",{className:"selection-title",children:v.name}),n("div",{className:"selection-details",children:[n("span",{className:"selection-path",children:v.rootPath}),v.lifecycle&&v.lifecycle.length>0&&n("span",{className:"selection-lifecycle",children:["Lifecycle: ",v.lifecycle.join(", ")]}),v.scripts&&v.scripts.length>0&&n("span",{className:"selection-scripts",children:["Scripts: ",v.scripts.length]})]})]})]})},v.id))})]})}),Qn=()=>n("div",{className:"step-content",children:[n("div",{className:"review-section",children:[n("h3",{children:"Session Details"}),n("div",{className:"review-item",children:[n("strong",{children:"Name:"})," ",r.name]}),n("div",{className:"review-item",children:[n("strong",{children:"Project Root:"})," ",r.projectRoot]}),r.tags.length>0&&n("div",{className:"review-item",children:[n("strong",{children:"Tags:"})," ",r.tags.join(", ")]}),r.notes&&n("div",{className:"review-item",children:[n("strong",{children:"Notes:"})," ",r.notes]})]}),r.selectedScripts.length>0&&n("div",{className:"review-section",children:[n("h3",{children:["Selected Scripts (",r.selectedScripts.length,")"]}),r.selectedScripts.map(v=>{const T=N.find(I=>I.id===v);return T?n("div",{className:"review-item",children:[n("strong",{children:T.name})," - ",T.rootPath]},v):null})]}),r.selectedTerminalCollections.length>0&&n("div",{className:"review-section",children:[n("h3",{children:["Selected Terminal Collections (",r.selectedTerminalCollections.length,")"]}),r.selectedTerminalCollections.map(v=>{const T=p.find(I=>I.id===v);return T?n("div",{className:"review-item",children:[n("strong",{children:T.name})," - ",T.rootPath]},v):null})]}),f&&n("div",{className:"form-group",children:n("div",{className:"error-message",children:f})})]});return n(me,{isOpen:e,title:l?"Edit Session":"Create New Session",onClose:k,size:"lg",children:o?n("div",{className:"error-state",children:[n("p",{className:"error-message",children:["Failed to collect workspace data: ",o]}),n("button",{className:"retry-button",onClick:t,children:"Close"})]}):!i&&!l?n("div",{className:"loading-state",children:[n("div",{className:"loading-spinner"}),n("p",{children:"Collecting workspace data..."})]}):n("div",{className:"create-session-form",children:[pe(),n("form",{onSubmit:w,onKeyDown:v=>{v.key==="Enter"&&a!=="review"&&v.preventDefault()},className:"step-form",children:n("div",{className:"step-content-scrollable",children:[a==="basic"&&he(),a==="scripts"&&fe(),a==="terminal-collections"&&Jn(),a==="review"&&Qn()]})}),n("div",{className:"form-actions",children:[n("button",{type:"button",className:"btn-secondary",onClick:k,children:"Cancel"}),a!=="basic"&&n("button",{type:"button",className:"btn-secondary",onClick:g,children:"Previous"}),a!=="review"?n("button",{type:"button",className:"btn-primary",onClick:m,disabled:!y(),children:"Next"}):n("button",{type:"submit",className:"btn-primary",disabled:!r.name.trim()||b,onClick:w,children:b?l?"Updating...":"Creating...":l?"Update Session":"Create Session"})]})]})})}function Ot({isOpen:e,onClose:t,provider:s,rootPath:i="",editScript:o=null}){const[l,a]=x({name:"",rootPath:i,commands:[{command:"",name:"",priority:1}],lifecycle:["open"],executionMode:"same-terminal",closeTerminalAfterExecution:!1}),[d,r]=x(!1),[u,h]=x(null),c=S(m=>m.setTempScriptData),b=S(m=>m.setCurrentScript);M(()=>{a(o?{name:o.name,rootPath:o.rootPath,commands:o.commands&&o.commands.length>0?o.commands:[{command:"",name:"",priority:1}],lifecycle:o.lifecycle||["open"],executionMode:o.executionMode||"same-terminal",closeTerminalAfterExecution:o.closeTerminalAfterExecution||!1}:{name:"",rootPath:i,commands:[{command:"",name:"",priority:1}],lifecycle:["open"],executionMode:"same-terminal",closeTerminalAfterExecution:!1})},[o,i]);const C=async m=>{if(m.preventDefault(),!l.name.trim()){h("Script name is required");return}if(!l.rootPath.trim()){h("Root path is required");return}r(!0),h(null);try{const g={id:"",name:l.name,rootPath:l.rootPath,commands:l.commands.filter(y=>y.command.trim()&&y.name.trim()),lifecycle:l.lifecycle,executionMode:l.executionMode,closeTerminalAfterExecution:l.closeTerminalAfterExecution};if(c(g),o){const y={...o,name:l.name,rootPath:l.rootPath,commands:l.commands.filter(w=>w.command.trim()&&w.name.trim()),lifecycle:l.lifecycle,executionMode:l.executionMode,closeTerminalAfterExecution:l.closeTerminalAfterExecution};console.log("CreateScriptDialog: Setting current script to:",y),b(y),s.sendMessage("codestate.script.update",{id:o.id,scriptData:l})}else s.sendMessage("codestate.script.create",{scriptData:l})}catch(g){console.error("Failed to create script:",g),h("Failed to create script"),r(!1)}},f=()=>{a({name:"",rootPath:i,commands:[{command:"",name:"",priority:1}],lifecycle:["open"],executionMode:"same-terminal",closeTerminalAfterExecution:!1}),h(null),r(!1),t()},E=()=>{a(m=>({...m,commands:[...m.commands,{command:"",name:"",priority:m.commands.length+1}]}))},N=m=>{a(g=>({...g,commands:g.commands.filter((y,w)=>w!==m)}))},p=(m,g,y)=>{a(w=>({...w,commands:w.commands.map((k,$)=>$===m?{...k,[g]:y}:k)}))},_=m=>{a(g=>({...g,lifecycle:g.lifecycle.includes(m)?g.lifecycle.filter(y=>y!==m):[...g.lifecycle,m]}))};return n(me,{isOpen:e,onClose:f,title:o?"Edit Script":"Create Script",children:n("form",{onSubmit:C,className:"create-script-form",children:[n("div",{className:"form-group",children:[n("label",{htmlFor:"script-name",children:"Script Name *"}),n("input",{id:"script-name",type:"text",value:l.name,onInput:m=>a(g=>({...g,name:m.target.value})),placeholder:"Enter script name",required:!0,disabled:d})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"root-path",children:"Root Path *"}),n("input",{id:"root-path",type:"text",value:l.rootPath,onInput:m=>a(g=>({...g,rootPath:m.target.value})),placeholder:"Enter root path",required:!0,disabled:d})]}),n("div",{className:"form-group",children:[n("label",{children:"Commands"}),n("div",{className:"commands-section",children:[l.commands.map((m,g)=>n("div",{className:"command-row",children:[n("input",{type:"text",value:m.name,onInput:y=>p(g,"name",y.target.value),placeholder:"Command name",disabled:d}),n("input",{type:"text",value:m.command,onInput:y=>p(g,"command",y.target.value),placeholder:"Command",disabled:d}),n("input",{type:"number",value:m.priority,onInput:y=>p(g,"priority",parseInt(y.target.value)||1),placeholder:"Priority",min:"1",disabled:d}),n("button",{type:"button",onClick:()=>N(g),disabled:d||l.commands.length===1,className:"btn-remove",title:"Remove command",children:"❌"})]},g)),n("button",{type:"button",onClick:E,disabled:d,className:"btn-add-command",children:"Add Command"})]})]}),n("div",{className:"form-group",children:[n("label",{children:"Lifecycle Events"}),n("div",{className:"lifecycle-options",children:["open","resume","none"].map(m=>n("label",{className:"checkbox-label",children:[n("input",{type:"checkbox",checked:l.lifecycle.includes(m),onChange:()=>_(m),disabled:d}),m.charAt(0).toUpperCase()+m.slice(1)]},m))})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"execution-mode",children:"Execution Mode"}),n("select",{id:"execution-mode",value:l.executionMode,onChange:m=>a(g=>({...g,executionMode:m.target.value})),disabled:d,children:[n("option",{value:"same-terminal",children:"Same Terminal"}),n("option",{value:"new-terminals",children:"New Terminals"})]})]}),n("div",{className:"form-group",children:n("label",{className:"checkbox-label",children:[n("input",{type:"checkbox",checked:l.closeTerminalAfterExecution,onChange:m=>a(g=>({...g,closeTerminalAfterExecution:m.target.checked})),disabled:d}),"Close Terminal After Execution"]})}),u&&n("div",{className:"error-message",children:u}),n("div",{className:"form-actions",children:[n("button",{type:"button",onClick:f,disabled:d,className:"btn-secondary",children:"Cancel"}),n("button",{type:"submit",disabled:d||!l.name.trim()||!l.rootPath.trim(),className:"btn-primary",children:d?o?"Updating...":"Creating...":o?"Update Script":"Create Script"})]})]})})}function $t({isOpen:e,onClose:t,rootPath:s,editTerminalCollection:i,provider:o}){const{scripts:l,setCurrentTerminalCollection:a,setTempTerminalCollectionData:d}=S(),[r,u]=x({name:"",rootPath:s||"",lifecycle:["open"],scriptReferences:[],closeTerminalAfterExecution:!1}),[h,c]=x(null);M(()=>{u(i?{name:i.name,rootPath:i.rootPath,lifecycle:i.lifecycle,scriptReferences:i.scriptReferences.map(p=>({id:p.id,rootPath:p.rootPath})),closeTerminalAfterExecution:i.closeTerminalAfterExecution||!1}:{name:"",rootPath:s||"",lifecycle:["open"],scriptReferences:[],closeTerminalAfterExecution:!1})},[i,s]);const b=(p,_)=>{u(m=>({...m,[p]:_})),c(null)},C=p=>{const _={id:p.id,rootPath:p.rootPath},m=r.scriptReferences.some(g=>g.id===p.id);u(m?g=>({...g,scriptReferences:g.scriptReferences.filter(y=>y.id!==p.id)}):g=>({...g,scriptReferences:[...g.scriptReferences,_]})),c(null)},f=p=>{if(p.preventDefault(),c(null),!r.name.trim()){c("Please enter a name for the terminal collection.");return}if(r.scriptReferences.length===0){c("Please select at least one script for the terminal collection.");return}if(i){const _={...i,name:r.name,rootPath:r.rootPath,lifecycle:r.lifecycle,scriptReferences:r.scriptReferences,closeTerminalAfterExecution:r.closeTerminalAfterExecution};console.log("CreateTerminalCollectionDialog: Setting current terminal collection to:",_),a(_),o.sendMessage("codestate.terminal-collection.update",{id:i.id,terminalCollectionData:r})}else{const _={id:"",name:r.name,rootPath:r.rootPath,lifecycle:r.lifecycle,scriptReferences:r.scriptReferences,closeTerminalAfterExecution:r.closeTerminalAfterExecution,scripts:[]};d(_),o.sendMessage("codestate.terminal-collection.create",{terminalCollectionData:r})}},E=l.reduce((p,_)=>{const m=_.rootPath;return p[m]||(p[m]=[]),p[m].push(_),p},{}),N=Object.entries(E);return n(me,{isOpen:e,onClose:t,title:i?"Edit Terminal Collection":"Create Terminal Collection",children:n("form",{onSubmit:f,className:"create-terminal-collection-form",children:[h&&n("div",{className:"error-message",style:{color:"red",marginBottom:"1rem",padding:"0.5rem",backgroundColor:"#ffe6e6",border:"1px solid #ff9999",borderRadius:"4px"},children:h}),n("div",{className:"form-group",children:[n("label",{htmlFor:"name",children:"Name"}),n("input",{id:"name",type:"text",value:r.name,onInput:p=>b("name",p.target.value),placeholder:"Enter terminal collection name",required:!0,className:"terminal-input"})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"rootPath",children:"Root Path"}),n("input",{id:"rootPath",type:"text",value:r.rootPath,onInput:p=>b("rootPath",p.target.value),placeholder:"Enter root path",required:!0,className:"terminal-input"})]}),n("div",{className:"form-group",children:[n("label",{children:"Lifecycle Events"}),n("div",{className:"checkbox-group",children:["open","resume","none"].map(p=>n("label",{className:"checkbox-label",children:[n("input",{type:"checkbox",checked:r.lifecycle.includes(p),onChange:_=>{_.currentTarget.checked?b("lifecycle",[...r.lifecycle,p]):b("lifecycle",r.lifecycle.filter(m=>m!==p))},className:"terminal-checkbox"}),n("span",{children:p})]},p))})]}),n("div",{className:"form-group",children:[n("label",{children:"Script References"}),n("div",{className:"script-selection",children:N.length===0?n("p",{className:"no-scripts",children:"No scripts available"}):n(xe,{items:N.map(([p,_])=>{const m=p.split("/").pop()||p;return{id:`script-group-${p}`,defaultOpen:p===r.rootPath,title:n("div",{className:"accordion-title-content",children:[n("span",{className:"project-name",children:m}),n("span",{className:"script-count",children:["(",_.length," script",_.length!==1?"s":"",")"]}),n("span",{className:"accordion-title-path",children:p})]}),content:n("div",{className:"script-group-content",children:_.map(g=>n("label",{className:"checkbox-label script-item",children:[n("input",{type:"checkbox",checked:r.scriptReferences.some(y=>y.id===g.id),onChange:()=>C(g),className:"terminal-checkbox"}),n("span",{children:g.name})]},g.id))})}})})})]}),n("div",{className:"form-group",children:n("label",{className:"checkbox-label",children:[n("input",{type:"checkbox",checked:r.closeTerminalAfterExecution,onChange:p=>b("closeTerminalAfterExecution",p.currentTarget.checked),className:"terminal-checkbox"}),n("span",{children:"Close terminal after execution"})]})}),n("div",{className:"form-actions",children:[n("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),n("button",{type:"submit",className:"btn-primary",children:i?"Update Terminal Collection":"Create Terminal Collection"})]})]})})}function jn({isOpen:e,onClose:t,provider:s}){const i=S(m=>m.configDialog),o=i.configData,l=i.configDataError,[a,d]=x({version:"",ide:"",storagePath:"",logger:{level:"LOG",sinks:["console"]},extensions:{}}),[r,u]=x("dark"),[h,c]=x(!1),[b,C]=x(null);M(()=>{if(console.log("ConfigDialog: useEffect triggered with propConfigData",o),o){console.log("ConfigDialog: Setting form data",o),d(o);const m=o.extensions?.theme||"dark";u(m)}},[o]);const f=async m=>{m.preventDefault(),c(!0),C(null);try{const g={...a,extensions:{...a.extensions,theme:r}};s.sendMessage("codestate.config.update",{config:g})}catch(g){console.error("Failed to update config:",g),C("Failed to update config"),c(!1)}},E=()=>{d({version:"",ide:"",storagePath:"",logger:{level:"LOG",sinks:["console"]},extensions:{}}),c(!1),C(null),t()},N=m=>{d(g=>({...g,...m}))},p=m=>{d(g=>({...g,logger:{...g.logger,...m}}))},_=m=>{d(g=>({...g,logger:{...g.logger,sinks:g.logger.sinks.includes(m)?g.logger.sinks.filter(y=>y!==m):[...g.logger.sinks,m]}}))};return n(me,{isOpen:e,title:"Configuration Settings",onClose:E,size:"lg",children:l?n("div",{className:"error-state",children:[n("p",{className:"error-message",children:["Failed to load configuration: ",l]}),n("button",{className:"retry-button",onClick:t,children:"Close"})]}):o?n("form",{onSubmit:f,className:"config-form",children:[n("div",{className:"config-section",children:[n("h3",{children:"General Settings"}),n("div",{className:"form-group",children:[n("label",{htmlFor:"version",className:"form-label",children:"Version"}),n("input",{id:"version",type:"text",className:"form-input",value:a.version,onInput:m=>N({version:m.target?.value||""}),placeholder:"Configuration version",readOnly:!0})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"ide",className:"form-label",children:"IDE"}),n("input",{id:"ide",type:"text",className:"form-input",value:a.ide,onInput:m=>N({ide:m.target?.value||""}),placeholder:"Integrated Development Environment",readOnly:!0})]}),n("div",{className:"form-group",children:[n("label",{htmlFor:"storage-path",className:"form-label",children:"Storage Path"}),n("input",{id:"storage-path",type:"text",className:"form-input",value:a.storagePath,onInput:m=>N({storagePath:m.target?.value||""}),placeholder:"/path/to/storage"})]})]}),n("div",{className:"config-section",children:[n("h3",{children:"Theme Settings"}),n("div",{className:"form-group",children:[n("label",{htmlFor:"theme-select",className:"form-label",children:"Theme"}),n("select",{id:"theme-select",className:"form-select",value:r,onChange:m=>u(m.target?.value),children:[n("option",{value:"match-ide",children:"Match IDE"}),n("option",{value:"light",children:"Light"}),n("option",{value:"dark",children:"Dark"})]})]})]}),n("div",{className:"config-section",children:[n("h3",{children:"Logger Settings"}),n("div",{className:"form-group",children:[n("label",{htmlFor:"log-level",className:"form-label",children:"Log Level"}),n("select",{id:"log-level",className:"form-select",value:a.logger.level,onChange:m=>p({level:m.target?.value}),children:[n("option",{value:"ERROR",children:"ERROR"}),n("option",{value:"WARN",children:"WARN"}),n("option",{value:"LOG",children:"LOG"}),n("option",{value:"DEBUG",children:"DEBUG"})]})]}),n("div",{className:"form-group",children:[n("label",{className:"form-label",children:"Log Sinks"}),n("div",{className:"checkbox-group",children:[n("label",{className:"checkbox-label",children:[n("input",{type:"checkbox",checked:a.logger.sinks.includes("console"),onChange:()=>_("console"),className:"form-checkbox"}),"Console"]}),n("label",{className:"checkbox-label",children:[n("input",{type:"checkbox",checked:a.logger.sinks.includes("file"),onChange:()=>_("file"),className:"form-checkbox"}),"File"]})]})]}),a.logger.sinks.includes("file")&&n("div",{className:"form-group",children:[n("label",{htmlFor:"log-file-path",className:"form-label",children:"Log File Path"}),n("input",{id:"log-file-path",type:"text",className:"form-input",value:a.logger.filePath||"",onInput:m=>p({filePath:m.target?.value||""}),placeholder:"/path/to/logfile.log"})]})]}),b&&n("div",{className:"form-group",children:n("div",{className:"error-message",children:b})}),n("div",{className:"form-actions",children:[n("button",{type:"button",className:"btn-secondary",onClick:E,children:"Cancel"}),n("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Updating...":"Update Configuration"})]})]}):n("div",{className:"loading-state",children:[n("div",{className:"loading-spinner"}),n("p",{children:"Loading configuration..."})]})})}function $e({isOpen:e,title:t,message:s,confirmText:i="Confirm",cancelText:o="Cancel",variant:l="default",onConfirm:a,onCancel:d,onClose:r}){return M(()=>{if(!e)return;const b=C=>{C.key==="Escape"&&r()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[e,r]),M(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),e?n("div",{className:"alert-dialog-backdrop",onClick:b=>{b.target===b.currentTarget&&r()},children:n("div",{className:"alert-dialog",children:[n("div",{className:"alert-dialog-header",children:n("h3",{className:"alert-dialog-title",children:t})}),n("div",{className:"alert-dialog-content",children:n("p",{className:"alert-dialog-message",children:s})}),n("div",{className:"alert-dialog-footer",children:[n("button",{className:"btn-secondary",onClick:()=>{d(),r()},children:o}),n("button",{className:`btn-primary ${l==="destructive"?"btn-destructive":""}`,onClick:()=>{a(),r()},children:i})]})]})}):null}function Hn({provider:e}){const t=S(k=>k.createSessionDialog),s=S(k=>k.createScriptDialog),i=S(k=>k.createTerminalCollectionDialog),o=S(k=>k.configDialog),l=S(k=>k.currentSession),a=S(k=>k.currentScript),d=S(k=>k.currentTerminalCollection),r=S(k=>k.isEditDialogOpen),u=S(k=>k.isDeleteDialogOpen),h=S(k=>k.isScriptDeleteDialogOpen),c=S(k=>k.isScriptEditDialogOpen),b=S(k=>k.isTerminalCollectionDeleteDialogOpen),C=S(k=>k.isTerminalCollectionEditDialogOpen),f=S(k=>k.closeCreateSessionDialog),E=S(k=>k.closeCreateScriptDialog),N=S(k=>k.closeCreateTerminalCollectionDialog),p=S(k=>k.closeConfigDialog),_=S(k=>k.closeAllDialogs),m=()=>{l&&(e.sendMessage("codestate.session.delete",{id:l.id}),_())},g=()=>{a&&(e.sendMessage("codestate.script.delete",{id:a.id}),_())},y=()=>{d&&(e.sendMessage("codestate.terminal-collection.delete",{id:d.id}),_())},w=()=>{_()};return n(O,{children:[t.isOpen&&n(Pt,{isOpen:t.isOpen,onClose:f,provider:e,sessionData:t.sessionData,sessionDataError:t.sessionDataError}),s.isOpen&&n(Ot,{isOpen:s.isOpen,onClose:E,provider:e,rootPath:s.rootPath||void 0}),i.isOpen&&n($t,{isOpen:i.isOpen,onClose:N,provider:e,rootPath:i.rootPath||void 0}),o.isOpen&&n(jn,{isOpen:o.isOpen,onClose:p,provider:e}),c&&a&&n(Ot,{isOpen:c,onClose:_,provider:e,editScript:a}),C&&d&&n($t,{isOpen:C,onClose:_,provider:e,editTerminalCollection:d}),r&&l&&n(Pt,{isOpen:r,onClose:_,provider:e,sessionData:null,sessionDataError:null,editSession:l}),u&&l&&n($e,{isOpen:u,title:"Delete Session",message:`Are you sure you want to delete the session "${l.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive",onConfirm:m,onCancel:w,onClose:_}),h&&a&&n($e,{isOpen:h,title:"Delete Script",message:`Are you sure you want to delete the script "${a.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive",onConfirm:g,onCancel:w,onClose:_}),b&&d&&n($e,{isOpen:b,title:"Delete Terminal Collection",message:`Are you sure you want to delete the terminal collection "${d.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive",onConfirm:y,onCancel:w,onClose:_})]})}function zn(e){const{sessions:t,scripts:s,terminalCollections:i,sessionsLoading:o,scriptsLoading:l,terminalCollectionsLoading:a,sessionsError:d,scriptsError:r,terminalCollectionsError:u,sessionsLoaded:h,scriptsLoaded:c,terminalCollectionsLoaded:b,setSessions:C,setScripts:f,setTerminalCollections:E,removeSession:N,updateSession:p,setCurrentProjectRoot:_,setSessionsLoading:m,setScriptsLoading:g,setTerminalCollectionsLoading:y,setSessionsError:w,setScriptsError:k,setTerminalCollectionsError:$,setSessionsLoaded:W,setScriptsLoaded:J,setTerminalCollectionsLoaded:P,closeCreateSessionDialog:H,displaySessionCreatedFeedback:Ft,needsData:B}=S(),pe=()=>{h||o||(m(!0),w(null),e.initializeSessions())},he=()=>{c||l||(g(!0),k(null),e.initializeScripts())},fe=()=>{b||a||(y(!0),$(null),e.initializeTerminalCollections())};return M(()=>{B("sessions")&&pe()},[B("sessions")]),M(()=>{B("scripts")&&he()},[B("scripts")]),M(()=>{B("terminalCollections")&&fe()},[B("terminalCollections")]),{sessions:t,scripts:s,terminalCollections:i,sessionsLoading:o,scriptsLoading:l,terminalCollectionsLoading:a,sessionsError:d,scriptsError:r,terminalCollectionsError:u,sessionsLoaded:h,scriptsLoaded:c,terminalCollectionsLoaded:b,initializeSessions:pe,initializeScripts:he,initializeTerminalCollections:fe}}function Wn(e){const t=S(f=>f.openCreateSessionDialog),s=S(f=>f.openEditDialog),i=S(f=>f.openDeleteDialog),o=S(f=>f.openScriptDeleteDialog),l=S(f=>f.openScriptEditDialog),a=S(f=>f.openTerminalCollectionDeleteDialog),d=S(f=>f.openTerminalCollectionEditDialog),r=S(f=>f.setSessionData),u=S(f=>f.setSessionDataError),h=S(f=>f.sessions),c=S(f=>f.scripts),b=S(f=>f.terminalCollections);return{handleEvent:Ee(f=>{switch(f.type){case"CREATE_SESSION":e.initializeSessionCreation();break;case"RESUME_SESSION":console.log("Resume session:",f.payload.id),e.sendMessage("codestate.session.resume",{id:f.payload.id});break;case"DELETE_SESSION":console.log("Delete session:",f.payload.id);const E=h.find(y=>y.id===f.payload.id);E&&i(E);break;case"EXPORT_SESSION":console.log("Export session:",f.payload.id),e.sendMessage("codestate.session.export",{id:f.payload.id});break;case"EDIT_SESSION":console.log("Edit session:",f.payload.id);const N=h.find(y=>y.id===f.payload.id);N&&s(N);break;case"CREATE_SCRIPT":console.log("Create script clicked");break;case"RUN_SCRIPT":console.log("Run script:",f.payload.id),e.sendMessage("codestate.script.resume",{id:f.payload.id});break;case"DELETE_SCRIPT":console.log("Delete script:",f.payload.id);const p=c.find(y=>y.id===f.payload.id);p&&o(p);break;case"EDIT_SCRIPT":console.log("Edit script:",f.payload.id);const _=c.find(y=>y.id===f.payload.id);_&&l(_);break;case"CREATE_TERMINAL_COLLECTION":console.log("Create terminal collection clicked");break;case"EXECUTE_TERMINAL_COLLECTION":console.log("Execute terminal collection:",f.payload.id),e.sendMessage("codestate.terminal-collection.resume",{id:f.payload.id});break;case"DELETE_TERMINAL_COLLECTION":console.log("Delete terminal collection:",f.payload.id);const m=b.find(y=>y.id===f.payload.id);m&&a(m);break;case"EDIT_TERMINAL_COLLECTION":console.log("Edit terminal collection:",f.payload.id);const g=b.find(y=>y.id===f.payload.id);g&&d(g);break;default:console.warn("Unknown event type:",f)}},[e,r,u,t,s,i,o,l,a,d,h,c,b])}}function Bn({provider:e}){const{sessions:t,scripts:s,terminalCollections:i,sessionsLoading:o,scriptsLoading:l,terminalCollectionsLoading:a,initializeSessions:d,initializeScripts:r,initializeTerminalCollections:u}=zn(e),h=S(C=>C.configDialog),{handleEvent:c}=Wn(e);return M(()=>((async()=>{try{await e.initialize(),e.initializeConfig()}catch(f){console.error("Failed to initialize provider:",f)}})(),()=>{e.destroy()}),[e]),M(()=>{if(h.configData){const C=h.configData.extensions?.theme||"dark";console.log("App: Setting theme from config",C),document.documentElement.setAttribute("data-theme",C)}},[h.configData]),n("div",{className:"app",children:[n(Xt,{onConfigClick:()=>{const{openConfigDialog:C}=S.getState();C()}}),n("div",{className:"app-content",children:[n(Un,{sessions:t,scripts:s,terminalCollections:i,sessionsLoading:o,scriptsLoading:l,terminalCollectionsLoading:a,initializeSessions:d,initializeScripts:r,initializeTerminalCollections:u,onEvent:c}),n(Hn,{provider:e})]})]})}class Vn{store=S.getState();initializeSessions(){console.log("SessionManager: Initializing sessions")}handleSessionsInitResponse(t){console.log("SessionManager: Received sessions init response",t),this.store.setSessions(t.sessions||[]),this.store.setCurrentProjectRoot(t.currentProjectRoot||null),this.store.setSessionsLoaded(!0),this.store.setSessionsLoading(!1)}handleSessionCreateResponse(t){console.log("SessionManager: Received session create response",t),t.payload&&t.payload.success?(t.payload.id&&(this.store.addTempSessionWithId(t.payload.id),this.store.displaySessionCreatedFeedback(t.payload.id)),this.store.closeCreateSessionDialog()):t.payload&&t.payload.error&&(console.error("Session creation failed:",t.payload.error),this.store.setSessionDataError(t.payload.error))}handleSessionDeleteResponse(t){console.log("SessionManager: Received session delete response",t),t.status==="success"&&this.store.removeSession(t.payload.id)}handleSessionUpdateResponse(t){console.log("SessionManager: Received session update response",t),t.status==="success"&&(this.store.closeAllDialogs(),this.store.updateSession(t.payload.session))}handleSessionResumeResponse(t){console.log("SessionManager: Received session resume response",t)}handleSessionExportResponse(t){console.log("SessionManager: Received session export response",t)}handleSessionCreateInitResponse(t){console.log("SessionManager: Received session create init response",t),t.status==="error"?this.store.setSessionDataError(t.error):(this.store.setSessionData(t.sessionData),this.store.openCreateSessionDialog())}}class Gn{store=S.getState();initializeScripts(){console.log("ScriptManager: Initializing scripts")}handleScriptsInitResponse(t){console.log("ScriptManager: Received scripts init response",t),this.store.setScripts(t.scripts||[]),this.store.setScriptsLoaded(!0),this.store.setScriptsLoading(!1)}handleScriptCreateResponse(t){console.log("ScriptManager: Received script create response",t),t.payload&&t.payload.success?t.payload.id&&(this.store.addTempScriptWithId(t.payload.id),this.store.displayScriptCreatedFeedback(t.payload.id),this.store.closeCreateScriptDialog()):t.payload&&t.payload.error&&console.error("Script creation failed:",t.payload.error)}handleScriptDeleteResponse(t){console.log("ScriptManager: Received script delete response",t),t.status==="success"&&this.store.removeScript(t.payload.id)}handleScriptUpdateResponse(t){if(console.log("ScriptManager: Received script update response",t),t.status==="success"){const s=S.getState(),i=s.currentScript;if(console.log("ScriptManager: Current script before closing dialog:",i),this.store.closeAllDialogs(),i&&t.payload&&t.payload.id){const o={...i,id:t.payload.id};console.log("ScriptManager: Updating script in store:",o),s.updateScript(o)}else console.log("ScriptManager: No currentScript or payload.id found"),console.log("ScriptManager: currentScript:",i),console.log("ScriptManager: data.payload:",t.payload)}else t.payload&&t.payload.error&&console.error("Script update failed:",t.payload.error)}}class qn{store;constructor(){this.store=S.getState()}handleTerminalCollectionsInitResponse(t){console.log("TerminalCollectionManager: Received terminal collections init response",t),t.status==="success"&&t.payload&&t.payload.terminalCollections?(this.store.setTerminalCollections(t.payload.terminalCollections),this.store.setTerminalCollectionsLoaded(!0),this.store.setTerminalCollectionsLoading(!1)):(this.store.setTerminalCollectionsError(t.payload?.error||"Failed to load terminal collections"),this.store.setTerminalCollectionsLoading(!1))}handleTerminalCollectionCreateResponse(t){console.log("TerminalCollectionManager: Received terminal collection create response",t),t.status==="success"&&t.payload&&t.payload.id?(this.store.addTempTerminalCollectionWithId(t.payload.id),this.store.displayTerminalCollectionCreatedFeedback(t.payload.id),this.store.closeCreateTerminalCollectionDialog()):console.error("Terminal collection creation failed:",t.payload?.error)}handleTerminalCollectionDeleteResponse(t){console.log("TerminalCollectionManager: Received terminal collection delete response",t),t.status==="success"&&this.store.removeTerminalCollection(t.payload.id)}handleTerminalCollectionUpdateResponse(t){if(console.log("TerminalCollectionManager: Received terminal collection update response",t),t.status==="success"){const s=S.getState(),i=s.currentTerminalCollection;if(console.log("TerminalCollectionManager: Current terminal collection before closing dialog:",i),this.store.closeAllDialogs(),i&&t.payload&&t.payload.id){const o={...i,id:t.payload.id};console.log("TerminalCollectionManager: Updating terminal collection in store:",o),s.updateTerminalCollection(o)}else console.log("TerminalCollectionManager: No currentTerminalCollection or payload.id found"),console.log("TerminalCollectionManager: currentTerminalCollection:",i),console.log("TerminalCollectionManager: data.payload:",t.payload)}else t.payload&&t.payload.error&&console.error("Terminal collection update failed:",t.payload.error)}handleTerminalCollectionResumeResponse(t){console.log("TerminalCollectionManager: Received terminal collection resume response",t),t.status==="success"?console.log("Terminal collection execution started successfully"):console.error("Terminal collection execution failed:",t.payload?.error)}}class Zn{store=S.getState();initializeSessions(){console.log("DataManager: Initializing sessions")}initializeScripts(){console.log("DataManager: Initializing scripts")}initializeTerminalCollections(){console.log("DataManager: Initializing terminal collections")}handleSessionsInitResponse(t){console.log("DataManager: Received sessions init response",t),this.store.setSessions(t.sessions||[]),this.store.setCurrentProjectRoot(t.currentProjectRoot||null),this.store.setSessionsLoaded(!0),this.store.setSessionsLoading(!1)}handleScriptsInitResponse(t){console.log("DataManager: Received scripts init response",t),this.store.setScripts(t.scripts||[]),this.store.setScriptsLoaded(!0),this.store.setScriptsLoading(!1)}handleTerminalCollectionsInitResponse(t){console.log("DataManager: Received terminal collections init response",t),this.store.setTerminalCollections(t.terminalCollections||[]),this.store.setTerminalCollectionsLoaded(!0),this.store.setTerminalCollectionsLoading(!1)}}class Yn{store=S.getState();currentTheme="dark";handleThemeChange(t){console.log("ThemeManager: Theme changed to",t),this.currentTheme=t,document.documentElement.setAttribute("data-theme",t),window.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:t},bubbles:!0}))}getCurrentTheme(){return this.currentTheme}}class Kn{store=S.getState();handleConfigInitResponse(t){console.log("ConfigManager: Received config init response",t),console.log("ConfigManager: data.status",t.status),console.log("ConfigManager: data.payload",t.payload),t.status==="success"?(console.log("ConfigManager: Setting config data",t.payload.config),this.store.setConfigData(t.payload.config)):t.payload&&t.payload.error&&(console.log("ConfigManager: Setting config error",t.payload.error),this.store.setConfigDataError(t.payload.error))}handleConfigUpdateResponse(t){console.log("ConfigManager: Received config update response",t),t.status==="success"?(this.store.closeConfigDialog(),this.store.setConfigData(t.payload.config)):t.payload&&t.payload.error&&console.error("Config update failed:",t.payload.error)}}class Xn{vscode;connected=!1;sessionManager;scriptManager;terminalCollectionManager;dataManager;themeManager;configManager;constructor(){this.vscode=this.acquireVSCodeApi(),this.sessionManager=new Vn,this.scriptManager=new Gn,this.terminalCollectionManager=new qn,this.dataManager=new Zn,this.themeManager=new Yn,this.configManager=new Kn,this.setupMessageListener()}acquireVSCodeApi(){if(typeof window<"u"&&window.acquireVsCodeApi)return window.acquireVsCodeApi();throw new Error("VSCodeProvider can only be used in VS Code webview context")}setupMessageListener(){window.addEventListener("message",t=>{console.log("VSCodeProvider: Raw message event received",t.data);const s=t.data;this.handleMessage(s)})}handleMessage(t){switch(console.log("VSCodeProvider: Received message",t),t.type){case"theme-changed":this.themeManager.handleThemeChange(t.payload.theme);break;case"codestate.sessions.init.response":this.dataManager.handleSessionsInitResponse(t.payload);break;case"codestate.scripts.init.response":this.dataManager.handleScriptsInitResponse(t.payload);break;case"codestate.tc.init.response":this.dataManager.handleTerminalCollectionsInitResponse(t.payload);break;case"codestate.sessions.create.init.response":this.sessionManager.handleSessionCreateInitResponse(t.payload);break;case"codestate.session.create.response":this.sessionManager.handleSessionCreateResponse(t);break;case"codestate.script.create.response":this.scriptManager.handleScriptCreateResponse(t);break;case"codestate.script.delete.response":this.scriptManager.handleScriptDeleteResponse(t);break;case"codestate.script.update.response":this.scriptManager.handleScriptUpdateResponse(t);break;case"codestate.terminal-collection.create.response":this.terminalCollectionManager.handleTerminalCollectionCreateResponse(t);break;case"codestate.terminal-collection.delete.response":this.terminalCollectionManager.handleTerminalCollectionDeleteResponse(t);break;case"codestate.terminal-collection.update.response":this.terminalCollectionManager.handleTerminalCollectionUpdateResponse(t);break;case"codestate.terminal-collection.resume.response":this.terminalCollectionManager.handleTerminalCollectionResumeResponse(t);break;case"codestate.session.resume.response":this.sessionManager.handleSessionResumeResponse(t);break;case"codestate.session.delete.response":this.sessionManager.handleSessionDeleteResponse(t);break;case"codestate.session.update.response":this.sessionManager.handleSessionUpdateResponse(t);break;case"codestate.session.export.response":this.sessionManager.handleSessionExportResponse(t);break;case"codestate.config.init.response":console.log("VSCodeProvider: Received config init response",t),this.configManager.handleConfigInitResponse(t);break;case"codestate.config.update.response":console.log("VSCodeProvider: Received config update response",t),this.configManager.handleConfigUpdateResponse(t);break}}async initialize(){this.connected=!0,this.sendMessage("codestate.ui.ready",{})}destroy(){this.connected=!1}initializeSessions(){this.sendMessage("codestate.sessions.init",{})}initializeScripts(){this.sendMessage("codestate.scripts.init",{})}initializeTerminalCollections(){this.sendMessage("codestate.tc.init",{})}initializeConfig(){this.sendMessage("codestate.config.init",{})}sendMessage(t,s){if(this.vscode){const i=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);this.vscode.postMessage({type:t,payload:s,id:i})}}getTheme(){return this.themeManager.getCurrentTheme()}setTheme(t){this.themeManager.handleThemeChange(t),this.sendMessage("set-theme",{theme:t})}onThemeChange(t){window.addEventListener("theme-changed",s=>{t(s.detail.theme)})}isConnected(){return this.connected}initializeSessionCreation(){this.sendMessage("codestate.sessions.create.init",{})}}class At extends HTMLElement{appContainer=null;currentTheme="dark";constructor(){super(),this.initializeComponent()}initializeComponent(){this.appContainer=document.createElement("div"),this.appContainer.id="codesate-ui-root",this.appendChild(this.appContainer),this.setTheme(this.currentTheme)}connectedCallback(){if(this.appContainer){const t=new Xn;q(n(Bn,{provider:t}),this.appContainer)}}disconnectedCallback(){this.appContainer&&(this.appContainer.innerHTML="")}setTheme(t){this.currentTheme=t,document.documentElement.setAttribute("data-theme",t),this.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:t},bubbles:!0}))}getTheme(){return this.currentTheme}updateData(t){this.dispatchEvent(new CustomEvent("data-updated",{detail:{data:t},bubbles:!0}))}sendMessage(t,s){this.dispatchEvent(new CustomEvent("vscode-message",{detail:{type:t,payload:s},bubbles:!0}))}}return customElements.define("codesate-ui",At),_e.CodeStateUI=At,Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}),_e})({});
